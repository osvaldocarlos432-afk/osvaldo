const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-CDvsivs4.js","assets/vendor-BfWiUekA.js","assets/mui-BfWGdsZM.js"])))=>i.map(i=>d[i]);
var K1=Object.defineProperty;var J1=(n,e,t)=>e in n?K1(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Br=(n,e,t)=>J1(n,typeof e!="symbol"?e+"":e,t);import{c as Y1,j as u,T as Z1,C as X1,u as Q1,i as Ct,a as Eo,b as yf,A as e0,d as t0,B as ee,e as ge,f as or,g as Lt,I as Cu,h as He,k as hn,l as wi,G as Ze,L as id,D as jo,P as Wr,m as Yt,n as Gr,S as Vr,o as Ao,p as To,q as Wl,M as Ll,r as Cl,F as Gi,s as wf,t as xf,v as _f,w as ba,x as Sf,y as r0,z as Ml,_ as qt,E as Pu,H as n0,J as i0,K as sd,N as ad,O as od,Q as ld,R as ua,U as yr,V as cd,W as s0,X as a0,Y as Iu,Z as Nu,$ as Eu,a0 as o0,a1 as jf,a2 as Af,a3 as Qc,a4 as l0,a5 as c0,a6 as u0,a7 as h0,a8 as d0,a9 as Ec,aa as Jn,ab as Yn,ac as kf,ad as Zn,ae as f0,af as co,ag as ud,ah as hd,ai as p0,aj as g0,ak as Tu,al as m0,am as v0,an as b0,ao as y0}from"./mui-BfWGdsZM.js";import{c as w0,r as R,R as x0,g as Lf,d as Nn,a as bo}from"./vendor-BfWiUekA.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var Cf,dd=w0;Cf=dd.createRoot,dd.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ko(){return ko=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ko.apply(this,arguments)}var Vi;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Vi||(Vi={}));const fd="popstate";function _0(n){n===void 0&&(n={});function e(i,s){let{pathname:a="/",search:c="",hash:l=""}=Os(i.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),eu("",{pathname:a,search:c,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(i,s){let a=i.document.querySelector("base"),c="";if(a&&a.getAttribute("href")){let l=i.location.href,f=l.indexOf("#");c=f===-1?l:l.slice(0,f)}return c+"#"+(typeof s=="string"?s:Bl(s))}function r(i,s){Ru(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return j0(e,t,r,n)}function gr(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Ru(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function S0(){return Math.random().toString(36).substr(2,8)}function pd(n,e){return{usr:n.state,key:n.key,idx:e}}function eu(n,e,t,r){return t===void 0&&(t=null),ko({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Os(e):e,{state:t,key:e&&e.key||r||S0()})}function Bl(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Os(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function j0(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,c=Vi.Pop,l=null,f=g();f==null&&(f=0,a.replaceState(ko({},a.state,{idx:f}),""));function g(){return(a.state||{idx:null}).idx}function m(){c=Vi.Pop;let j=g(),w=j==null?null:j-f;f=j,l&&l({action:c,location:S.location,delta:w})}function y(j,w){c=Vi.Push;let C=eu(S.location,j,w);t&&t(C,j),f=g()+1;let F=pd(C,f),Z=S.createHref(C);try{a.pushState(F,"",Z)}catch(ae){if(ae instanceof DOMException&&ae.name==="DataCloneError")throw ae;i.location.assign(Z)}s&&l&&l({action:c,location:S.location,delta:1})}function v(j,w){c=Vi.Replace;let C=eu(S.location,j,w);t&&t(C,j),f=g();let F=pd(C,f),Z=S.createHref(C);a.replaceState(F,"",Z),s&&l&&l({action:c,location:S.location,delta:0})}function k(j){let w=i.location.origin!=="null"?i.location.origin:i.location.href,C=typeof j=="string"?j:Bl(j);return C=C.replace(/ $/,"%20"),gr(w,"No window.location.(origin|href) available to create URL for href: "+C),new URL(C,w)}let S={get action(){return c},get location(){return n(i,a)},listen(j){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(fd,m),l=j,()=>{i.removeEventListener(fd,m),l=null}},createHref(j){return e(i,j)},createURL:k,encodeLocation(j){let w=k(j);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:y,replace:v,go(j){return a.go(j)}};return S}var gd;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(gd||(gd={}));function A0(n,e,t){return t===void 0&&(t="/"),k0(n,e,t)}function k0(n,e,t,r){let i=typeof e=="string"?Os(e):e,s=Ou(i.pathname||"/",t);if(s==null)return null;let a=Pf(n);L0(a);let c=null;for(let l=0;c==null&&l<a.length;++l){let f=B0(s);c=F0(a[l],f)}return c}function Pf(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(s,a,c)=>{let l={relativePath:c===void 0?s.path||"":c,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(gr(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let f=Ki([r,l.relativePath]),g=t.concat(l);s.children&&s.children.length>0&&(gr(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),Pf(s.children,e,g,f)),!(s.path==null&&!s.index)&&e.push({path:f,score:R0(f,s.index),routesMeta:g})};return n.forEach((s,a)=>{var c;if(s.path===""||!((c=s.path)!=null&&c.includes("?")))i(s,a);else for(let l of If(s.path))i(s,a,l)}),e}function If(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=If(r.join("/")),c=[];return c.push(...a.map(l=>l===""?s:[s,l].join("/"))),i&&c.push(...a),c.map(l=>n.startsWith("/")&&l===""?"/":l)}function L0(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:O0(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const C0=/^:[\w-]+$/,P0=3,I0=2,N0=1,E0=10,T0=-2,md=n=>n==="*";function R0(n,e){let t=n.split("/"),r=t.length;return t.some(md)&&(r+=T0),e&&(r+=I0),t.filter(i=>!md(i)).reduce((i,s)=>i+(C0.test(s)?P0:s===""?N0:E0),r)}function O0(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function F0(n,e,t){let{routesMeta:r}=n,i={},s="/",a=[];for(let c=0;c<r.length;++c){let l=r[c],f=c===r.length-1,g=s==="/"?e:e.slice(s.length)||"/",m=D0({path:l.relativePath,caseSensitive:l.caseSensitive,end:f},g),y=l.route;if(!m)return null;Object.assign(i,m.params),a.push({params:i,pathname:Ki([s,m.pathname]),pathnameBase:z0(Ki([s,m.pathnameBase])),route:y}),m.pathnameBase!=="/"&&(s=Ki([s,m.pathnameBase]))}return a}function D0(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=M0(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((f,g,m)=>{let{paramName:y,isOptional:v}=g;if(y==="*"){let S=c[m]||"";a=s.slice(0,s.length-S.length).replace(/(.)\/+$/,"$1")}const k=c[m];return v&&!k?f[y]=void 0:f[y]=(k||"").replace(/%2F/g,"/"),f},{}),pathname:s,pathnameBase:a,pattern:n}}function M0(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Ru(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,l)=>(r.push({paramName:c,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function B0(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ru(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Ou(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function U0(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Os(n):n;return{pathname:t?t.startsWith("/")?t:$0(t,e):e,search:W0(r),hash:V0(i)}}function $0(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Tc(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function q0(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Fu(n,e){let t=q0(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function Du(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=Os(n):(i=ko({},n),gr(!i.pathname||!i.pathname.includes("?"),Tc("?","pathname","search",i)),gr(!i.pathname||!i.pathname.includes("#"),Tc("#","pathname","hash",i)),gr(!i.search||!i.search.includes("#"),Tc("#","search","hash",i)));let s=n===""||i.pathname==="",a=s?"/":i.pathname,c;if(a==null)c=t;else{let m=e.length-1;if(!r&&a.startsWith("..")){let y=a.split("/");for(;y[0]==="..";)y.shift(),m-=1;i.pathname=y.join("/")}c=m>=0?e[m]:"/"}let l=U0(i,c),f=a&&a!=="/"&&a.endsWith("/"),g=(s||a===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(f||g)&&(l.pathname+="/"),l}const Ki=n=>n.join("/").replace(/\/\/+/g,"/"),z0=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),W0=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,V0=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function H0(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Nf=["post","put","patch","delete"];new Set(Nf);const G0=["get",...Nf];new Set(G0);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lo(){return Lo=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Lo.apply(this,arguments)}const Mu=R.createContext(null),K0=R.createContext(null),Qi=R.createContext(null),Vl=R.createContext(null),xi=R.createContext({outlet:null,matches:[],isDataRoute:!1}),Ef=R.createContext(null);function J0(n,e){let{relative:t}=e===void 0?{}:e;Ia()||gr(!1);let{basename:r,navigator:i}=R.useContext(Qi),{hash:s,pathname:a,search:c}=Of(n,{relative:t}),l=a;return r!=="/"&&(l=a==="/"?r:Ki([r,a])),i.createHref({pathname:l,search:c,hash:s})}function Ia(){return R.useContext(Vl)!=null}function ri(){return Ia()||gr(!1),R.useContext(Vl).location}function Tf(n){R.useContext(Qi).static||R.useLayoutEffect(n)}function En(){let{isDataRoute:n}=R.useContext(xi);return n?l2():Y0()}function Y0(){Ia()||gr(!1);let n=R.useContext(Mu),{basename:e,future:t,navigator:r}=R.useContext(Qi),{matches:i}=R.useContext(xi),{pathname:s}=ri(),a=JSON.stringify(Fu(i,t.v7_relativeSplatPath)),c=R.useRef(!1);return Tf(()=>{c.current=!0}),R.useCallback(function(f,g){if(g===void 0&&(g={}),!c.current)return;if(typeof f=="number"){r.go(f);return}let m=Du(f,JSON.parse(a),s,g.relative==="path");n==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Ki([e,m.pathname])),(g.replace?r.replace:r.push)(m,g.state,g)},[e,r,a,s,n])}function Rf(){let{matches:n}=R.useContext(xi),e=n[n.length-1];return e?e.params:{}}function Of(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=R.useContext(Qi),{matches:i}=R.useContext(xi),{pathname:s}=ri(),a=JSON.stringify(Fu(i,r.v7_relativeSplatPath));return R.useMemo(()=>Du(n,JSON.parse(a),s,t==="path"),[n,a,s,t])}function Z0(n,e){return X0(n,e)}function X0(n,e,t,r){Ia()||gr(!1);let{navigator:i,static:s}=R.useContext(Qi),{matches:a}=R.useContext(xi),c=a[a.length-1],l=c?c.params:{};c&&c.pathname;let f=c?c.pathnameBase:"/";c&&c.route;let g=ri(),m;if(e){var y;let w=typeof e=="string"?Os(e):e;f==="/"||(y=w.pathname)!=null&&y.startsWith(f)||gr(!1),m=w}else m=g;let v=m.pathname||"/",k=v;if(f!=="/"){let w=f.replace(/^\//,"").split("/");k="/"+v.replace(/^\//,"").split("/").slice(w.length).join("/")}let S=A0(n,{pathname:k}),j=n2(S&&S.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:Ki([f,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?f:Ki([f,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),a,t,r);return e&&j?R.createElement(Vl.Provider,{value:{location:Lo({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:Vi.Pop}},j):j}function Q0(){let n=o2(),e=H0(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),t?R.createElement("pre",{style:i},t):null,null)}const e2=R.createElement(Q0,null);class t2 extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?R.createElement(xi.Provider,{value:this.props.routeContext},R.createElement(Ef.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function r2(n){let{routeContext:e,match:t,children:r}=n,i=R.useContext(Mu);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),R.createElement(xi.Provider,{value:e},r)}function n2(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,c=(i=t)==null?void 0:i.errors;if(c!=null){let g=a.findIndex(m=>m.route.id&&(c==null?void 0:c[m.route.id])!==void 0);g>=0||gr(!1),a=a.slice(0,Math.min(a.length,g+1))}let l=!1,f=-1;if(t&&r&&r.v7_partialHydration)for(let g=0;g<a.length;g++){let m=a[g];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(f=g),m.route.id){let{loaderData:y,errors:v}=t,k=m.route.loader&&y[m.route.id]===void 0&&(!v||v[m.route.id]===void 0);if(m.route.lazy||k){l=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}return a.reduceRight((g,m,y)=>{let v,k=!1,S=null,j=null;t&&(v=c&&m.route.id?c[m.route.id]:void 0,S=m.route.errorElement||e2,l&&(f<0&&y===0?(c2("route-fallback"),k=!0,j=null):f===y&&(k=!0,j=m.route.hydrateFallbackElement||null)));let w=e.concat(a.slice(0,y+1)),C=()=>{let F;return v?F=S:k?F=j:m.route.Component?F=R.createElement(m.route.Component,null):m.route.element?F=m.route.element:F=g,R.createElement(r2,{match:m,routeContext:{outlet:g,matches:w,isDataRoute:t!=null},children:F})};return t&&(m.route.ErrorBoundary||m.route.errorElement||y===0)?R.createElement(t2,{location:t.location,revalidation:t.revalidation,component:S,error:v,children:C(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):C()},null)}var Ff=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(Ff||{}),Df=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(Df||{});function i2(n){let e=R.useContext(Mu);return e||gr(!1),e}function s2(n){let e=R.useContext(K0);return e||gr(!1),e}function a2(n){let e=R.useContext(xi);return e||gr(!1),e}function Mf(n){let e=a2(),t=e.matches[e.matches.length-1];return t.route.id||gr(!1),t.route.id}function o2(){var n;let e=R.useContext(Ef),t=s2(),r=Mf();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function l2(){let{router:n}=i2(Ff.UseNavigateStable),e=Mf(Df.UseNavigateStable),t=R.useRef(!1);return Tf(()=>{t.current=!0}),R.useCallback(function(i,s){s===void 0&&(s={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,Lo({fromRouteId:e},s)))},[n,e])}const vd={};function c2(n,e,t){vd[n]||(vd[n]=!0)}function u2(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function h2(n){let{to:e,replace:t,state:r,relative:i}=n;Ia()||gr(!1);let{future:s,static:a}=R.useContext(Qi),{matches:c}=R.useContext(xi),{pathname:l}=ri(),f=En(),g=Du(e,Fu(c,s.v7_relativeSplatPath),l,i==="path"),m=JSON.stringify(g);return R.useEffect(()=>f(JSON.parse(m),{replace:t,state:r,relative:i}),[f,m,i,t,r]),null}function xs(n){gr(!1)}function d2(n){let{basename:e="/",children:t=null,location:r,navigationType:i=Vi.Pop,navigator:s,static:a=!1,future:c}=n;Ia()&&gr(!1);let l=e.replace(/^\/*/,"/"),f=R.useMemo(()=>({basename:l,navigator:s,static:a,future:Lo({v7_relativeSplatPath:!1},c)}),[l,c,s,a]);typeof r=="string"&&(r=Os(r));let{pathname:g="/",search:m="",hash:y="",state:v=null,key:k="default"}=r,S=R.useMemo(()=>{let j=Ou(g,l);return j==null?null:{location:{pathname:j,search:m,hash:y,state:v,key:k},navigationType:i}},[l,g,m,y,v,k,i]);return S==null?null:R.createElement(Qi.Provider,{value:f},R.createElement(Vl.Provider,{children:t,value:S}))}function f2(n){let{children:e,location:t}=n;return Z0(tu(e),t)}new Promise(()=>{});function tu(n,e){e===void 0&&(e=[]);let t=[];return R.Children.forEach(n,(r,i)=>{if(!R.isValidElement(r))return;let s=[...e,i];if(r.type===R.Fragment){t.push.apply(t,tu(r.props.children,s));return}r.type!==xs&&gr(!1),!r.props.index||!r.props.children||gr(!1);let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=tu(r.props.children,s)),t.push(a)}),t}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ru(){return ru=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ru.apply(this,arguments)}function p2(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function g2(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function m2(n,e){return n.button===0&&(!e||e==="_self")&&!g2(n)}function nu(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(i=>[t,i]):[[t,r]])},[]))}function v2(n,e){let t=nu(n);return e&&e.forEach((r,i)=>{t.has(i)||e.getAll(i).forEach(s=>{t.append(i,s)})}),t}const b2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],y2="6";try{window.__reactRouterVersion=y2}catch{}const w2="startTransition",bd=x0[w2];function x2(n){let{basename:e,children:t,future:r,window:i}=n,s=R.useRef();s.current==null&&(s.current=_0({window:i,v5Compat:!0}));let a=s.current,[c,l]=R.useState({action:a.action,location:a.location}),{v7_startTransition:f}=r||{},g=R.useCallback(m=>{f&&bd?bd(()=>l(m)):l(m)},[l,f]);return R.useLayoutEffect(()=>a.listen(g),[a,g]),R.useEffect(()=>u2(r),[r]),R.createElement(d2,{basename:e,children:t,location:c.location,navigationType:c.action,navigator:a,future:r})}const _2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",S2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ls=R.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:s,replace:a,state:c,target:l,to:f,preventScrollReset:g,viewTransition:m}=e,y=p2(e,b2),{basename:v}=R.useContext(Qi),k,S=!1;if(typeof f=="string"&&S2.test(f)&&(k=f,_2))try{let F=new URL(window.location.href),Z=f.startsWith("//")?new URL(F.protocol+f):new URL(f),ae=Ou(Z.pathname,v);Z.origin===F.origin&&ae!=null?f=ae+Z.search+Z.hash:S=!0}catch{}let j=J0(f,{relative:i}),w=j2(f,{replace:a,state:c,target:l,preventScrollReset:g,relative:i,viewTransition:m});function C(F){r&&r(F),F.defaultPrevented||w(F)}return R.createElement("a",ru({},y,{href:k||j,onClick:S||s?r:C,ref:t,target:l}))});var yd;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(yd||(yd={}));var wd;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(wd||(wd={}));function j2(n,e){let{target:t,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:c}=e===void 0?{}:e,l=En(),f=ri(),g=Of(n,{relative:a});return R.useCallback(m=>{if(m2(m,t)){m.preventDefault();let y=r!==void 0?r:Bl(f)===Bl(g);l(n,{replace:y,state:i,preventScrollReset:s,relative:a,viewTransition:c})}},[f,l,g,r,i,t,n,s,a,c])}function A2(n){let e=R.useRef(nu(n)),t=R.useRef(!1),r=ri(),i=R.useMemo(()=>v2(r.search,t.current?null:e.current),[r.search]),s=En(),a=R.useCallback((c,l)=>{const f=nu(typeof c=="function"?c(i):c);t.current=!0,s("?"+f,l)},[s,i]);return[i,a]}const Bf=R.createContext({mode:"dark",toggleTheme:()=>{}}),k2=({children:n})=>{const[e,t]=R.useState("dark");R.useEffect(()=>{const s=localStorage.getItem("theme");s?t(s):localStorage.setItem("theme","dark")},[]),R.useEffect(()=>{localStorage.setItem("theme",e),document.body.className=e==="dark"?"dark-theme":"light-theme"},[e]);const r=()=>{t(s=>s==="dark"?"light":"dark")},i=Y1({palette:{mode:e,primary:{main:"#8e24aa"},secondary:{main:"#6a1b9a"},background:{default:"#000000",paper:"#1a1a1a"},text:{primary:"#FFFFFF",secondary:"#8e24aa"},error:{main:"#FF0000"}},typography:{fontFamily:'"Montserrat", "Roboto", "Helvetica", "Arial", sans-serif',h1:{fontWeight:800,letterSpacing:"0.5px"},h2:{fontWeight:700,letterSpacing:"0.3px"},h3:{fontWeight:600},h4:{fontWeight:600},button:{fontWeight:600,textTransform:"none"}},components:{MuiButton:{styleOverrides:{root:{borderRadius:6,padding:"8px 20px",transition:"all 0.3s ease"},containedPrimary:{backgroundColor:"#8e24aa","&:hover":{backgroundColor:"#6a1b9a",transform:"scale(1.03)"}}}},MuiCard:{styleOverrides:{root:{borderRadius:8,transition:"transform 0.3s ease-in-out, box-shadow 0.3s ease","&:hover":{transform:"scale(1.05)",zIndex:1,boxShadow:"0 10px 20px rgba(0,0,0,0.5)"}}}},MuiAppBar:{styleOverrides:{root:{backgroundColor:"#1a1a1a",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)"}}},MuiIconButton:{styleOverrides:{root:{"&:hover":{backgroundColor:"rgba(142, 36, 170, 0.1)"}}}}}});return u.jsx(Bf.Provider,{value:{mode:e,toggleTheme:r},children:u.jsxs(Z1,{theme:i,children:[u.jsx(X1,{}),n]})})},Uf=R.createContext({user:null,loading:!1,error:null,login:async()=>{},logout:async()=>{},checkSession:async()=>{},isAuthenticated:!1,sessionCheckedAt:0}),xd=5*60*1e3,L2=({children:n})=>{const[e,t]=R.useState(null),[r,i]=R.useState(!0),[s,a]=R.useState(null),[c,l]=R.useState(!1),[f,g]=R.useState(0),[m,y]=R.useState(null),v=En();R.useEffect(()=>{ae();const M=setInterval(()=>{m&&Date.now()-f>xd&&ae()},xd);return()=>clearInterval(M)},[]);const k="",S=async(M,z,W)=>{try{i(!0),a(null);const N=await fetch(`${k}/api/users/email/${encodeURIComponent(M)}`),T=N.ok?await N.json():null;if(!T){a("Usuário não encontrado. Verifique suas credenciais.");return}const V=await C2(z),U=T.password_hash||T.password||"";if(V!==U){a("Senha inválida. Tente novamente.");return}const ne=await j(T.id);if(!ne){a("Falha ao criar sessão. Tente novamente.");return}const se={$id:T.id,email:T.email,name:T.name,password:T.password_hash||T.password||"",created_at:T.created_at||T.createdAt};t(se),l(!0),y(ne),g(Date.now()),W&&v(W,{replace:!0})}catch(N){console.error("Login error:",N),a("Erro ao fazer login. Tente novamente.")}finally{i(!1)}},j=async M=>{try{const z=te(),W=new Date;W.setHours(W.getHours()+24);const N={userId:M,token:z,userAgent:navigator.userAgent.substring(0,255),expiresAt:W.toISOString(),isActive:!0},T=await fetch(`${k}/api/sessions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)}),V=T.ok?await T.json():null;return localStorage.setItem("sessionToken",z),V}catch(z){return console.error("Error creating session:",z),null}},w=async()=>{try{if(i(!0),m)await C(m.id);else{const M=await F();M&&await C(M.id)}t(null),l(!1),y(null),g(Date.now()),v("/login")}catch(M){console.error("Logout error:",M),localStorage.removeItem("sessionToken"),t(null),l(!1),y(null),v("/login")}finally{i(!1)}},C=async M=>{try{await fetch(`${k}/api/sessions/${encodeURIComponent(M)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({isActive:!1})}),localStorage.removeItem("sessionToken")}catch(z){console.error("Error deactivating session:",z)}},F=async()=>{const M=localStorage.getItem("sessionToken");return M?await Z(M):null},Z=async M=>{try{console.log("Validating session with token:",M.substring(0,10)+"...");const z=await fetch(`${k}/api/sessions/token/${encodeURIComponent(M)}`),W=z.ok?await z.json():null;if(!W)return console.log("No session found with this token"),null;if(console.log("Session found:",W.id,"for user:",W.userId),!W.isActive)return console.log("Session found, but is inactive"),null;const N=new Date(W.expiresAt),T=new Date;return console.log("Session expires at:",N,"Now:",T),N<T?(console.log("Session expired, deactivating"),await C(W.id),null):(console.log("Session valid and active"),W)}catch(z){return console.error("Error validating session:",z),null}},ae=async()=>{try{const M=Date.now();if(M-f<1e4)return;i(!0);const z=await F();if(y(z),g(M),!z){t(null),l(!1);return}try{const W=await fetch(`${k}/api/users/${encodeURIComponent(z.userId)}`),N=W.ok?await W.json():null;if(!N){await C(z.id),t(null),l(!1),y(null);return}const T={$id:N.id,email:N.email,name:N.name,password:N.password_hash||N.password||"",created_at:N.created_at||N.createdAt};t(T),l(!0)}catch(W){console.error("Error fetching user data:",W),t(null),l(!1),await C(z.id),y(null)}}catch(M){console.error("Session check error:",M),t(null),l(!1),y(null)}finally{i(!1)}},te=()=>{const M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let z="";for(let W=0;W<64;W++)z+=M.charAt(Math.floor(Math.random()*M.length));return z},G={user:e,loading:r,error:s,login:S,logout:w,checkSession:ae,isAuthenticated:c,sessionCheckedAt:f};return u.jsx(Uf.Provider,{value:G,children:n})};async function C2(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(r)).map(s=>s.toString(16).padStart(2,"0")).join("")}const es=()=>R.useContext(Uf);class P2{constructor(){Br(this,"config",null);Br(this,"isInitialized",!1)}async initialize(e){this.config=e,this.isInitialized=!0}async checkInitialized(){(!this.isInitialized||!this.config)&&await this.initializeWithDefaultConfig()}async initializeWithDefaultConfig(){try{const t=await fetch("/api/site-config");if(t.ok){const r=await t.json(),i=r.wasabiConfig||r.wasabi_config;if(i){const s={accessKey:i.accessKey||i.access_key||"",secretKey:i.secretKey||i.secret_key||"",region:i.region||"",bucket:i.bucket||"",endpoint:i.endpoint||""};await this.initialize(s);return}}}catch{console.warn("Could not load site config for Wasabi, using default config")}await this.initialize(I2)}async uploadFile(e,t="videos"){try{await this.checkInitialized();const r=new FormData;r.append("file",e);const i="",s=`/api/upload/${t}`,a=`${i}${s}`;console.log(`Uploading file to: ${a}`),console.log(`File: ${e.name}, Size: ${e.size}, Type: ${e.type}`);const c=await fetch(a,{method:"POST",body:r});if(c.ok){const l=await c.json();return{success:l.success,fileId:l.fileId,url:l.url}}else{const l=await c.json().catch(()=>({}));throw new Error(`Upload failed: ${c.status} ${c.statusText} - ${l.error||"Unknown error"}`)}}catch(r){return console.error("Error uploading file to Wasabi:",r),{success:!1,fileId:"",url:"",error:r instanceof Error?r.message:"Unknown error"}}}async getFileUrl(e){await this.checkInitialized();try{const t="",r=encodeURIComponent(e);console.log("Requesting signed URL for fileId:",e,"encoded:",r);const i=await fetch(`${t}/api/signed-url/${r}`);if(i.ok){const s=await i.json();if(s.success&&s.url)return console.log("Signed URL obtained:",s.url),s.url}else console.error("Failed to get signed URL:",i.status,i.statusText);console.warn("Failed to get signed URL, falling back to direct URL")}catch(t){console.warn("Error getting signed URL:",t)}return e.startsWith("videos/")||e.startsWith("thumbnails/")?`https://${this.config.bucket}.s3.${this.config.region}.wasabisys.com/${e}`:`https://${this.config.bucket}.s3.${this.config.region}.wasabisys.com/videos/${e}`}async getThumbnailUrl(e){await this.checkInitialized();try{const t="",r=encodeURIComponent(e);console.log("Requesting signed URL for thumbnailId:",e,"encoded:",r);const i=await fetch(`${t}/api/signed-url/${r}`);if(i.ok){const s=await i.json();if(s.success&&s.url)return console.log("Signed URL for thumbnail obtained:",s.url),s.url}else console.error("Failed to get signed URL for thumbnail:",i.status,i.statusText);console.warn("Failed to get signed URL for thumbnail, falling back to direct URL")}catch(t){console.warn("Error getting signed URL for thumbnail:",t)}return e.startsWith("thumbnails/")?`https://${this.config.bucket}.s3.${this.config.region}.wasabisys.com/${e}`:`https://${this.config.bucket}.s3.${this.config.region}.wasabisys.com/thumbnails/${e}`}async deleteFile(e){await this.checkInitialized();try{const t="",r=encodeURIComponent(e),i=await fetch(`${t}/api/delete-file/${r}`,{method:"DELETE"});return i.ok?(await i.json()).success||!1:(console.error("Failed to delete file:",i.status,i.statusText),!1)}catch(t){return console.error("Error deleting file from Wasabi:",t),!1}}async fileExists(e){await this.checkInitialized();try{const t=await this.getFileUrl(e);return(await fetch(t,{method:"HEAD"})).ok}catch(t){return console.error("Error checking file existence:",t),!1}}async listFiles(e="videos"){await this.checkInitialized();try{return[]}catch(t){return console.error("Error listing files:",t),[]}}}const In=new P2,I2={accessKey:"",secretKey:"",region:"",bucket:"",endpoint:""};class N2{constructor(){Br(this,"METADATA_KEY","metadata/videosplus-data.json");Br(this,"cache",null);Br(this,"cacheTimestamp",0);Br(this,"CACHE_DURATION",30*1e3)}isCacheValid(){return this.cache!==null&&this.cacheTimestamp>0&&Date.now()-this.cacheTimestamp<this.CACHE_DURATION}clearCache(){this.cache=null,this.cacheTimestamp=0,console.log("Wasabi metadata cache cleared")}async loadDataFromWasabi(){try{console.log("Loading metadata from Wasabi..."),await In.initialize({accessKey:"AF9I5LHPFGGCJFWEZPLK",secretKey:"twuS2OBizmGUKwQkfFHspbBvGN78A00MTBhLbHN1",region:"eu-central-2",bucket:"videospack24",endpoint:"https://s3.eu-central-2.wasabisys.com"});const e=await In.getFileUrl(this.METADATA_KEY),t=await fetch(e);if(!t.ok)throw new Error(`Failed to load metadata: ${t.status}`);const r=await t.json();return console.log("Metadata loaded from Wasabi:",r),this.cache=r,this.cacheTimestamp=Date.now(),r}catch(e){console.error("Error loading metadata from Wasabi:",e);const t={videos:[],users:[],sessions:[],siteConfig:{siteName:"VideosPlus",paypalClientId:"",paypalMeUsername:"",stripePublishableKey:"",stripeSecretKey:"",telegramUsername:"",videoListTitle:"Available Videos",crypto:[],emailHost:"smtp.gmail.com",emailPort:"587",emailSecure:!1,emailUser:"",emailPass:"",emailFrom:"",wasabiConfig:{accessKey:"AF9I5LHPFGGCJFWEZPLK",secretKey:"twuS2OBizmGUKwQkfFHspbBvGN78A00MTBhLbHN1",region:"eu-central-2",bucket:"videospack24",endpoint:"https://s3.eu-central-2.wasabisys.com"}}};return this.cache=t,this.cacheTimestamp=Date.now(),t}}async saveDataToWasabi(e){try{console.log("Saving metadata to Wasabi..."),await In.initialize({accessKey:"AF9I5LHPFGGCJFWEZPLK",secretKey:"twuS2OBizmGUKwQkfFHspbBvGN78A00MTBhLbHN1",region:"eu-central-2",bucket:"videospack24",endpoint:"https://s3.eu-central-2.wasabisys.com"});const t=JSON.stringify(e,null,2),r=new FormData,i=new Blob([t],{type:"application/json"});r.append("file",i,"videosplus-data.json");const a=await fetch("/api/upload/metadata",{method:"POST",body:r});if(!a.ok)throw new Error(`Failed to save metadata: ${a.status}`);console.log("Metadata saved to Wasabi successfully"),this.cache=e,this.cacheTimestamp=Date.now()}catch(t){throw console.error("Error saving metadata to Wasabi:",t),t}}async getData(){return this.isCacheValid()?(console.log("Using cached metadata"),this.cache):await this.loadDataFromWasabi()}async getAllVideos(){return(await this.getData()).videos||[]}async getVideo(e){return(await this.getAllVideos()).find(r=>r.id===e)||null}async createVideo(e){const t=await this.loadDataFromWasabi(),r={...e,id:this.generateId(),createdAt:new Date().toISOString(),views:0};return t.videos||(t.videos=[]),t.videos.push(r),await this.saveDataToWasabi(t),r}async updateVideo(e,t){const r=await this.loadDataFromWasabi();if(!r.videos)return null;const i=r.videos.findIndex(s=>s.id===e);return i===-1?null:(r.videos[i]={...r.videos[i],...t},await this.saveDataToWasabi(r),r.videos[i])}async deleteVideo(e){const t=await this.loadDataFromWasabi();if(!t.videos)return!1;const r=t.videos.findIndex(i=>i.id===e);return r===-1?!1:(t.videos.splice(r,1),await this.saveDataToWasabi(t),!0)}async incrementVideoViews(e){const t=await this.loadDataFromWasabi();if(!t.videos)return;const r=t.videos.find(i=>i.id===e);r&&(r.views=(r.views||0)+1,await this.saveDataToWasabi(t))}async getAllUsers(){return(await this.getData()).users||[]}async getUser(e){return(await this.getAllUsers()).find(r=>r.id===e)||null}async getUserByEmail(e){return(await this.getAllUsers()).find(r=>r.email===e)||null}async createUser(e){const t=await this.loadDataFromWasabi(),r={...e,id:this.generateId(),createdAt:new Date().toISOString()};return t.users||(t.users=[]),t.users.push(r),await this.saveDataToWasabi(t),r}async updateUser(e,t){const r=await this.loadDataFromWasabi();if(!r.users)return null;const i=r.users.findIndex(s=>s.id===e);return i===-1?null:(r.users[i]={...r.users[i],...t},await this.saveDataToWasabi(r),r.users[i])}async deleteUser(e){const t=await this.loadDataFromWasabi();if(!t.users)return!1;const r=t.users.findIndex(i=>i.id===e);return r===-1?!1:(t.users.splice(r,1),await this.saveDataToWasabi(t),!0)}async getAllSessions(){return(await this.getData()).sessions||[]}async getSessionByToken(e){return(await this.getAllSessions()).find(r=>r.token===e&&r.isActive)||null}async createSession(e){const t=await this.loadDataFromWasabi(),r={...e,id:this.generateId(),createdAt:new Date().toISOString()};return t.sessions||(t.sessions=[]),t.sessions.push(r),await this.saveDataToWasabi(t),r}async updateSession(e,t){const r=await this.loadDataFromWasabi();if(!r.sessions)return null;const i=r.sessions.findIndex(s=>s.id===e);return i===-1?null:(r.sessions[i]={...r.sessions[i],...t},await this.saveDataToWasabi(r),r.sessions[i])}async deleteSession(e){const t=await this.loadDataFromWasabi();if(!t.sessions)return!1;const r=t.sessions.findIndex(i=>i.id===e);return r===-1?!1:(t.sessions.splice(r,1),await this.saveDataToWasabi(t),!0)}async getSiteConfig(){return(await this.getData()).siteConfig||null}async updateSiteConfig(e){const t=await this.loadDataFromWasabi();return t.siteConfig={...t.siteConfig,...e},await this.saveDataToWasabi(t),t.siteConfig}generateId(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}clearCachePublic(){this.clearCache()}}const Ir=new N2;class E2{constructor(){Br(this,"isInitialized",!1)}async initialize(){this.isInitialized=!0}async checkInitialized(){this.isInitialized||await this.initialize()}async getAllVideos(){return await this.checkInitialized(),await Ir.getAllVideos()}async getVideo(e){return await this.checkInitialized(),await Ir.getVideo(e)}async createVideo(e){return await this.checkInitialized(),await Ir.createVideo(e)}async updateVideo(e,t){return await this.checkInitialized(),await Ir.updateVideo(e,t)}async deleteVideo(e){return await this.checkInitialized(),await Ir.deleteVideo(e)}async incrementVideoViews(e){return await this.checkInitialized(),await Ir.incrementVideoViews(e)}async getAllUsers(){return await this.checkInitialized(),await Ir.getAllUsers()}async getUser(e){return await this.checkInitialized(),await Ir.getUser(e)}async getUserByEmail(e){return await this.checkInitialized(),await Ir.getUserByEmail(e)}async createUser(e){return await this.checkInitialized(),await Ir.createUser(e)}async updateUser(e,t){return await this.checkInitialized(),await Ir.updateUser(e,t)}async deleteUser(e){return await this.checkInitialized(),await Ir.deleteUser(e)}async createSession(e){return await this.checkInitialized(),await Ir.createSession(e)}async getSessionByToken(e){return await this.checkInitialized(),await Ir.getSessionByToken(e)}async updateSession(e,t){return await this.checkInitialized(),await Ir.updateSession(e,t)}async deleteSession(e){return await this.checkInitialized(),await Ir.deleteSession(e)}async getSiteConfig(){return await this.checkInitialized(),await Ir.getSiteConfig()}async updateSiteConfig(e){return await this.checkInitialized(),await Ir.updateSiteConfig(e)}async healthCheck(){try{return await this.checkInitialized(),!0}catch(e){return console.error("Health check failed:",e),!1}}}const _d=new E2,T2="modulepreload",R2=function(n){return"/"+n},Sd={},Yi=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(t.map(l=>{if(l=R2(l),l in Sd)return;Sd[l]=!0;const f=l.endsWith(".css"),g=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${g}`))return;const m=document.createElement("link");if(m.rel=f?"stylesheet":T2,f||(m.as="script"),m.crossOrigin="",m.href=l,c&&m.setAttribute("nonce",c),document.head.appendChild(m),f)return new Promise((y,v)=>{m.addEventListener("load",y),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return i.then(a=>{for(const c of a||[])c.status==="rejected"&&s(c.reason);return e().catch(s)})},O2=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Yi(async()=>{const{default:r}=await Promise.resolve().then(()=>Na);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class Bu extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class F2 extends Bu{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class jd extends Bu{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Ad extends Bu{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var iu;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(iu||(iu={}));var D2=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function c(g){try{f(r.next(g))}catch(m){a(m)}}function l(g){try{f(r.throw(g))}catch(m){a(m)}}function f(g){g.done?s(g.value):i(g.value).then(c,l)}f((r=r.apply(n,e||[])).next())})};class M2{constructor(e,{headers:t={},customFetch:r,region:i=iu.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=O2(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return D2(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:a}=t;let c={},{region:l}=t;l||(l=this.region);const f=new URL(`${this.url}/${e}`);l&&l!=="any"&&(c["x-region"]=l,f.searchParams.set("forceFunctionRegion",l));let g;a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",g=a):typeof a=="string"?(c["Content-Type"]="text/plain",g=a):typeof FormData<"u"&&a instanceof FormData?g=a:(c["Content-Type"]="application/json",g=JSON.stringify(a)));const m=yield this.fetch(f.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),i),body:g}).catch(S=>{throw new F2(S)}),y=m.headers.get("x-relay-error");if(y&&y==="true")throw new jd(m);if(!m.ok)throw new Ad(m);let v=((r=m.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),k;return v==="application/json"?k=yield m.json():v==="application/octet-stream"?k=yield m.blob():v==="text/event-stream"?k=m:v==="multipart/form-data"?k=yield m.formData():k=yield m.text(),{data:k,error:null,response:m}}catch(i){return{data:null,error:i,response:i instanceof Ad||i instanceof jd?i.context:void 0}}})}}var un={},Uu={},Hl={},Ro={},Gl={},Kl={},B2=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ca=B2();const U2=Ca.fetch,$f=Ca.fetch.bind(Ca),qf=Ca.Headers,$2=Ca.Request,q2=Ca.Response,Na=Object.freeze(Object.defineProperty({__proto__:null,Headers:qf,Request:$2,Response:q2,default:$f,fetch:U2},Symbol.toStringTag,{value:"Module"})),z2=Lf(Na);var Jl={};Object.defineProperty(Jl,"__esModule",{value:!0});let W2=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Jl.default=W2;var zf=Nn&&Nn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Kl,"__esModule",{value:!0});const V2=zf(z2),H2=zf(Jl);let G2=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=V2.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var a,c,l,f;let g=null,m=null,y=null,v=s.status,k=s.statusText;if(s.ok){if(this.method!=="HEAD"){const C=await s.text();C===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((a=this.headers.get("Accept"))===null||a===void 0)&&a.includes("application/vnd.pgrst.plan+text"))?m=C:m=JSON.parse(C))}const j=(c=this.headers.get("Prefer"))===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),w=(l=s.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");j&&w&&w.length>1&&(y=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(m)&&(m.length>1?(g={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,y=null,v=406,k="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{const j=await s.text();try{g=JSON.parse(j),Array.isArray(g)&&s.status===404&&(m=[],g=null,v=200,k="OK")}catch{s.status===404&&j===""?(v=204,k="No Content"):g={message:j}}if(g&&this.isMaybeSingle&&(!((f=g==null?void 0:g.details)===null||f===void 0)&&f.includes("0 rows"))&&(g=null,v=200,k="OK"),g&&this.shouldThrowOnError)throw new H2.default(g)}return{error:g,data:m,count:y,status:v,statusText:k}});return this.shouldThrowOnError||(i=i.catch(s=>{var a,c,l;return{error:{message:`${(a=s==null?void 0:s.name)!==null&&a!==void 0?a:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(c=s==null?void 0:s.stack)!==null&&c!==void 0?c:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}returns(){return this}overrideTypes(){return this}};Kl.default=G2;var K2=Nn&&Nn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Gl,"__esModule",{value:!0});const J2=K2(Kl);let Y2=class extends J2.default{select(e){let t=!1;const r=(e??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){const a=s?`${s}.order`:"order",c=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${c?`${c},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:i=r}={}){const s=typeof i>"u"?"offset":`${i}.offset`,a=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:a="text"}={}){var c;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),f=(c=this.headers.get("Accept"))!==null&&c!==void 0?c:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${f}"; options=${l};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Gl.default=Y2;var Z2=Nn&&Nn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ro,"__esModule",{value:!0});const X2=Z2(Gl);let Q2=class extends X2.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};Ro.default=Q2;var eg=Nn&&Nn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Hl,"__esModule",{value:!0});const uo=eg(Ro);let tg=class{constructor(e,{headers:t={},schema:r,fetch:i}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=i}select(e,{head:t=!1,count:r}={}){const i=t?"HEAD":"GET";let s=!1;const a=(e??"*").split("").map(c=>/\s/.test(c)&&!s?"":(c==='"'&&(s=!s),c)).join("");return this.url.searchParams.set("select",a),r&&this.headers.append("Prefer",`count=${r}`),new uo.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var i;const s="POST";if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((c,l)=>c.concat(Object.keys(l)),[]);if(a.length>0){const c=[...new Set(a)].map(l=>`"${l}"`);this.url.searchParams.set("columns",c.join(","))}}return new uo.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){var a;const c="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),i&&this.headers.append("Prefer",`count=${i}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((f,g)=>f.concat(Object.keys(g)),[]);if(l.length>0){const f=[...new Set(l)].map(g=>`"${g}"`);this.url.searchParams.set("columns",f.join(","))}}return new uo.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(e,{count:t}={}){var r;const i="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new uo.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new uo.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}};Hl.default=tg;var Wf=Nn&&Nn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Uu,"__esModule",{value:!0});const rg=Wf(Hl),ng=Wf(Ro);let ig=class Vf{constructor(e,{headers:t={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=i}from(e){const t=new URL(`${this.url}/${e}`);return new rg.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Vf(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:i=!1,count:s}={}){var a;let c;const l=new URL(`${this.url}/rpc/${e}`);let f;r||i?(c=r?"HEAD":"GET",Object.entries(t).filter(([m,y])=>y!==void 0).map(([m,y])=>[m,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([m,y])=>{l.searchParams.append(m,y)})):(c="POST",f=t);const g=new Headers(this.headers);return s&&g.set("Prefer",`count=${s}`),new ng.default({method:c,url:l,headers:g,schema:this.schemaName,body:f,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};Uu.default=ig;var Ea=Nn&&Nn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(un,"__esModule",{value:!0});un.PostgrestError=un.PostgrestBuilder=un.PostgrestTransformBuilder=un.PostgrestFilterBuilder=un.PostgrestQueryBuilder=un.PostgrestClient=void 0;const Hf=Ea(Uu);un.PostgrestClient=Hf.default;const Gf=Ea(Hl);un.PostgrestQueryBuilder=Gf.default;const Kf=Ea(Ro);un.PostgrestFilterBuilder=Kf.default;const Jf=Ea(Gl);un.PostgrestTransformBuilder=Jf.default;const Yf=Ea(Kl);un.PostgrestBuilder=Yf.default;const Zf=Ea(Jl);un.PostgrestError=Zf.default;var sg=un.default={PostgrestClient:Hf.default,PostgrestQueryBuilder:Gf.default,PostgrestFilterBuilder:Kf.default,PostgrestTransformBuilder:Jf.default,PostgrestBuilder:Yf.default,PostgrestError:Zf.default};const{PostgrestClient:ag,PostgrestQueryBuilder:gw,PostgrestFilterBuilder:mw,PostgrestTransformBuilder:vw,PostgrestBuilder:bw,PostgrestError:yw}=sg;class og{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const r=t.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const lg="2.15.5",cg=`realtime-js/${lg}`,ug="1.0.0",su=1e4,hg=1e3,dg=100;var yo;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(yo||(yo={}));var jr;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(jr||(jr={}));var qn;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(qn||(qn={}));var au;(function(n){n.websocket="websocket"})(au||(au={}));var As;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(As||(As={}));class fg{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const i=t.getUint8(1),s=t.getUint8(2);let a=this.HEADER_LENGTH+2;const c=r.decode(e.slice(a,a+i));a=a+i;const l=r.decode(e.slice(a,a+s));a=a+s;const f=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:c,event:l,payload:f}}}class Xf{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Gt;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Gt||(Gt={}));const kd=(n,e,t={})=>{var r;const i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,a)=>(s[a]=pg(a,n,e,i),s),{})},pg=(n,e,t,r)=>{const i=e.find(c=>c.name===n),s=i==null?void 0:i.type,a=t[n];return s&&!r.includes(s)?Qf(s,a):ou(a)},Qf=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return bg(e,t)}switch(n){case Gt.bool:return gg(e);case Gt.float4:case Gt.float8:case Gt.int2:case Gt.int4:case Gt.int8:case Gt.numeric:case Gt.oid:return mg(e);case Gt.json:case Gt.jsonb:return vg(e);case Gt.timestamp:return yg(e);case Gt.abstime:case Gt.date:case Gt.daterange:case Gt.int4range:case Gt.int8range:case Gt.money:case Gt.reltime:case Gt.text:case Gt.time:case Gt.timestamptz:case Gt.timetz:case Gt.tsrange:case Gt.tstzrange:return ou(e);default:return ou(e)}},ou=n=>n,gg=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},mg=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},vg=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},bg=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let s;const a=n.slice(1,t);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(c=>Qf(e,c))}return n},yg=n=>typeof n=="string"?n.replace(" ","T"):n,ep=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Rc{constructor(e,t,r={},i=su){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Ld;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(Ld||(Ld={}));class wo{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:a,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=wo.syncState(this.state,i,s,a),this.pendingDiffs.forEach(l=>{this.state=wo.syncDiff(this.state,l,s,a)}),this.pendingDiffs=[],c()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:a,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=wo.syncDiff(this.state,i,s,a),c())}),this.onJoin((i,s,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:a})}),this.onLeave((i,s,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){const s=this.cloneDeep(e),a=this.transformState(t),c={},l={};return this.map(s,(f,g)=>{a[f]||(l[f]=g)}),this.map(a,(f,g)=>{const m=s[f];if(m){const y=g.map(j=>j.presence_ref),v=m.map(j=>j.presence_ref),k=g.filter(j=>v.indexOf(j.presence_ref)<0),S=m.filter(j=>y.indexOf(j.presence_ref)<0);k.length>0&&(c[f]=k),S.length>0&&(l[f]=S)}else c[f]=g}),this.syncDiff(s,{joins:c,leaves:l},r,i)}static syncDiff(e,t,r,i){const{joins:s,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(c,l)=>{var f;const g=(f=e[c])!==null&&f!==void 0?f:[];if(e[c]=this.cloneDeep(l),g.length>0){const m=e[c].map(v=>v.presence_ref),y=g.filter(v=>m.indexOf(v.presence_ref)<0);e[c].unshift(...y)}r(c,g,l)}),this.map(a,(c,l)=>{let f=e[c];if(!f)return;const g=l.map(m=>m.presence_ref);f=f.filter(m=>g.indexOf(m.presence_ref)<0),e[c]=f,i(c,f,l),f.length===0&&delete e[c]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const i=e[r];return"metas"in i?t[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Cd;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(Cd||(Cd={}));var xo;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(xo||(xo={}));var bi;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(bi||(bi={}));class $u{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=jr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Rc(this,qn.join,this.params,this.timeout),this.rejoinTimer=new Xf(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=jr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=jr.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=jr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=jr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=jr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(qn.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new wo(this),this.broadcastEndpointURL=ep(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==jr.closed){const{config:{broadcast:a,presence:c,private:l}}=this.params,f=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(v=>v.filter))!==null&&i!==void 0?i:[],g=!!this.bindings[xo.PRESENCE]&&this.bindings[xo.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,m={},y={broadcast:a,presence:Object.assign(Object.assign({},c),{enabled:g}),postgres_changes:f,private:l};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(v=>e==null?void 0:e(bi.CHANNEL_ERROR,v)),this._onClose(()=>e==null?void 0:e(bi.CLOSED)),this.updateJoinPayload(Object.assign({config:y},m)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:v})=>{var k;if(this.socket.setAuth(),v===void 0){e==null||e(bi.SUBSCRIBED);return}else{const S=this.bindings.postgres_changes,j=(k=S==null?void 0:S.length)!==null&&k!==void 0?k:0,w=[];for(let C=0;C<j;C++){const F=S[C],{filter:{event:Z,schema:ae,table:te,filter:G}}=F,M=v&&v[C];if(M&&M.event===Z&&M.schema===ae&&M.table===te&&M.filter===G)w.push(Object.assign(Object.assign({},F),{id:M.id}));else{this.unsubscribe(),this.state=jr.errored,e==null||e(bi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,e&&e(bi.SUBSCRIBED);return}}).receive("error",v=>{this.state=jr.errored,e==null||e(bi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(bi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===jr.joined&&e===xo.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async send(e,t={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:a}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=f.body)===null||i===void 0?void 0:i.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,c,l;const f=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(c=(a=this.params)===null||a===void 0?void 0:a.config)===null||c===void 0?void 0:c.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),f.receive("ok",()=>s("ok")),f.receive("error",()=>s("error")),f.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=jr.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(qn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Rc(this,qn.leave,{},e),r.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=jr.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(s),a}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Rc(this,e,t,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>dg){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,s;const a=e.toLocaleLowerCase(),{close:c,error:l,leave:f,join:g}=qn;if(r&&[c,l,f,g].indexOf(a)>=0&&r!==this._joinRef())return;let y=this._onMessage(a,t,r);if(t&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(v=>{var k,S,j;return((k=v.filter)===null||k===void 0?void 0:k.event)==="*"||((j=(S=v.filter)===null||S===void 0?void 0:S.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===a}).map(v=>v.callback(y,r)):(s=this.bindings[a])===null||s===void 0||s.filter(v=>{var k,S,j,w,C,F;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in v){const Z=v.id,ae=(k=v.filter)===null||k===void 0?void 0:k.event;return Z&&((S=t.ids)===null||S===void 0?void 0:S.includes(Z))&&(ae==="*"||(ae==null?void 0:ae.toLocaleLowerCase())===((j=t.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const Z=(C=(w=v==null?void 0:v.filter)===null||w===void 0?void 0:w.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return Z==="*"||Z===((F=t==null?void 0:t.event)===null||F===void 0?void 0:F.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===a}).map(v=>{if(typeof y=="object"&&"ids"in y){const k=y.data,{schema:S,table:j,commit_timestamp:w,type:C,errors:F}=k;y=Object.assign(Object.assign({},{schema:S,table:j,commit_timestamp:w,eventType:C,new:{},old:{},errors:F}),this._getPayloadRecords(k))}v.callback(y,r)})}_isClosed(){return this.state===jr.closed}_isJoined(){return this.state===jr.joined}_isJoining(){return this.state===jr.joining}_isLeaving(){return this.state===jr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const i=e.toLocaleLowerCase(),s={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&$u.isEqual(i.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(qn.close,{},e)}_onError(e){this._on(qn.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=jr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=kd(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=kd(e.columns,e.old_record)),t}}const Oc=()=>{},vl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},wg=[1e3,2e3,5e3,1e4],xg=1e4,_g=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Sg{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=su,this.transport=null,this.heartbeatIntervalMs=vl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Oc,this.ref=0,this.reconnectTimer=null,this.logger=Oc,this.conn=null,this.sendBuffer=[],this.serializer=new fg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let s;return i?s=i:typeof fetch>"u"?s=(...a)=>Yi(async()=>{const{default:c}=await Promise.resolve().then(()=>Na);return{default:c}},void 0).then(({default:c})=>c(...a)).catch(c=>{throw new Error(`Failed to load @supabase/node-fetch: ${c.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):s=fetch,(...a)=>s(...a)},!(!((r=t==null?void 0:t.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${au.websocket}`,this.httpEndpoint=ep(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=og.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ug}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case yo.connecting:return As.Connecting;case yo.open:return As.Open;case yo.closing:return As.Closing;default:return As.Closed}}isConnected(){return this.connectionState()===As.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new $u(`realtime:${e}`,t,this);return this.channels.push(s),s}}push(e){const{topic:t,event:r,payload:i,ref:s}=e,a=()=>{this.encode(e,c=>{var l;(l=this.conn)===null||l===void 0||l.send(c)})};this.log("push",`${t} ${r} (${s})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(hg,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},vl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:s,ref:a}=t,c=a?`(${a})`:"",l=s.status||"";this.log("receive",`${l} ${r} ${i} ${c}`.trim(),s),this.channels.filter(f=>f._isMember(r)).forEach(f=>f._trigger(i,s,a)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(qn.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([_g],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const i={access_token:t,version:cg};t&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(qn.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Xf(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},vl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,i,s,a,c,l,f,g;if(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:su,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:vl.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(c=e==null?void 0:e.heartbeatCallback)!==null&&c!==void 0?c:Oc,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:m=>wg[m-1]||xg,this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:(m,y)=>y(JSON.stringify(m)),this.decode=(g=e==null?void 0:e.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class qu extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ar(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class jg extends qu{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class lu extends qu{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Ag=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function c(g){try{f(r.next(g))}catch(m){a(m)}}function l(g){try{f(r.throw(g))}catch(m){a(m)}}function f(g){g.done?s(g.value):i(g.value).then(c,l)}f((r=r.apply(n,e||[])).next())})};const tp=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Yi(async()=>{const{default:r}=await Promise.resolve().then(()=>Na);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},kg=()=>Ag(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Yi(()=>Promise.resolve().then(()=>Na),void 0)).Response:Response}),cu=n=>{if(Array.isArray(n))return n.map(t=>cu(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const i=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=cu(r)}),e},Lg=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var Fs=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function c(g){try{f(r.next(g))}catch(m){a(m)}}function l(g){try{f(r.throw(g))}catch(m){a(m)}}function f(g){g.done?s(g.value):i(g.value).then(c,l)}f((r=r.apply(n,e||[])).next())})};const Fc=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Cg=(n,e,t)=>Fs(void 0,void 0,void 0,function*(){const r=yield kg();n instanceof r&&!(t!=null&&t.noResolveJson)?n.json().then(i=>{const s=n.status||500,a=(i==null?void 0:i.statusCode)||s+"";e(new jg(Fc(i),s,a))}).catch(i=>{e(new lu(Fc(i),i))}):e(new lu(Fc(n),n))}),Pg=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!r?i:(Lg(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),t))};function Oo(n,e,t,r,i,s){return Fs(this,void 0,void 0,function*(){return new Promise((a,c)=>{n(t,Pg(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>Cg(l,c,r))})})}function Ul(n,e,t,r){return Fs(this,void 0,void 0,function*(){return Oo(n,"GET",e,t,r)})}function Qn(n,e,t,r,i){return Fs(this,void 0,void 0,function*(){return Oo(n,"POST",e,r,i,t)})}function uu(n,e,t,r,i){return Fs(this,void 0,void 0,function*(){return Oo(n,"PUT",e,r,i,t)})}function Ig(n,e,t,r){return Fs(this,void 0,void 0,function*(){return Oo(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function rp(n,e,t,r,i){return Fs(this,void 0,void 0,function*(){return Oo(n,"DELETE",e,r,i,t)})}var Xr=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function c(g){try{f(r.next(g))}catch(m){a(m)}}function l(g){try{f(r.throw(g))}catch(m){a(m)}}function f(g){g.done?s(g.value):i(g.value).then(c,l)}f((r=r.apply(n,e||[])).next())})};const Ng={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Pd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Eg{constructor(e,t={},r,i){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=tp(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,i){return Xr(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},Pd),i);let c=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",a.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=r,c["cache-control"]=`max-age=${a.cacheControl}`,c["content-type"]=a.contentType,l&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(c=Object.assign(Object.assign({},c),i.headers));const f=this._removeEmptyFolders(t),g=this._getFinalPath(f),m=yield(e=="PUT"?uu:Qn)(this.fetch,`${this.url}/object/${g}`,s,Object.assign({headers:c},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:f,id:m.Id,fullPath:m.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ar(s))return{data:null,error:s};throw s}})}upload(e,t,r){return Xr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return Xr(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),a=this._getFinalPath(s),c=new URL(this.url+`/object/upload/sign/${a}`);c.searchParams.set("token",t);try{let l;const f=Object.assign({upsert:Pd.upsert},i),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",f.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",f.cacheControl)):(l=r,g["cache-control"]=`max-age=${f.cacheControl}`,g["content-type"]=f.contentType);const m=yield uu(this.fetch,c.toString(),l,{headers:g});return{data:{path:s,fullPath:m.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ar(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return Xr(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);t!=null&&t.upsert&&(i["x-upsert"]="true");const s=yield Qn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(this.url+s.url),c=a.searchParams.get("token");if(!c)throw new qu("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:c},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ar(r))return{data:null,error:r};throw r}})}update(e,t,r){return Xr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return Xr(this,void 0,void 0,function*(){try{return{data:yield Qn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ar(i))return{data:null,error:i};throw i}})}copy(e,t,r){return Xr(this,void 0,void 0,function*(){try{return{data:{path:(yield Qn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ar(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,r){return Xr(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield Qn(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ar(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return Xr(this,void 0,void 0,function*(){try{const i=yield Qn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${s}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ar(i))return{data:null,error:i};throw i}})}download(e,t){return Xr(this,void 0,void 0,function*(){const i=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=s?`?${s}`:"";try{const c=this._getFinalPath(e);return{data:yield(yield Ul(this.fetch,`${this.url}/${i}/${c}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ar(c))return{data:null,error:c};throw c}})}info(e){return Xr(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield Ul(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:cu(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ar(r))return{data:null,error:r};throw r}})}exists(e){return Xr(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Ig(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ar(r)&&r instanceof lu){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),i=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&i.push(s);const c=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&i.push(l);let f=i.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${r}${f}`)}}}remove(e){return Xr(this,void 0,void 0,function*(){try{return{data:yield rp(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ar(t))return{data:null,error:t};throw t}})}list(e,t,r){return Xr(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Ng),t),{prefix:e||""});return{data:yield Qn(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ar(i))return{data:null,error:i};throw i}})}listV2(e,t){return Xr(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Qn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ar(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Tg="2.12.1",Rg={"X-Client-Info":`storage-js/${Tg}`};var ha=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function c(g){try{f(r.next(g))}catch(m){a(m)}}function l(g){try{f(r.throw(g))}catch(m){a(m)}}function f(g){g.done?s(g.value):i(g.value).then(c,l)}f((r=r.apply(n,e||[])).next())})};class Og{constructor(e,t={},r,i){this.shouldThrowOnError=!1;const s=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href,this.headers=Object.assign(Object.assign({},Rg),t),this.fetch=tp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return ha(this,void 0,void 0,function*(){try{return{data:yield Ul(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ar(e))return{data:null,error:e};throw e}})}getBucket(e){return ha(this,void 0,void 0,function*(){try{return{data:yield Ul(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ar(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return ha(this,void 0,void 0,function*(){try{return{data:yield Qn(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ar(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return ha(this,void 0,void 0,function*(){try{return{data:yield uu(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ar(r))return{data:null,error:r};throw r}})}emptyBucket(e){return ha(this,void 0,void 0,function*(){try{return{data:yield Qn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ar(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ha(this,void 0,void 0,function*(){try{return{data:yield rp(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ar(t))return{data:null,error:t};throw t}})}}class Fg extends Og{constructor(e,t={},r,i){super(e,t,r,i)}from(e){return new Eg(this.url,this.headers,e,this.fetch)}}const Dg="2.57.4";let mo="";typeof Deno<"u"?mo="deno":typeof document<"u"?mo="web":typeof navigator<"u"&&navigator.product==="ReactNative"?mo="react-native":mo="node";const Mg={"X-Client-Info":`supabase-js-${mo}/${Dg}`},Bg={headers:Mg},Ug={schema:"public"},$g={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},qg={};var zg=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function c(g){try{f(r.next(g))}catch(m){a(m)}}function l(g){try{f(r.throw(g))}catch(m){a(m)}}function f(g){g.done?s(g.value):i(g.value).then(c,l)}f((r=r.apply(n,e||[])).next())})};const Wg=n=>{let e;return n?e=n:typeof fetch>"u"?e=$f:e=fetch,(...t)=>e(...t)},Vg=()=>typeof Headers>"u"?qf:Headers,Hg=(n,e,t)=>{const r=Wg(t),i=Vg();return(s,a)=>zg(void 0,void 0,void 0,function*(){var c;const l=(c=yield e())!==null&&c!==void 0?c:n;let f=new i(a==null?void 0:a.headers);return f.has("apikey")||f.set("apikey",n),f.has("Authorization")||f.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},a),{headers:f}))})};var Gg=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function c(g){try{f(r.next(g))}catch(m){a(m)}}function l(g){try{f(r.throw(g))}catch(m){a(m)}}function f(g){g.done?s(g.value):i(g.value).then(c,l)}f((r=r.apply(n,e||[])).next())})};function Kg(n){return n.endsWith("/")?n:n+"/"}function Jg(n,e){var t,r;const{db:i,auth:s,realtime:a,global:c}=n,{db:l,auth:f,realtime:g,global:m}=e,y={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},f),s),realtime:Object.assign(Object.assign({},g),a),storage:{},global:Object.assign(Object.assign(Object.assign({},m),c),{headers:Object.assign(Object.assign({},(t=m==null?void 0:m.headers)!==null&&t!==void 0?t:{}),(r=c==null?void 0:c.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>Gg(this,void 0,void 0,function*(){return""})};return n.accessToken?y.accessToken=n.accessToken:delete y.accessToken,y}function Yg(n){const e=n==null?void 0:n.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Kg(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const np="2.71.1",ya=30*1e3,hu=3,Dc=hu*ya,Zg="http://localhost:9999",Xg="supabase.auth.token",Qg={"X-Client-Info":`gotrue-js/${np}`},du="X-Supabase-Api-Version",ip={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},e5=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,t5=10*60*1e3;class zu extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function mt(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class r5 extends zu{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function n5(n){return mt(n)&&n.name==="AuthApiError"}class sp extends zu{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class ts extends zu{constructor(e,t,r,i){super(e,r,i),this.name=t,this.status=r}}class zi extends ts{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function i5(n){return mt(n)&&n.name==="AuthSessionMissingError"}class bl extends ts{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class yl extends ts{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class wl extends ts{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function s5(n){return mt(n)&&n.name==="AuthImplicitGrantRedirectError"}class Id extends ts{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class fu extends ts{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Mc(n){return mt(n)&&n.name==="AuthRetryableFetchError"}class Nd extends ts{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class pu extends ts{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const $l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ed=` 	
\r=`.split(""),a5=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<Ed.length;e+=1)n[Ed[e].charCodeAt(0)]=-2;for(let e=0;e<$l.length;e+=1)n[$l[e].charCodeAt(0)]=e;return n})();function Td(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t($l[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t($l[r]),e.queuedBits-=6}}function ap(n,e,t){const r=a5[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Rd(n){const e=[],t=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=a=>{c5(a,r,t)};for(let a=0;a<n.length;a+=1)ap(n.charCodeAt(a),i,s);return e.join("")}function o5(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function l5(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}o5(r,e)}}function c5(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if(!(n>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function u5(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<n.length;i+=1)ap(n.charCodeAt(i),t,r);return new Uint8Array(e)}function h5(n){const e=[];return l5(n,t=>e.push(t)),new Uint8Array(e)}function d5(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};return n.forEach(i=>Td(i,t,r)),Td(null,t,r),e.join("")}function f5(n){return Math.round(Date.now()/1e3)+n}function p5(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const Un=()=>typeof window<"u"&&typeof document<"u",ys={tested:!1,writable:!1},op=()=>{if(!Un())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ys.tested)return ys.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),ys.tested=!0,ys.writable=!0}catch{ys.tested=!0,ys.writable=!1}return ys.writable};function g5(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return t.searchParams.forEach((r,i)=>{e[i]=r}),e}const lp=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Yi(async()=>{const{default:r}=await Promise.resolve().then(()=>Na);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},m5=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",wa=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},ws=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Ui=async(n,e)=>{await n.removeItem(e)};class Yl{constructor(){this.promise=new Yl.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Yl.promiseConstructor=Promise;function Bc(n){const e=n.split(".");if(e.length!==3)throw new pu("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!e5.test(e[r]))throw new pu("JWT not in base64url format");return{header:JSON.parse(Rd(e[0])),payload:JSON.parse(Rd(e[1])),signature:u5(e[2]),raw:{header:e[0],payload:e[1]}}}async function v5(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function b5(n,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await n(s);if(!e(s,null,a)){r(a);return}}catch(a){if(!e(s,a)){i(a);return}}})()})}function y5(n){return("0"+n.toString(16)).substr(-2)}function w5(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let i="";for(let s=0;s<56;s++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,y5).join("")}async function x5(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function _5(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await x5(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function da(n,e,t=!1){const r=w5();let i=r;t&&(i+="/PASSWORD_RECOVERY"),await wa(n,`${e}-code-verifier`,i);const s=await _5(r);return[s,r===s?"plain":"s256"]}const S5=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function j5(n){const e=n.headers.get(du);if(!e||!e.match(S5))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function A5(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function k5(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const L5=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function fa(n){if(!L5.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Uc(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Od(n){return JSON.parse(JSON.stringify(n))}var C5=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const _s=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),P5=[502,503,504];async function Fd(n){var e;if(!m5(n))throw new fu(_s(n),0);if(P5.includes(n.status))throw new fu(_s(n),n.status);let t;try{t=await n.json()}catch(s){throw new sp(_s(s),s)}let r;const i=j5(n);if(i&&i.getTime()>=ip["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new Nd(_s(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new zi}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0))throw new Nd(_s(t),n.status,t.weak_password.reasons);throw new r5(_s(t),n.status||500,r)}const I5=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};async function wt(n,e,t,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[du]||(s[du]=ip["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const a=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const c=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await N5(n,e,t+c,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function N5(n,e,t,r,i,s){const a=I5(e,r,i,s);let c;try{c=await n(t,Object.assign({},a))}catch(l){throw console.error(l),new fu(_s(l),0)}if(c.ok||await Fd(c),r!=null&&r.noResolveJson)return c;try{return await c.json()}catch(l){await Fd(l)}}function vi(n){var e;let t=null;O5(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=f5(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function Dd(n){const e=vi(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function Wi(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function E5(n){return{data:n,error:null}}function T5(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s}=n,a=C5(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},a);return{data:{properties:c,user:l},error:null}}function R5(n){return n}function O5(n){return n.access_token&&n.refresh_token&&n.expires_in}const $c=["global","local","others"];var F5=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class D5{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=lp(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=$c[0]){if($c.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${$c.join(", ")}`);try{return await wt(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(mt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await wt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Wi})}catch(r){if(mt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=F5(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await wt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:T5,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(mt(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await wt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Wi})}catch(t){if(mt(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,i,s,a,c,l;try{const f={nextPage:null,lastPage:0,total:0},g=await wt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:R5});if(g.error)throw g.error;const m=await g.json(),y=(a=g.headers.get("x-total-count"))!==null&&a!==void 0?a:0,v=(l=(c=g.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&l!==void 0?l:[];return v.length>0&&(v.forEach(k=>{const S=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(k.split(";")[1].split("=")[1]);f[`${j}Page`]=S}),f.total=parseInt(y)),{data:Object.assign(Object.assign({},m),f),error:null}}catch(f){if(mt(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){fa(e);try{return await wt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Wi})}catch(t){if(mt(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){fa(e);try{return await wt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Wi})}catch(r){if(mt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){fa(e);try{return await wt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Wi})}catch(r){if(mt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){fa(e.userId);try{const{data:t,error:r}=await wt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(mt(t))return{data:null,error:t};throw t}}async _deleteFactor(e){fa(e.userId),fa(e.id);try{return{data:await wt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(mt(t))return{data:null,error:t};throw t}}}function Md(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function M5(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const pa={debug:!!(globalThis&&op()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class cp extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class B5 extends cp{}async function U5(n,e,t){pa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),pa.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){pa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return await t()}finally{pa.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(e===0)throw pa.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new B5(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(pa.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}M5();const $5={url:Zg,storageKey:Xg,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Qg,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Bd(n,e,t){return await t()}const ga={};class Co{constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Co.nextInstanceID,Co.nextInstanceID+=1,this.instanceID>0&&Un()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},$5),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new D5({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=lp(i.fetch),this.lock=i.lock||Bd,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Un()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=U5:this.lock=Bd,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:op()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Md(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Md(this.memoryStorage)),Un()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=ga[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){ga[this.storageKey]=Object.assign(Object.assign({},ga[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=ga[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ga[this.storageKey]=Object.assign(Object.assign({},ga[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${np}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=g5(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),Un()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(t,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),s5(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:a,redirectType:c}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",c),await this._saveSession(a),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return mt(t)?{error:t}:{error:new sp("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,i;try{const s=await wt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:vi}),{data:a,error:c}=s;if(c||!a)return{data:{user:null,session:null},error:c};const l=a.session,f=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:f,session:l},error:null}}catch(s){if(mt(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var t,r,i;try{let s;if("email"in e){const{email:g,password:m,options:y}=e;let v=null,k=null;this.flowType==="pkce"&&([v,k]=await da(this.storage,this.storageKey)),s=await wt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:g,password:m,data:(t=y==null?void 0:y.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:v,code_challenge_method:k},xform:vi})}else if("phone"in e){const{phone:g,password:m,options:y}=e;s=await wt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:m,data:(r=y==null?void 0:y.data)!==null&&r!==void 0?r:{},channel:(i=y==null?void 0:y.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:vi})}else throw new yl("You must provide either an email or phone number and a password");const{data:a,error:c}=s;if(c||!a)return{data:{user:null,session:null},error:c};const l=a.session,f=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:f,session:l},error:null}}catch(s){if(mt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:a,options:c}=e;t=await wt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Dd})}else if("phone"in e){const{phone:s,password:a,options:c}=e;t=await wt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Dd})}else throw new yl("You must provide either an email or phone number and a password");const{data:r,error:i}=t;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new bl}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(t){if(mt(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,r,i,s,a,c,l,f,g,m,y,v;let k,S;if("message"in e)k=e.message,S=e.signature;else{const{chain:j,wallet:w,statement:C,options:F}=e;let Z;if(Un())if(typeof w=="object")Z=w;else{const te=window;if("solana"in te&&typeof te.solana=="object"&&("signIn"in te.solana&&typeof te.solana.signIn=="function"||"signMessage"in te.solana&&typeof te.solana.signMessage=="function"))Z=te.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(F!=null&&F.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Z=w}const ae=new URL((t=F==null?void 0:F.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in Z&&Z.signIn){const te=await Z.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},F==null?void 0:F.signInWithSolana),{version:"1",domain:ae.host,uri:ae.href}),C?{statement:C}:null));let G;if(Array.isArray(te)&&te[0]&&typeof te[0]=="object")G=te[0];else if(te&&typeof te=="object"&&"signedMessage"in te&&"signature"in te)G=te;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in G&&"signature"in G&&(typeof G.signedMessage=="string"||G.signedMessage instanceof Uint8Array)&&G.signature instanceof Uint8Array)k=typeof G.signedMessage=="string"?G.signedMessage:new TextDecoder().decode(G.signedMessage),S=G.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in Z)||typeof Z.signMessage!="function"||!("publicKey"in Z)||typeof Z!="object"||!Z.publicKey||!("toBase58"in Z.publicKey)||typeof Z.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=[`${ae.host} wants you to sign in with your Solana account:`,Z.publicKey.toBase58(),...C?["",C,""]:[""],"Version: 1",`URI: ${ae.href}`,`Issued At: ${(i=(r=F==null?void 0:F.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=F==null?void 0:F.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${F.signInWithSolana.notBefore}`]:[],...!((a=F==null?void 0:F.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${F.signInWithSolana.expirationTime}`]:[],...!((c=F==null?void 0:F.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${F.signInWithSolana.chainId}`]:[],...!((l=F==null?void 0:F.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${F.signInWithSolana.nonce}`]:[],...!((f=F==null?void 0:F.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${F.signInWithSolana.requestId}`]:[],...!((m=(g=F==null?void 0:F.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||m===void 0)&&m.length?["Resources",...F.signInWithSolana.resources.map(G=>`- ${G}`)]:[]].join(`
`);const te=await Z.signMessage(new TextEncoder().encode(k),"utf8");if(!te||!(te instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=te}}try{const{data:j,error:w}=await wt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:d5(S)},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:vi});if(w)throw w;return!j||!j.session||!j.user?{data:{user:null,session:null},error:new bl}:(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),{data:Object.assign({},j),error:w})}catch(j){if(mt(j))return{data:{user:null,session:null},error:j};throw j}}async _exchangeCodeForSession(e){const t=await ws(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(t??"").split("/");try{const{data:s,error:a}=await wt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:vi});if(await Ui(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new bl}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:a})}catch(s){if(mt(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:t,provider:r,token:i,access_token:s,nonce:a}=e,c=await wt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:vi}),{data:l,error:f}=c;return f?{data:{user:null,session:null},error:f}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new bl}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:f})}catch(t){if(mt(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,i,s,a;try{if("email"in e){const{email:c,options:l}=e;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await da(this.storage,this.storageKey));const{error:m}=await wt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:f,code_challenge_method:g},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in e){const{phone:c,options:l}=e,{data:f,error:g}=await wt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:g}}throw new yl("You must provide either an email or phone number.")}catch(c){if(mt(c))return{data:{user:null,session:null},error:c};throw c}}async verifyOtp(e){var t,r;try{let i,s;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:c}=await wt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:vi});if(c)throw c;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,f=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:f,session:l},error:null}}catch(i){if(mt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,r,i;try{let s=null,a=null;return this.flowType==="pkce"&&([s,a]=await da(this.storage,this.storageKey)),await wt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:E5})}catch(s){if(mt(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new zi;const{error:i}=await wt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(mt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:a}=await wt(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:a,error:c}=await wt(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:c}}throw new yl("You must provide either an email or phone number and a type")}catch(t){if(mt(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await ws(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Dc:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const a=await ws(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=Uc()}if(this.storage.isServer&&e.user){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,f,g)=>(!a&&f==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,f,g))})}return{data:{session:e},error:null}}const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await wt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Wi}):await this._useSession(async t=>{var r,i,s;const{data:a,error:c}=t;if(c)throw c;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new zi}:await wt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Wi})})}catch(t){if(mt(t))return i5(t)&&(await this._removeSession(),await Ui(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new zi;const a=i.session;let c=null,l=null;this.flowType==="pkce"&&e.email!=null&&([c,l]=await da(this.storage,this.storageKey));const{data:f,error:g}=await wt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:l}),jwt:a.access_token,xform:Wi});if(g)throw g;return a.user=f.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(mt(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new zi;const t=Date.now()/1e3;let r=t,i=!0,s=null;const{payload:a}=Bc(e.access_token);if(a.exp&&(r=a.exp,i=r<=t),i){const{session:c,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!c)return{data:{user:null,session:null},error:null};s=c}else{const{data:c,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(mt(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:a,error:c}=t;if(c)throw c;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new zi;const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(mt(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Un())throw new wl("No browser detected.");if(e.error||e.error_description||e.error_code)throw new wl(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Id("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new wl("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Id("No code detected.");const{data:C,error:F}=await this._exchangeCodeForSession(e.code);if(F)throw F;const Z=new URL(window.location.href);return Z.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Z.toString()),{data:{session:C.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:a,expires_in:c,expires_at:l,token_type:f}=e;if(!s||!c||!a||!f)throw new wl("No session defined in URL");const g=Math.round(Date.now()/1e3),m=parseInt(c);let y=g+m;l&&(y=parseInt(l));const v=y-g;v*1e3<=ya&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${m}s`);const k=y-m;g-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,y,g):g-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,y,g);const{data:S,error:j}=await this._getUser(s);if(j)throw j;const w={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:m,expires_at:y,refresh_token:a,token_type:f,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:e.type},error:null}}catch(r){if(mt(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await ws(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{error:s};const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:c}=await this.admin.signOut(a,e);if(c&&!(n5(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return e!=="others"&&(await this._removeSession(),await Ui(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=p5(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,i;try{const{data:{session:s},error:a}=t;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await da(this.storage,this.storageKey,!0));try{return await wt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(mt(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(mt(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:i}=await this._useSession(async s=>{var a,c,l,f,g;const{data:m,error:y}=s;if(y)throw y;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await wt(this.fetch,"GET",v,{headers:this.headers,jwt:(g=(f=m.session)===null||f===void 0?void 0:f.access_token)!==null&&g!==void 0?g:void 0})});if(i)throw i;return Un()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(mt(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,i;const{data:s,error:a}=t;if(a)throw a;return await wt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(mt(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await b5(async i=>(i>0&&await v5(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await wt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:vi})),(i,s)=>{const a=200*Math.pow(2,i);return s&&Mc(s)&&Date.now()+a-r<ya})}catch(r){if(this._debug(t,"error",r),mt(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),Un()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await ws(this.storage,this.storageKey);if(i&&this.userStorage){let a=await ws(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await wa(this.userStorage,this.storageKey+"-user",a)),i.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:Uc()}else if(i&&!i.user&&!i.user){const a=await ws(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(i.user=a.user,await Ui(this.storage,this.storageKey+"-user"),await wa(this.storage,this.storageKey,i)):i.user=Uc()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((t=i.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Dc;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${Dc}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),Mc(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:c}=await this._getUser(i.access_token);!c&&(a!=null&&a.user)?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new zi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Yl;const{data:s,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!s.session)throw new zi;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const c={session:s.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(s){if(this._debug(i,"error",s),mt(s)){const a={session:null,error:s};return Mc(s)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,t)}catch(l){s.push(l)}});if(await Promise.all(a),s.length>0){for(let c=0;c<s.length;c+=1)console.error(s[c]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await wa(this.userStorage,this.storageKey+"-user",{user:t.user});const i=Object.assign({},t);delete i.user;const s=Od(i);await wa(this.storage,this.storageKey,s)}else{const i=Od(t);await wa(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Ui(this.storage,this.storageKey),await Ui(this.storage,this.storageKey+"-code-verifier"),await Ui(this.storage,this.storageKey+"-user"),this.userStorage&&await Ui(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Un()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ya);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/ya);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${ya}ms, refresh threshold is ${hu} ticks`),i<=hu&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof cp)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Un()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const i=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,a]=await da(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(c.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;return s?{data:null,error:s}:await wt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(mt(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,i;const{data:s,error:a}=t;if(a)return{data:null,error:a};const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:f}=await wt(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return f?{data:null,error:f}:(e.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(mt(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{data:null,error:s};const{data:a,error:c}=await wt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:c})})}catch(t){if(mt(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;return s?{data:null,error:s}:await wt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(mt(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],i=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),s=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Bc(i.access_token);let c=null;a.aal&&(c=a.aal);let l=c;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(m=>m.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const g=a.amr||[];return{data:{currentLevel:c,nextLevel:l,currentAuthenticationMethods:g},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(c=>c.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(c=>c.kid===e),r&&this.jwks_cached_at+t5>i)return r;const{data:s,error:a}=await wt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(c=>c.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:v,error:k}=await this.getSession();if(k||!v.session)return{data:null,error:k};r=v.session.access_token}const{header:i,payload:s,signature:a,raw:{header:c,payload:l}}=Bc(r);t!=null&&t.allowExpired||A5(s.exp);const f=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!f){const{error:v}=await this.getUser(r);if(v)throw v;return{data:{claims:s,header:i,signature:a},error:null}}const g=k5(i.alg),m=await crypto.subtle.importKey("jwk",f,g,!0,["verify"]);if(!await crypto.subtle.verify(g,m,a,h5(`${c}.${l}`)))throw new pu("Invalid JWT signature");return{data:{claims:s,header:i,signature:a},error:null}}catch(r){if(mt(r))return{data:null,error:r};throw r}}}Co.nextInstanceID=0;const q5=Co;class z5 extends q5{constructor(e){super(e)}}var W5=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function c(g){try{f(r.next(g))}catch(m){a(m)}}function l(g){try{f(r.throw(g))}catch(m){a(m)}}function f(g){g.done?s(g.value):i(g.value).then(c,l)}f((r=r.apply(n,e||[])).next())})};class V5{constructor(e,t,r){var i,s,a;this.supabaseUrl=e,this.supabaseKey=t;const c=Yg(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const l=`sb-${c.hostname.split(".")[0]}-auth-token`,f={db:Ug,realtime:qg,auth:Object.assign(Object.assign({},$g),{storageKey:l}),global:Bg},g=Jg(r??{},f);this.storageKey=(i=g.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=g.global.headers)!==null&&s!==void 0?s:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(m,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=g.auth)!==null&&a!==void 0?a:{},this.headers,g.global.fetch),this.fetch=Hg(t,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.rest=new ag(new URL("rest/v1",c).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new Fg(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new M2(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return W5(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:s,storageKey:a,flowType:c,lock:l,debug:f},g,m){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new z5({url:this.authUrl.href,headers:Object.assign(Object.assign({},y),g),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:s,flowType:c,lock:l,debug:f,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Sg(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const H5=(n,e,t)=>new V5(n,e,t);function G5(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}G5()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");class ar{static isConfigured(){return!0}static getClient(){if(!this.client){const e="https://huavyvgqnqzvcrotjtdu.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh1YXZ5dmdxbnF6dmNyb3RqdGR1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk3MTgxOTUsImV4cCI6MjA3NTI5NDE5NX0.EVCYMTkiXzbSf13_mCtL4E8p1Pyj54w3C8tnQM7e_ko";this.client=H5(e,t,{auth:{persistSession:!1}})}return this.client}static async listVideos(){const{data:e,error:t}=await this.getClient().from("videos").select("*").eq("is_active",!0).order("created_at",{ascending:!1});if(t)throw t;return e||[]}static async listVideoSources(e){const{data:t,error:r}=await this.getClient().from("video_sources").select("id,video_id,source_file_id,thumbnail_file_id,position").eq("video_id",e).order("position",{ascending:!0});if(r)throw r;return t||[]}static async addVideoSource(e,t,r,i=1){const{data:s,error:a}=await this.getClient().from("video_sources").insert({video_id:e,source_file_id:t,thumbnail_file_id:r||null,position:i}).select("*").single();if(a)throw a;return s}static async updateVideoSource(e,t){const{data:r,error:i}=await this.getClient().from("video_sources").update(t).eq("id",e).select("*").single();if(i)throw i;return r}static async deleteVideoSource(e){const{error:t}=await this.getClient().from("video_sources").delete().eq("id",e);if(t)throw t;return!0}static async getVideo(e){const{data:t,error:r}=await this.getClient().from("videos").select("*").eq("id",e).maybeSingle();if(r)throw r;return t??null}static async incrementViews(e){var r;const{error:t}=await this.getClient().rpc("increment",{table_name:"videos",row_id:e,column_name:"views"});t&&await this.getClient().from("videos").update({views:((r=await this.getVideo(e))==null?void 0:r.views)+1}).eq("id",e)}static async createVideo(e){const{data:t,error:r}=await this.getClient().from("videos").insert(e).select("*").single();if(r)throw r;return t}static async updateVideo(e,t){const{data:r,error:i}=await this.getClient().from("videos").update(t).eq("id",e).select("*").single();if(i)throw i;return r}static async deleteVideo(e){const{error:t}=await this.getClient().from("videos").delete().eq("id",e);if(t)throw t;return!0}static async getRelatedVideoIds(e){const{data:t,error:r}=await this.getClient().from("video_relations").select("related_video_id").eq("video_id",e);if(r)throw r;return(t||[]).map(i=>i.related_video_id)}static async setRelatedVideos(e,t){const r=this.getClient(),{error:i}=await r.from("video_relations").delete().eq("video_id",e);if(i)throw i;if(t.length===0)return;const s=t.map(c=>({video_id:e,related_video_id:c})),{error:a}=await r.from("video_relations").insert(s);if(a)throw a}static async getSiteConfig(){const{data:e,error:t}=await this.getClient().from("site_config").select("*").limit(1).maybeSingle();if(t)throw t;return e??null}static async updateSiteConfig(e){const t=this.getClient(),r=await this.getSiteConfig();if(r){const{error:i}=await t.from("site_config").update({...e,updated_at:new Date().toISOString()}).eq("id",r.id);if(i)throw i}else{const{error:i}=await t.from("site_config").insert({...e,updated_at:new Date().toISOString()});if(i)throw i}}static async listUsers(){const{data:e,error:t}=await this.getClient().from("users").select("id,email,name,role,created_at").order("created_at",{ascending:!1});if(t)throw t;return e||[]}static async createUser(e){const{error:t}=await this.getClient().from("users").insert({...e,role:e.role||"admin"});if(t)throw t}static async updateUser(e,t){const{error:r}=await this.getClient().from("users").update(t).eq("id",e);if(r)throw r}static async deleteUser(e){const{error:t}=await this.getClient().from("users").delete().eq("id",e);if(t)throw t}}Br(ar,"client",null);const up=R.createContext({siteName:"VideosPlus",paypalClientId:"",paypalMeUsername:"",stripePublishableKey:"",stripeSecretKey:"",telegramUsername:"",videoListTitle:"Available Videos",cryptoWallets:[],emailHost:"smtp.gmail.com",emailPort:"587",emailSecure:!1,emailUser:"",emailPass:"",emailFrom:"",wasabiConfig:{accessKey:"",secretKey:"",region:"",bucket:"",endpoint:""},siteConfig:null,loading:!1,error:null,refreshConfig:async()=>{},updateConfig:async()=>{}}),K5=({children:n})=>{const[e,t]=R.useState(null),[r,i]=R.useState(!0),[s,a]=R.useState(null),c=m=>({$id:"site-config",site_name:m.siteName,paypal_client_id:m.paypalClientId,paypal_me_username:m.paypalMeUsername,stripe_publishable_key:m.stripePublishableKey,stripe_secret_key:m.stripeSecretKey,telegram_username:m.telegramUsername,video_list_title:m.videoListTitle,crypto:m.crypto,email_host:m.emailHost,email_port:m.emailPort,email_secure:m.emailSecure,email_user:m.emailUser,email_pass:m.emailPass,email_from:m.emailFrom,wasabi_config:m.wasabiConfig}),l=async()=>{var m,y,v,k,S,j;try{i(!0),a(null);let w=null;if(ar.isConfigured())try{const C=await ar.getSiteConfig();C&&(w={siteName:C.site_name||"VideosPlus",paypalClientId:C.paypal_client_id||"",paypalMeUsername:C.paypal_me_username||"",stripePublishableKey:C.stripe_publishable_key||"",stripeSecretKey:C.stripe_secret_key||"",telegramUsername:C.telegram_username||"",videoListTitle:C.video_list_title||"Available Videos",crypto:C.crypto||[],emailHost:((m=C.email)==null?void 0:m.host)||"smtp.gmail.com",emailPort:((y=C.email)==null?void 0:y.port)||"587",emailSecure:((v=C.email)==null?void 0:v.secure)||!1,emailUser:((k=C.email)==null?void 0:k.user)||"",emailPass:((S=C.email)==null?void 0:S.pass)||"",emailFrom:((j=C.email)==null?void 0:j.from)||"",wasabiConfig:C.wasabi_config||{accessKey:"",secretKey:"",region:"",bucket:"",endpoint:""}})}catch(C){console.warn("Failed to load config from Supabase, falling back",C)}if(w){const C=c(w);t(C)}else t({$id:"site-config",site_name:"VideosPlus",paypal_client_id:"",paypal_me_username:"",stripe_publishable_key:"",stripe_secret_key:"",telegram_username:"",video_list_title:"Available Videos",crypto:[],email_host:"smtp.gmail.com",email_port:"587",email_secure:!1,email_user:"",email_pass:"",email_from:"",wasabi_config:{accessKey:"",secretKey:"",region:"",bucket:"",endpoint:""}})}catch(w){console.error("Error fetching site config:",w),a("Failed to load site configuration")}finally{i(!1)}},f=async m=>{try{if(i(!0),a(null),ar.isConfigured()){const y={site_name:m.siteName,paypal_client_id:m.paypalClientId,paypal_me_username:m.paypalMeUsername,stripe_publishable_key:m.stripePublishableKey,stripe_secret_key:m.stripeSecretKey,telegram_username:m.telegramUsername,video_list_title:m.videoListTitle,crypto:m.crypto,email:{host:m.emailHost,port:m.emailPort,secure:m.emailSecure,user:m.emailUser,pass:m.emailPass,from:m.emailFrom},wasabi_config:m.wasabiConfig};await ar.updateSiteConfig(y),await l()}else{const v={...await _d.getSiteConfig(),...m};await _d.updateSiteConfig(v);const k=c(v);t(k)}}catch(y){throw console.error("Error updating site config:",y),a("Failed to update site configuration"),y}finally{i(!1)}};R.useEffect(()=>{l()},[]);const g={siteName:(e==null?void 0:e.site_name)||"VideosPlus",paypalClientId:(e==null?void 0:e.paypal_client_id)||"",paypalMeUsername:(e==null?void 0:e.paypal_me_username)||"",stripePublishableKey:(e==null?void 0:e.stripe_publishable_key)||"",stripeSecretKey:(e==null?void 0:e.stripe_secret_key)||"",telegramUsername:(e==null?void 0:e.telegram_username)||"",videoListTitle:(e==null?void 0:e.video_list_title)||"Available Videos",cryptoWallets:(e==null?void 0:e.crypto)||[],emailHost:(e==null?void 0:e.email_host)||"smtp.gmail.com",emailPort:(e==null?void 0:e.email_port)||"587",emailSecure:(e==null?void 0:e.email_secure)||!1,emailUser:(e==null?void 0:e.email_user)||"",emailPass:(e==null?void 0:e.email_pass)||"",emailFrom:(e==null?void 0:e.email_from)||"",wasabiConfig:(e==null?void 0:e.wasabi_config)||{accessKey:"",secretKey:"",region:"",bucket:"",endpoint:""},siteConfig:e,loading:r,error:s,refreshConfig:l,updateConfig:f};return u.jsx(up.Provider,{value:g,children:n})},ni=()=>R.useContext(up);var Wu={},qc={};const J5=Lf(Q1);var Ud;function Pt(){return Ud||(Ud=1,function(n){"use client";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return e.createSvgIcon}});var e=J5}(qc)),qc}var Y5=Ct;Object.defineProperty(Wu,"__esModule",{value:!0});var Pa=Wu.default=void 0,Z5=Y5(Pt()),X5=u;Pa=Wu.default=(0,Z5.default)((0,X5.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search");var Vu={},Q5=Ct;Object.defineProperty(Vu,"__esModule",{value:!0});var hp=Vu.default=void 0,em=Q5(Pt()),tm=u;hp=Vu.default=(0,em.default)((0,tm.jsx)("path",{d:"M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zM12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6c3.31 0 6 2.69 6 6s-2.69 6-6 6"}),"Brightness4");var Hu={},rm=Ct;Object.defineProperty(Hu,"__esModule",{value:!0});var dp=Hu.default=void 0,nm=rm(Pt()),im=u;dp=Hu.default=(0,nm.default)((0,im.jsx)("path",{d:"M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zM12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6m0-10c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4"}),"Brightness7");var Gu={},sm=Ct;Object.defineProperty(Gu,"__esModule",{value:!0});var fp=Gu.default=void 0,am=sm(Pt()),om=u;fp=Gu.default=(0,am.default)((0,om.jsx)("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4z"}),"Logout");var Ku={},lm=Ct;Object.defineProperty(Ku,"__esModule",{value:!0});var pp=Ku.default=void 0,cm=lm(Pt()),um=u;pp=Ku.default=(0,cm.default)((0,um.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person");const hm=()=>{const{mode:n,toggleTheme:e}=R.useContext(Bf),{user:t,logout:r,isAuthenticated:i}=es(),{siteName:s}=ni(),a=En(),c=Eo(),l=yf(c.breakpoints.down("md")),[f,g]=R.useState(""),m=async()=>{try{await r()}catch(S){console.error("Error during logout:",S),localStorage.removeItem("sessionToken"),window.location.reload()}},y=S=>{S.preventDefault(),f.trim()&&a(`/videos?search=${encodeURIComponent(f.trim())}`)},v=S=>{g(S.target.value)},k=i&&t;return u.jsx(e0,{position:"sticky",sx:{bgcolor:n==="dark"?"#0A0A0A":"#121212",color:"#fff",boxShadow:"0 4px 12px rgba(0,0,0,0.5)"},children:u.jsxs(t0,{children:[u.jsxs(ee,{component:Ls,to:"/",sx:{flexGrow:1,textDecoration:"none",color:"inherit",display:"flex",alignItems:"center"},children:[u.jsx(ee,{sx:{display:"flex",alignItems:"center",background:"linear-gradient(to right, #8e24aa 0%, #6a1b9a 100%)",borderRadius:"8px",px:1.5,py:.5,mr:1,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)"},children:u.jsxs(ge,{variant:"h6",sx:{fontWeight:700,letterSpacing:"0.5px",fontFamily:"'Montserrat', sans-serif",fontSize:{xs:"0.9rem",sm:"1.1rem"},color:"white"},children:[s.split(" ")[0],u.jsx(ee,{component:"span",sx:{color:"white",fontWeight:400,ml:.5},children:s.split(" ").slice(1).join(" ")})]})}),u.jsx(or,{label:"18+",size:"small",sx:{ml:1,bgcolor:"#8e24aa",color:"white",fontWeight:"bold",height:"22px",fontSize:"0.7rem"}})]}),!l&&u.jsx(ee,{component:"form",onSubmit:y,sx:{display:"flex",alignItems:"center",mx:1,minWidth:"200px",maxWidth:"250px"},children:u.jsx(Lt,{placeholder:"Search...",size:"small",value:f,onChange:v,sx:{flexGrow:1,"& .MuiOutlinedInput-root":{backgroundColor:"rgba(255, 255, 255, 0.08)",color:"#fff",height:"36px",fontSize:"0.85rem","& fieldset":{borderColor:"rgba(255, 255, 255, 0.2)",borderWidth:"1px"},"&:hover fieldset":{borderColor:"rgba(142, 36, 170, 0.4)"},"&.Mui-focused fieldset":{borderColor:"#8e24aa",borderWidth:"1px"}},"& .MuiInputBase-input":{padding:"8px 12px","&::placeholder":{color:"rgba(255, 255, 255, 0.6)",opacity:1,fontSize:"0.85rem"}}},InputProps:{startAdornment:u.jsx(Cu,{position:"start",sx:{ml:1},children:u.jsx(Pa,{sx:{color:"rgba(255, 255, 255, 0.6)",fontSize:"18px"}})})}})}),u.jsxs(ee,{sx:{display:"flex",alignItems:"center"},children:[u.jsx(He,{color:"inherit",component:Ls,to:"/",sx:{mr:1,color:"#fff",fontWeight:600,"&:hover":{bgcolor:"rgba(255, 15, 80, 0.1)"}},children:"Home"}),u.jsx(He,{color:"inherit",component:Ls,to:"/videos",sx:{mr:1,color:"#fff",fontWeight:600,"&:hover":{bgcolor:"rgba(255, 15, 80, 0.1)"}},children:"Videos"}),l&&u.jsx(hn,{color:"inherit",onClick:()=>a("/videos"),sx:{mr:1,color:"#fff","&:hover":{bgcolor:"rgba(255, 15, 80, 0.1)"}},"aria-label":"search",children:u.jsx(Pa,{})}),k&&u.jsxs(u.Fragment,{children:[u.jsx(He,{color:"inherit",component:Ls,to:"/admin",startIcon:u.jsx(pp,{}),sx:{mr:1,color:"#fff",fontWeight:600,"&:hover":{bgcolor:"rgba(255, 15, 80, 0.1)"}},children:"Admin"}),u.jsx(hn,{color:"inherit",onClick:m,sx:{color:"#fff","&:hover":{bgcolor:"rgba(255, 15, 80, 0.1)"}},"aria-label":"logout",children:u.jsx(fp,{})})]}),u.jsx(hn,{color:"inherit",onClick:e,sx:{ml:1,color:"#8e24aa","&:hover":{bgcolor:"rgba(142, 36, 170, 0.1)"}},"aria-label":"toggle theme",children:n==="dark"?u.jsx(dp,{}):u.jsx(hp,{})})]})]})})};var Ju={},dm=Ct;Object.defineProperty(Ju,"__esModule",{value:!0});var Zl=Ju.default=void 0,fm=dm(Pt()),pm=u;Zl=Ju.default=(0,fm.default)((0,pm.jsx)("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}),"Warning");var Yu={},gm=Ct;Object.defineProperty(Yu,"__esModule",{value:!0});var gp=Yu.default=void 0,mm=gm(Pt()),vm=u;gp=Yu.default=(0,mm.default)((0,vm.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1z"}),"Lock");var Zu={},bm=Ct;Object.defineProperty(Zu,"__esModule",{value:!0});var Po=Zu.default=void 0,ym=bm(Pt()),wm=u;Po=Zu.default=(0,ym.default)((0,wm.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings");const xm=()=>{const n=new Date().getFullYear(),e=Eo(),{siteName:t}=ni(),r=En(),[i,s]=R.useState(!1),[a,c]=R.useState({projectId:"",apiKey:""}),l=()=>{r("/login")};R.useEffect(()=>{const g=m=>{m.ctrlKey&&m.altKey&&m.key==="s"&&(s(!0),setTimeout(()=>s(!1),1e4))};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[]),R.useEffect(()=>{c({projectId:"",apiKey:""})},[]);const f=()=>{const g=prompt("Digite o Access Key do Wasabi:"),m=prompt("Digite a Secret Key do Wasabi:");g&&m&&(localStorage.setItem("wasabi-config",JSON.stringify({projectId:g,apiKey:m})),c({projectId:g,apiKey:m}),alert("Credenciais salvas com sucesso!"))};return u.jsxs(ee,{component:"footer",sx:{py:5,bgcolor:e.palette.mode==="dark"?"#0A0A0A":"#121212",borderTop:`1px solid ${e.palette.mode==="dark"?"rgba(255,15,80,0.2)":"rgba(255,15,80,0.3)"}`,color:"#fff",mt:6},children:[u.jsxs(ee,{sx:{backgroundColor:"rgba(255, 15, 80, 0.1)",p:2,mb:4,borderRadius:1,display:"flex",alignItems:"center",maxWidth:1200,mx:"auto"},children:[u.jsx(Zl,{sx:{color:"#8e24aa",mr:2}}),u.jsxs(ge,{variant:"body2",sx:{color:"white"},children:[u.jsx("strong",{children:"AGE VERIFICATION NOTICE:"})," This website contains adult content and is intended for adults aged 18 years or older. By entering this site, you confirm that you are at least 18 years old and agree to our terms and conditions."]})]}),u.jsxs(wi,{children:[u.jsxs(Ze,{container:!0,spacing:4,children:[u.jsx(Ze,{item:!0,xs:12,md:4,children:u.jsxs(ee,{sx:{mb:3},children:[u.jsx(ge,{variant:"h6",sx:{color:"#8e24aa",fontWeight:"bold",mb:2},children:t}),u.jsx(ge,{variant:"body2",sx:{color:"rgba(255,255,255,0.7)"},children:"We offer exclusive premium adult content for our users. All videos are carefully selected to ensure the highest quality viewing experience for our 18+ audience."})]})}),u.jsxs(Ze,{item:!0,xs:12,md:4,children:[u.jsx(ge,{variant:"h6",sx:{color:"#8e24aa",fontWeight:"bold",mb:2},children:"Quick Links"}),u.jsxs(ee,{sx:{display:"flex",flexDirection:"column"},children:[u.jsx(id,{href:"/",underline:"hover",sx:{mb:1.5,color:"rgba(255,255,255,0.7)","&:hover":{color:"#8e24aa"}},children:"Home"}),u.jsx(id,{href:"/videos",underline:"hover",sx:{mb:1.5,color:"rgba(255,255,255,0.7)","&:hover":{color:"#8e24aa"}},children:"Videos"}),u.jsx(ee,{sx:{display:"flex",alignItems:"center",color:"#8e24aa",mt:1,background:"rgba(142,36,170,0.1)",px:1.5,py:.5,borderRadius:1,width:"fit-content"},children:u.jsx(ge,{variant:"body2",fontWeight:"bold",children:"18+ ADULTS ONLY"})})]})]}),u.jsxs(Ze,{item:!0,xs:12,md:4,children:[u.jsx(ge,{variant:"h6",sx:{color:"#8e24aa",fontWeight:"bold",mb:2},children:"Legal Information"}),u.jsx(ge,{variant:"body2",sx:{color:"rgba(255,255,255,0.7)"},paragraph:!0,children:"This website contains adult-oriented material intended for individuals 18 years of age or older. All models appearing on this website were 18 years of age or older at the time of production."}),u.jsx(ge,{variant:"body2",sx:{color:"rgba(255,255,255,0.5)"},paragraph:!0,children:"USC 2257 Record-Keeping Requirements Compliance Statement"})]})]}),u.jsx(jo,{sx:{my:4,borderColor:"rgba(255,255,255,0.1)"}}),u.jsxs(ee,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},alignItems:"center",justifyContent:"space-between"},children:[u.jsxs(ge,{variant:"body2",sx:{color:"rgba(255,255,255,0.5)"},children:["© ",n," ",t,". All rights reserved. Adults only."]}),u.jsxs(ee,{sx:{display:"flex",alignItems:"center",mt:{xs:2,md:0}},children:[u.jsx(ge,{variant:"body2",sx:{color:"rgba(255,255,255,0.5)",mr:2},children:"By accessing this site you agree that you are at least 18 years old"}),u.jsx(He,{variant:"contained",size:"small",startIcon:u.jsx(gp,{}),onClick:l,sx:{bgcolor:"#8e24aa","&:hover":{bgcolor:"#6a1b9a"}},children:"Admin"}),i&&u.jsx(He,{variant:"outlined",size:"small",startIcon:u.jsx(Po,{}),onClick:f,sx:{ml:1,borderColor:"#8e24aa",color:"#8e24aa","&:hover":{borderColor:"#6a1b9a",color:"#6a1b9a"}},children:"Config"})]})]})]})]})},_m=()=>{var k;const[n,e]=R.useState(""),[t,r]=R.useState(""),i=Eo(),{login:s,loading:a,error:c,user:l,isAuthenticated:f}=es(),g=En(),y=((k=ri().state)==null?void 0:k.from)||"/admin";R.useEffect(()=>{f&&l&&g(y,{replace:!0})},[f,l,g,y]);const v=async S=>{S.preventDefault(),await s(n,t,y)};return u.jsx(wi,{maxWidth:"sm",sx:{py:8},children:u.jsxs(Wr,{elevation:3,sx:{p:4,display:"flex",flexDirection:"column",alignItems:"center",bgcolor:i.palette.background.paper},children:[u.jsx(ge,{variant:"h4",component:"h1",gutterBottom:!0,children:"Login"}),c&&u.jsx(Yt,{severity:"error",sx:{width:"100%",mb:2},children:c}),u.jsxs(ee,{component:"form",onSubmit:v,sx:{width:"100%"},children:[u.jsx(Lt,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email",name:"email",autoComplete:"email",autoFocus:!0,value:n,onChange:S=>e(S.target.value),disabled:a}),u.jsx(Lt,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Senha",type:"password",id:"password",autoComplete:"current-password",value:t,onChange:S=>r(S.target.value),disabled:a}),u.jsx(He,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",sx:{mt:3,mb:2},disabled:a,children:a?u.jsx(Gr,{size:24}):"Entrar"})]})]})})},Sm=({children:n})=>{const{user:e,loading:t,isAuthenticated:r,checkSession:i,sessionCheckedAt:s}=es(),[a,c]=R.useState(!0),[l,f]=R.useState(null),g=ri();return R.useEffect(()=>{let m=!0;return(async()=>{if(m){c(!0),f(null);try{Date.now()-s>1e4&&await i()}catch(v){console.error("Error verifying session:",v),m&&f("Erro ao verificar autenticação. Por favor, faça login novamente.")}finally{m&&c(!1)}}})(),()=>{m=!1}},[g.pathname,i,s]),t||a?u.jsxs(ee,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh"},children:[u.jsx(Gr,{size:40}),u.jsx(ge,{variant:"body1",sx:{mt:2},children:"Verificando autenticação..."})]}):l?u.jsxs(ee,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh",p:2},children:[u.jsx(Yt,{severity:"error",sx:{mb:2,width:"100%",maxWidth:500},children:l}),u.jsx(He,{variant:"contained",color:"primary",onClick:()=>{localStorage.removeItem("sessionToken"),window.location.href="/login"},children:"Ir para login"})]}):!e||!r?u.jsx(h2,{to:"/login",replace:!0,state:{from:g.pathname}}):u.jsx(u.Fragment,{children:n})};var Xu={},jm=Ct;Object.defineProperty(Xu,"__esModule",{value:!0});var mp=Xu.default=void 0,Am=jm(Pt()),km=u;mp=Xu.default=(0,Am.default)((0,km.jsx)("path",{d:"M10 18h4v-2h-4zM3 6v2h18V6zm3 7h12v-2H6z"}),"FilterList");var Qu={},Lm=Ct;Object.defineProperty(Qu,"__esModule",{value:!0});var Ts=Qu.default=void 0,Cm=Lm(Pt()),Pm=u;Ts=Qu.default=(0,Cm.default)((0,Pm.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility");var eh={},Im=Ct;Object.defineProperty(eh,"__esModule",{value:!0});var Rs=eh.default=void 0,Nm=Im(Pt()),$d=u;Rs=eh.default=(0,Nm.default)([(0,$d.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,$d.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime");var th={},Em=Ct;Object.defineProperty(th,"__esModule",{value:!0});var Is=th.default=void 0;Om(R);var Tm=Em(Pt()),Rm=u;function vp(n){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(vp=function(r){return r?t:e})(n)}function Om(n,e){if(n&&n.__esModule)return n;if(n===null||typeof n!="object"&&typeof n!="function")return{default:n};var t=vp(e);if(t&&t.has(n))return t.get(n);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in n)if(s!=="default"&&Object.prototype.hasOwnProperty.call(n,s)){var a=i?Object.getOwnPropertyDescriptor(n,s):null;a&&(a.get||a.set)?Object.defineProperty(r,s,a):r[s]=n[s]}return r.default=n,t&&t.set(n,r),r}Is=th.default=(0,Tm.default)((0,Rm.jsx)("path",{d:"M9.78 18.65l.28-4.23 7.68-6.92c.34-.31-.07-.46-.52-.19L7.74 13.3 3.64 12c-.88-.25-.89-.86.2-1.3l15.97-6.16c.73-.33 1.43.18 1.15 1.3l-2.72 12.81c-.19.91-.74 1.13-1.5.71L12.6 16.3l-1.99 1.93c-.23.23-.42.42-.83.42z"}),"Telegram");var rh={},Fm=Ct;Object.defineProperty(rh,"__esModule",{value:!0});var nh=rh.default=void 0,Dm=Fm(Pt()),Mm=u;nh=rh.default=(0,Dm.default)((0,Mm.jsx)("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2m0 14H4v-6h16zm0-10H4V6h16z"}),"CreditCard");var yi=(n=>(n.NEWEST="newest",n.PRICE_ASC="price_asc",n.PRICE_DESC="price_desc",n.VIEWS_DESC="views_desc",n.DURATION_DESC="duration_desc",n))(yi||{});class Jt{static clearCache(){this.videosCache=null,this.cacheTimestamp=0,console.log("Video cache cleared")}static clearCachePublic(){this.clearCache()}static async forceRefreshCache(){return this.clearCache(),await this.getAllVideos()}static isCacheValid(){return this.videosCache!==null&&this.cacheTimestamp>0&&Date.now()-this.cacheTimestamp<this.CACHE_DURATION}static convertVideoData(e){let t="00:00";if(typeof e.duration=="string")t=e.duration;else if(typeof e.duration=="number"){const r=e.duration,i=Math.floor(r/60),s=r%60;if(i<60)t=`${i.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`;else{const a=Math.floor(i/60),c=i%60;t=`${a.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`}}return{$id:e.id,title:e.title,description:e.description,price:e.price,duration:t,videoFileId:e.videoFileId,video_id:e.videoFileId,thumbnailFileId:e.thumbnailFileId,thumbnail_id:e.thumbnailFileId,thumbnailUrl:e.thumbnailUrl,isPurchased:e.isPurchased||!1,createdAt:e.createdAt,views:e.views,product_link:e.productLink||""}}static async getVideoIds(e="newest"){try{console.log("Getting video IDs only (fast operation)");const r=(await ar.listVideos()).map(s=>({$id:s.id,title:s.title,price:Number(s.price||0),createdAt:s.created_at,views:s.views||0,duration:s.duration||"00:00"}));return this.sortVideos(r,e).map(s=>s.$id)}catch(t){return console.error("Error getting video IDs:",t),[]}}static async getAllVideos(e="newest",t=""){try{if(!t&&this.isCacheValid())return console.log("Usando cache de vídeos"),this.sortVideos([...this.videosCache],e);console.log("Buscando vídeos no Supabase (metadados)");let i=(await ar.listVideos()).map(s=>({$id:s.id,title:s.title,description:s.description||"",price:Number(s.price||0),duration:s.duration||"00:00",videoFileId:s.video_file_id||void 0,video_id:s.video_file_id||void 0,thumbnailFileId:s.thumbnail_file_id||void 0,thumbnail_id:s.thumbnail_file_id||void 0,thumbnailUrl:s.thumbnail_url||void 0,isPurchased:!1,createdAt:s.created_at,views:s.views||0,product_link:s.product_link||""}));if(t&&t.trim()!==""){const s=t.trim().toLowerCase();i=i.filter(a=>a.title.toLowerCase().includes(s)||a.description.toLowerCase().includes(s))}for(const s of i){const a=s.thumbnailFileId||s.thumbnail_id;if(a)try{s.thumbnailUrl=await In.getThumbnailUrl(a)}catch(c){console.error(`Erro ao obter miniatura para o vídeo ${s.$id}:`,c),s.thumbnailUrl="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE4MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE4MCIgZmlsbD0iI2Y1ZjVmNSIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiM5OTk5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5WaWRlbyBUaHVtYm5haWw8L3RleHQ+PC9zdmc+"}else s.thumbnailUrl="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE4MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE4MCIgZmlsbD0iI2Y1ZjVmNSIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiM5OTk5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5WaWRlbyBUaHVtYm5haWw8L3RleHQ+PC9zdmc+"}return t||(this.videosCache=[...i],this.cacheTimestamp=Date.now(),console.log("Cache atualizado com",i.length,"vídeos")),this.sortVideos(i,e)}catch(r){throw console.error("Erro ao obter vídeos:",r),r}}static sortVideos(e,t){switch(t){case"newest":return e.sort((r,i)=>new Date(i.createdAt).getTime()-new Date(r.createdAt).getTime());case"price_asc":return e.sort((r,i)=>r.price-i.price);case"price_desc":return e.sort((r,i)=>i.price-r.price);case"views_desc":return e.sort((r,i)=>(i.views||0)-(r.views||0));case"duration_desc":return e.sort((r,i)=>{const s=a=>{try{const c=a.split(":").map(Number);if(c.length===2)return c[0]*60+c[1];if(c.length===3)return c[0]*3600+c[1]*60+c[2]}catch(c){console.error("Erro ao analisar duração:",c)}return 0};return s(i.duration)-s(r.duration)});default:return e}}static async getVideo(e){try{console.log(`Getting video ${e} from Supabase`);const t=await ar.getVideo(e);if(!t)return null;const r={$id:t.id,title:t.title,description:t.description||"",price:Number(t.price||0),duration:t.duration||"00:00",videoFileId:t.video_file_id||void 0,video_id:t.video_file_id||void 0,thumbnailFileId:t.thumbnail_file_id||void 0,thumbnail_id:t.thumbnail_file_id||void 0,thumbnailUrl:t.thumbnail_url||void 0,isPurchased:!1,createdAt:t.created_at,views:t.views||0,product_link:t.product_link||""};try{const s=await ar.listVideoSources(r.$id);r.previewSources=s.slice(0,3)}catch(s){console.warn("Could not load video sources for preview:",s)}const i=r.thumbnailFileId||r.thumbnail_id;return i&&In.getThumbnailUrl(i).then(s=>{r.thumbnailUrl=s,console.log(`Thumbnail loaded for video ${r.$id}`)}).catch(s=>{console.error(`Error getting thumbnail for video ${r.$id}:`,s),r.thumbnailUrl="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE4MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE4MCIgZmlsbD0iI2Y1ZjVmNSIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiM5OTk5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5WaWRlbyBUaHVtYm5haWw8L3RleHQ+PC9zdmc+"}),r.thumbnailUrl="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE4MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE4MCIgZmlsbD0iI2Y1ZjVmNSIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiM5OTk5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5WaWRlbyBUaHVtYm5haWw8L3RleHQ+PC9zdmc+",console.log(`Video ${e} loaded successfully`),r}catch(t){return console.error(`Error getting video ${e}:`,t),null}}static async incrementViews(e){try{await ar.incrementViews(e)}catch(t){console.error(`Error incrementing views for video ${e}:`,t)}}static async getVideosWithPagination(e=1,t=12,r="newest",i=""){try{const s=await this.getAllVideos(r,i),a=Math.ceil(s.length/t),c=(e-1)*t,l=c+t;return{videos:s.slice(c,l),totalPages:a}}catch(s){throw console.error("Error getting paginated videos:",s),s}}static async getVideoFileUrl(e){try{console.log(`Getting video file URL for video ${e}`);const t=await this.getVideo(e);if(!t)return console.error(`Video ${e} not found`),null;const r=t.video_id||t.videoFileId;if(!r)return console.error(`Video ${e} has no video file ID (checked both video_id and videoFileId)`),null;console.log(`Attempting to get file URL for video ID: ${r}`);try{const i=await In.getFileUrl(r);return console.log(`Video URL obtained: ${i}`),i}catch(i){return console.error("Error getting file URL:",i),console.error(`Video File ID: ${r}`),null}}catch(t){return console.error(`Error getting video file URL for ${e}:`,t),null}}static async getFileUrlById(e){try{return await In.getFileUrl(e)}catch(t){return console.error("Error getting file URL by id:",t),null}}static async getVideoSources(e){try{return await ar.listVideoSources(e)}catch(t){return console.error("Error getting video sources:",t),[]}}static async createVideo(e){try{this.clearCache();{const t=await ar.createVideo({title:e.title,description:e.description,price:e.price,duration:e.duration.toString(),video_file_id:e.videoFileId,thumbnail_file_id:e.thumbnailFileId,product_link:e.productLink||"",is_active:!0,views:0,thumbnail_url:null});return await this.forceRefreshCache(),{$id:t.id,title:t.title,description:t.description||"",price:Number(t.price||0),duration:t.duration||"00:00",videoFileId:t.video_file_id||void 0,video_id:t.video_file_id||void 0,thumbnailFileId:t.thumbnail_file_id||void 0,thumbnail_id:t.thumbnail_file_id||void 0,thumbnailUrl:t.thumbnail_url||void 0,isPurchased:!1,createdAt:t.created_at,views:t.views||0,product_link:t.product_link||""}}}catch(t){return console.error("Error creating video:",t),null}}static async updateVideo(e,t){try{this.clearCache();{const r={title:t.title,description:t.description,price:t.price,duration:t.duration?t.duration.toString():void 0,video_file_id:t.videoFileId,thumbnail_file_id:t.thumbnailFileId,product_link:t.productLink};Object.keys(r).forEach(s=>r[s]===void 0&&delete r[s]);const i=await ar.updateVideo(e,r);return await this.forceRefreshCache(),{$id:i.id,title:i.title,description:i.description||"",price:Number(i.price||0),duration:i.duration||"00:00",videoFileId:i.video_file_id||void 0,video_id:i.video_file_id||void 0,thumbnailFileId:i.thumbnail_file_id||void 0,thumbnail_id:i.thumbnail_file_id||void 0,thumbnailUrl:i.thumbnail_url||void 0,isPurchased:!1,createdAt:i.created_at,views:i.views||0,product_link:i.product_link||""}}}catch(r){return console.error("Error updating video:",r),null}}static async deleteVideo(e){try{this.clearCache();const t=await this.getVideo(e);if(t){const i=t.video_id||t.videoFileId,s=t.thumbnail_id||t.thumbnailFileId;i&&await In.deleteFile(i),s&&await In.deleteFile(s)}const r=await ar.deleteVideo(e);return r&&await this.forceRefreshCache(),r}catch(t){return console.error("Error deleting video:",t),!1}}}Br(Jt,"videosCache",null),Br(Jt,"cacheTimestamp",0),Br(Jt,"CACHE_DURATION",30*1e3);var bp="basil",Bm=function(e){return e===3?"v3":e},yp="https://js.stripe.com",Um="".concat(yp,"/").concat(bp,"/stripe.js"),$m=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,qm=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var zm=function(e){return $m.test(e)||qm.test(e)},Wm=function(){for(var e=document.querySelectorAll('script[src^="'.concat(yp,'"]')),t=0;t<e.length;t++){var r=e[t];if(zm(r.src))return r}return null},qd=function(e){var t="",r=document.createElement("script");r.src="".concat(Um).concat(t);var i=document.head||document.body;if(!i)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return i.appendChild(r),r},Vm=function(e,t){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.4.0",startTime:t})},ho=null,xl=null,_l=null,Hm=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}},Gm=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}},Km=function(e){return ho!==null?ho:(ho=new Promise(function(t,r){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe){t(window.Stripe);return}try{var i=Wm();if(!(i&&e)){if(!i)i=qd(e);else if(i&&_l!==null&&xl!==null){var s;i.removeEventListener("load",_l),i.removeEventListener("error",xl),(s=i.parentNode)===null||s===void 0||s.removeChild(i),i=qd(e)}}_l=Gm(t,r),xl=Hm(r),i.addEventListener("load",_l),i.addEventListener("error",xl)}catch(a){r(a);return}}),ho.catch(function(t){return ho=null,Promise.reject(t)}))},Jm=function(e,t,r){if(e===null)return null;var i=t[0],s=i.match(/^pk_test/),a=Bm(e.version),c=bp;s&&a!==c&&console.warn("Stripe.js@".concat(a," was loaded on the page, but @stripe/stripe-js@").concat("7.4.0"," expected Stripe.js@").concat(c,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var l=e.apply(void 0,t);return Vm(l,r),l},fo,wp=!1,xp=function(){return fo||(fo=Km(null).catch(function(e){return fo=null,Promise.reject(e)}),fo)};Promise.resolve().then(function(){return xp()}).catch(function(n){wp||console.warn(n)});var Ym=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];wp=!0;var i=Date.now();return xp().then(function(s){return Jm(s,t,i)})};const Zm=()=>window.location.origin,zd=Zm(),Xm=async(n,e="usd",t,r,i)=>{console.log("Creating Stripe checkout session:",{amount:Math.round(n*100),currency:e,name:t,success_url:r,cancel_url:i,apiUrl:zd});const s=`${zd}/api/create-checkout-session`;console.log("Making request to:",s);const a=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:Math.round(n*100),currency:e,name:t,success_url:r,cancel_url:i})});if(!a.ok){const c=await a.json().catch(()=>({}));throw console.error("Failed to create checkout session:",{status:a.status,statusText:a.statusText,errorData:c,url:s}),new Error(`Failed to create checkout session: ${a.status} ${a.statusText}`)}return a.json()};class Ns{static initStripe(e){return this.stripeInstance||(this.stripeInstance=Ym(e)),this.stripeInstance}static async createCheckoutSession(e,t="usd",r,i,s){try{return(await Xm(e,t,r,i,s)).sessionId}catch(a){throw console.error("Error creating checkout session:",a),a}}static async redirectToCheckout(e){const t=await this.stripeInstance;if(!t)throw new Error("Stripe has not been initialized");const{error:r}=await t.redirectToCheckout({sessionId:e});if(r)throw console.error("Error redirecting to checkout:",r),r}}Br(Ns,"stripeInstance",null);var ih={},Qm=Ct;Object.defineProperty(ih,"__esModule",{value:!0});var _p=ih.default=void 0,ev=Qm(Pt()),tv=u;_p=ih.default=(0,ev.default)((0,tv.jsx)("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"ChevronLeft");var sh={},rv=Ct;Object.defineProperty(sh,"__esModule",{value:!0});var Sp=sh.default=void 0,nv=rv(Pt()),iv=u;Sp=sh.default=(0,nv.default)((0,iv.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight");var ah={},sv=Ct;Object.defineProperty(ah,"__esModule",{value:!0});var oh=ah.default=void 0,av=sv(Pt()),ov=u;oh=ah.default=(0,av.default)((0,ov.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow");const lv=({videos:n,onVideoClick:e,autoPlay:t=!1,showControls:r=!0})=>{const i=En(),[s,a]=R.useState(0),[c,l]=R.useState(!0),[f,g]=R.useState(new Set);R.useEffect(()=>{if(t&&n.length>1){const j=setInterval(()=>{a(w=>(w+1)%n.length)},3e3);return()=>clearInterval(j)}},[t,n.length]),R.useEffect(()=>{(async()=>{l(!0);for(const w of n)if(w.thumbnailUrl&&!f.has(w.$id))try{const C=new Image;C.onload=()=>{g(F=>new Set([...F,w.$id]))},C.src=w.thumbnailUrl}catch(C){console.error("Error loading thumbnail:",C)}l(!1)})()},[n,f]);const m=async j=>{try{await Jt.incrementViews(j.$id),e?e(j.$id):i(`/video/${j.$id}`)}catch(w){console.error("Error handling video click:",w),e?e(j.$id):i(`/video/${j.$id}`)}},y=()=>{a(j=>(j-1+n.length)%n.length)},v=()=>{a(j=>(j+1)%n.length)},k=j=>{if(j==null)return"00:00";if(typeof j=="number"){const w=Math.floor(j/60),C=Math.floor(j%60);return`${w}:${C.toString().padStart(2,"0")}`}return String(j)};if(n.length===0)return u.jsx(ee,{sx:{width:"100%",height:"200px",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"#0A0A0A",borderRadius:1},children:u.jsx(ge,{color:"text.secondary",children:"No videos available"})});const S=n[s];return u.jsxs(ee,{sx:{position:"relative",width:"100%",height:"100%"},children:[u.jsxs(ee,{sx:{position:"relative",width:"100%",height:"100%",borderRadius:1,overflow:"hidden",cursor:"pointer"},onClick:()=>m(S),children:[c||!f.has(S.$id)?u.jsx(Vr,{variant:"rectangular",sx:{width:"100%",height:"100%",bgcolor:"#0A0A0A"},animation:"wave"}):u.jsx(Ao,{component:"img",image:S.thumbnailUrl,alt:S.title,sx:{width:"100%",height:"100%",objectFit:"cover",backgroundColor:"#0A0A0A",filter:"brightness(0.8)"}}),u.jsx(ee,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0,0,0,0.3)",transition:"all 0.3s ease","&:hover":{backgroundColor:"rgba(0,0,0,0.5)"}},children:u.jsx(ee,{sx:{width:"60px",height:"60px",borderRadius:"50%",backgroundColor:"rgba(255,15,80,0.9)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},children:u.jsx(oh,{sx:{fontSize:30,color:"white"}})})}),u.jsxs(ee,{sx:{position:"absolute",bottom:0,left:0,right:0,background:"linear-gradient(transparent, rgba(0,0,0,0.8))",color:"white",p:2},children:[u.jsx(ge,{variant:"h6",sx:{fontWeight:"bold",mb:.5},children:S.title}),u.jsxs(ee,{sx:{display:"flex",alignItems:"center",gap:1},children:[S.duration&&u.jsx(or,{label:k(S.duration),size:"small",sx:{backgroundColor:"rgba(0,0,0,0.8)",color:"white",height:"20px",fontSize:"0.7rem"},icon:u.jsx(Rs,{sx:{color:"white",fontSize:"12px"}})}),u.jsxs(ge,{variant:"body2",sx:{color:"white"},children:["$",S.price.toFixed(2)]})]})]}),n.length>1&&u.jsx(or,{label:`${s+1}/${n.length}`,size:"small",sx:{position:"absolute",top:8,right:8,backgroundColor:"rgba(0,0,0,0.8)",color:"white",fontWeight:"bold",height:"24px"}})]}),r&&n.length>1&&u.jsxs(u.Fragment,{children:[u.jsx(hn,{onClick:y,sx:{position:"absolute",left:8,top:"50%",transform:"translateY(-50%)",backgroundColor:"rgba(0,0,0,0.7)",color:"white","&:hover":{backgroundColor:"rgba(0,0,0,0.9)"}},children:u.jsx(_p,{})}),u.jsx(hn,{onClick:v,sx:{position:"absolute",right:8,top:"50%",transform:"translateY(-50%)",backgroundColor:"rgba(0,0,0,0.7)",color:"white","&:hover":{backgroundColor:"rgba(0,0,0,0.9)"}},children:u.jsx(Sp,{})})]}),n.length>1&&u.jsx(ee,{sx:{display:"flex",gap:1,mt:1,overflowX:"auto","&::-webkit-scrollbar":{height:4},"&::-webkit-scrollbar-track":{bgcolor:"transparent"},"&::-webkit-scrollbar-thumb":{bgcolor:"rgba(255,255,255,0.3)",borderRadius:2}},children:n.map((j,w)=>u.jsx(ee,{onClick:()=>a(w),sx:{minWidth:"60px",height:"40px",borderRadius:1,overflow:"hidden",cursor:"pointer",border:s===w?"2px solid #FF0F50":"2px solid transparent",opacity:s===w?1:.7,transition:"all 0.3s ease","&:hover":{opacity:1}},children:u.jsx(Ao,{component:"img",image:j.thumbnailUrl,alt:j.title,sx:{width:"100%",height:"100%",objectFit:"cover"}})},j.$id))})]})},lh=({video:n})=>{const e=En(),[t,r]=R.useState(!1),[i,s]=R.useState(!0),[a,c]=R.useState(!1),{telegramUsername:l,stripePublishableKey:f}=ni(),[g,m]=R.useState(!1),y=async()=>{try{await Jt.incrementViews(n.$id),e(`/video/${n.$id}`)}catch(te){console.error("Error handling video card click:",te),e(`/video/${n.$id}`)}},v=te=>{if(te==null)return"00:00";if(typeof te=="number"){const G=Math.floor(te/60),M=Math.floor(te%60);return`${G}min ${M}s`}if(typeof te=="string")try{const G=te.split(":");if(G.length===2)return`${G[0]}min ${G[1]}s`;if(G.length===3)return`${G[0]}h ${G[1]}m ${G[2]}s`}catch(G){return console.error("Error formatting duration:",G),te}return String(te)},k=te=>te===void 0?"0 views":te<1e3?`${te} views`:te<1e6?`${(te/1e3).toFixed(1)}K views`:`${(te/1e6).toFixed(1)}M views`,S=te=>{if(!te)return"";const G=new Date(te),z=Math.abs(new Date().getTime()-G.getTime()),W=Math.ceil(z/(1e3*60*60*24));return W===1?"Yesterday":W<7?`${W} days ago`:W<30?`${Math.floor(W/7)} weeks ago`:W<365?`${Math.floor(W/30)} months ago`:`${Math.floor(W/365)} years ago`},j=n.createdAt||n.created_at;R.useEffect(()=>{n.thumbnailUrl?(s(!0),c(!1)):s(!1)},[n.thumbnailUrl]);const w=()=>{s(!1)},C=()=>{s(!1),c(!0)},F=te=>{te.stopPropagation(),e(`/video/${n.$id}`)},Z=te=>{te.stopPropagation();const G=`Hi, I'm interested in this video.

Title: ${n.title}
Price: $${n.price.toFixed(2)}
ID: ${n.$id}

Please let me know how to proceed with payment.`,M=encodeURIComponent(G),z=l?`https://t.me/${l.replace("@","")}`:"https://t.me/share/url",W=l?`${z}?start=0&text=${M}`:`${z}?text=${M}`;window.open(W,"_blank")},ae=async te=>{if(te.stopPropagation(),!!f)try{m(!0),await Ns.initStripe(f);const G="Video Access",M=`${window.location.origin}/video/${n.$id}?payment_success=true&session_id={CHECKOUT_SESSION_ID}`,z=`${window.location.origin}/video/${n.$id}?payment_canceled=true`,W=await Ns.createCheckoutSession(n.price,"usd",G,M,z);await Ns.redirectToCheckout(W)}catch(G){console.error("Stripe payment error:",G)}finally{m(!1)}};return u.jsxs(u.Fragment,{children:[u.jsx("style",{children:`
          @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
          }
        `}),u.jsxs(To,{sx:{height:"100%",display:"flex",flexDirection:"column",transition:"all 0.3s ease",borderRadius:"12px",overflow:"hidden",boxShadow:te=>`0 8px 20px ${te.palette.mode==="dark"?"rgba(0,0,0,0.4)":"rgba(0,0,0,0.15)"}`,cursor:"pointer",backgroundColor:"#1a1a1a",border:"1px solid rgba(142,36,170,0.2)","&:hover":{transform:"translateY(-10px) scale(1.02)",boxShadow:"0 16px 30px rgba(142,36,170,0.3)",borderColor:"#8e24aa"}},onClick:y,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:[u.jsxs(ee,{sx:{position:"relative",paddingTop:"56.25%"},children:[n.previewSources&&n.previewSources.length>0?u.jsx(ee,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},children:u.jsx(lv,{videos:[n.previewSources].flat().slice(0,3).map((te,G)=>({$id:`${n.$id}::${te.id}`,title:n.title,thumbnailUrl:te.thumbnail_file_id?void 0:n.thumbnailUrl,duration:n.duration,price:n.price})),onVideoClick:te=>e(`/video/${te}`),autoPlay:t,showControls:t})}):u.jsx(u.Fragment,{children:n.thumbnailUrl&&!a?u.jsx(Ao,{component:"img",image:n.thumbnailUrl,alt:n.title,sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",backgroundColor:"#0A0A0A",filter:"brightness(0.9)"},onLoad:w,onError:C}):u.jsx(Vr,{variant:"rectangular",sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"#0A0A0A"},animation:"wave"})}),i&&n.thumbnailUrl&&u.jsxs(ee,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.7)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:3},children:[u.jsx(Gr,{size:40,thickness:4,sx:{color:"#8e24aa",mb:1,animation:"pulse 1.5s ease-in-out infinite"}}),u.jsx(ge,{variant:"caption",sx:{color:"white",fontWeight:"bold",textAlign:"center",fontSize:"0.75rem"},children:"Loading..."})]}),a&&u.jsx(ee,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"#0A0A0A",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:3},children:u.jsx(ge,{variant:"body2",sx:{color:"#666",textAlign:"center",fontSize:"0.9rem"},children:"Video Thumbnail"})}),u.jsx(or,{label:"18+",size:"small",sx:{position:"absolute",top:8,left:8,backgroundColor:"#8e24aa",color:"white",fontWeight:"bold",fontSize:"0.7rem",height:"22px",zIndex:2}}),u.jsx(ee,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"linear-gradient(to top, rgba(0,0,0,0.6) 0%, rgba(0,0,0,0.25) 50%, rgba(0,0,0,0.25) 100%)",opacity:t?1:.4,transition:"all 0.3s ease"}}),n.duration&&u.jsx(or,{label:v(n.duration),size:"small",sx:{position:"absolute",bottom:8,right:8,backgroundColor:"rgba(0,0,0,0.8)",color:"white",fontWeight:"bold",height:"24px","& .MuiChip-label":{px:1}},icon:u.jsx(Rs,{sx:{color:"white",fontSize:"14px"}})}),u.jsx(or,{label:`$${n.price.toFixed(2)}`,color:"primary",size:"medium",sx:{position:"absolute",top:8,right:8,fontWeight:"bold",fontSize:"0.9rem",height:"32px",boxShadow:"0 4px 12px rgba(142, 36, 170, 0.4)",backgroundColor:"#8e24aa",border:"2px solid rgba(255, 255, 255, 0.3)","& .MuiChip-label":{color:"white",fontWeight:"bold",px:1.5},"&:hover":{backgroundColor:"#6a1b9a",transform:"scale(1.05)",transition:"all 0.2s ease"}}})]}),u.jsxs(Wl,{sx:{flexGrow:1,p:2,pt:1.5},children:[u.jsx(ge,{gutterBottom:!0,variant:"h6",component:"div",sx:{fontWeight:"bold",fontSize:"1rem",lineHeight:1.2,mb:1,height:"2.4rem",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",color:"white"},children:n.title}),u.jsxs(ee,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[u.jsxs(ee,{sx:{display:"flex",alignItems:"center",gap:.5,color:"#8e24aa"},children:[u.jsx(Ts,{sx:{fontSize:16}}),u.jsx(ge,{variant:"caption",children:k(n.views)})]}),j&&u.jsx(ge,{variant:"caption",sx:{color:"#8e24aa"},children:S(j)})]}),u.jsx(ee,{sx:{display:"flex",justifyContent:"center",alignItems:"center",mt:1,p:1,backgroundColor:"rgba(142, 36, 170, 0.1)",borderRadius:1,border:"1px solid rgba(142, 36, 170, 0.2)"},children:u.jsxs(ge,{variant:"h6",sx:{color:"#8e24aa",fontWeight:"bold",fontSize:"1.1rem",textAlign:"center"},children:["$",n.price.toFixed(2)]})}),u.jsxs(ee,{sx:{display:"flex",gap:1,mt:1},children:[u.jsx(He,{variant:"contained",fullWidth:!0,startIcon:u.jsx(Ts,{}),onClick:F,sx:{backgroundColor:"#8e24aa",color:"white","&:hover":{backgroundColor:"#6a1b9a"}},children:"Preview"}),u.jsx(He,{variant:"outlined",fullWidth:!0,startIcon:u.jsx(Is,{}),onClick:Z,sx:{borderColor:"#8e24aa",color:"#8e24aa","&:hover":{borderColor:"#6a1b9a",backgroundColor:"rgba(142, 36, 170, 0.1)"}},children:"Telegram"})]}),f&&u.jsx(ee,{sx:{mt:1},children:u.jsx(He,{variant:"contained",fullWidth:!0,startIcon:u.jsx(nh,{}),onClick:ae,disabled:g,sx:{backgroundColor:"#6a1b9a",color:"white","&:hover":{backgroundColor:"#4a148c"},"&:disabled":{backgroundColor:"#4a148c",opacity:.6}},children:g?"Processing...":"Pay"})})]})]})]})};function cv(n,e){const[t,r]=R.useState(n);return R.useEffect(()=>{const i=setTimeout(()=>{r(n)},e);return()=>{clearTimeout(i)}},[n,e]),t}const jp=()=>{const{telegramUsername:n}=ni(),e=()=>{if(n){const t=`https://t.me/${n.replace("@","")}`;window.open(t,"_blank")}};return u.jsx(ee,{sx:{py:6,bgcolor:"background.default"},children:u.jsx(wi,{maxWidth:"md",children:u.jsxs(Wr,{elevation:2,sx:t=>({p:4,textAlign:"center",borderRadius:2,background:`linear-gradient(135deg, ${t.palette.secondary.main} 0%, ${t.palette.primary.main} 100%)`,color:t.palette.getContrastText(t.palette.primary.main)}),children:[u.jsx(ge,{variant:"h5",component:"h2",gutterBottom:!0,sx:{fontWeight:600},children:"For more VIP content or all content"}),u.jsx(ge,{variant:"body1",sx:{mb:3,opacity:.9},children:"Get in touch with us for exclusive access to premium videos and complete content library. Your privacy is our priority."}),u.jsx(He,{variant:"contained",color:"primary",size:"large",startIcon:u.jsx(Is,{}),onClick:e,sx:t=>({px:4,py:1.5,fontSize:"1.1rem",fontWeight:600,boxShadow:`0 8px 25px ${t.palette.mode==="dark"?"rgba(255, 15, 80, 0.25)":"rgba(209, 13, 66, 0.25)"}`,"&:hover":{transform:"translateY(-2px)"},transition:"all 0.3s ease"}),children:"Contact via Telegram"})]})})})},uv=()=>u.jsxs(To,{sx:{height:"100%",display:"flex",flexDirection:"column",borderRadius:"8px",overflow:"hidden",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",bgcolor:"background.paper"},children:[u.jsx(Vr,{variant:"rectangular",sx:{width:"100%",paddingTop:"56.25%"},animation:"wave"}),u.jsxs(Wl,{children:[u.jsx(Vr,{variant:"text",sx:{fontSize:"1.5rem",mb:1}}),u.jsx(Vr,{variant:"text",sx:{fontSize:"1rem",width:"60%"}}),u.jsxs(ee,{sx:{mt:2,display:"flex",justifyContent:"space-between"},children:[u.jsx(Vr,{variant:"text",sx:{width:"30%"}}),u.jsx(Vr,{variant:"text",sx:{width:"20%"}})]})]})]}),hv=()=>{const[n,e]=A2(),[t,r]=R.useState([]),[i,s]=R.useState(!0),[a,c]=R.useState(null),[l,f]=R.useState(yi.NEWEST),[g,m]=R.useState(n.get("search")||""),y=cv(g,500),[v,k]=R.useState(!1),[S,j]=R.useState([0,100]),[w,C]=R.useState(null),[F,Z]=R.useState(!1),{user:ae}=es(),{siteConfig:te}=ni();R.useEffect(()=>{localStorage.getItem("adult_content_warning_seen")||Z(!0)},[]),R.useEffect(()=>{const U=n.get("search")||"";U!==g&&m(U)},[n]),R.useEffect(()=>{(async()=>{try{s(!0),c(null);const ne=await Jt.getAllVideos(l,y);console.log("Received videos:",ne);let se=ne.filter(de=>de.price>=S[0]&&de.price<=S[1]);w&&(se=se.filter(de=>{const fe=(de.duration||"00:00").split(":").map(Number),ve=fe.length===2?fe[0]*60+fe[1]:fe[0]*3600+fe[1]*60+fe[2];switch(w){case"short":return ve<300;case"medium":return ve>=300&&ve<=900;case"long":return ve>900;default:return!0}})),r(se)}catch(ne){console.error("Error fetching videos:",ne),c("Failed to load videos. Please try again later.")}finally{s(!1)}})()},[ae,l,y,S,w]),R.useEffect(()=>{const ne=setInterval(async()=>{try{if((await fetch("/api/clear-cache",{method:"POST"})).ok){console.log("Cache clear signal received, refreshing videos..."),Jt.clearCachePublic();const de=await Jt.getAllVideos(l,y);r(de)}}catch(se){console.log("Cache check failed:",se)}},1e4);return()=>clearInterval(ne)},[l,y]);const G=U=>{f(U.target.value)},M=U=>{m(U.target.value)},z=(U,ne)=>{j(ne)},W=U=>{C(U===w?null:U)},N=()=>{j([0,100]),C(null)},T=()=>{localStorage.setItem("adult_content_warning_seen","true"),Z(!1)},V=()=>Array(12).fill(0).map((U,ne)=>u.jsx(Ze,{item:!0,xs:12,sm:6,md:4,lg:3,children:u.jsx(uv,{})},`skeleton-${ne}`));return u.jsxs(u.Fragment,{children:[u.jsxs(wi,{maxWidth:"lg",sx:{py:4},children:[u.jsx(Ll,{open:F,onClose:T,closeAfterTransition:!0,BackdropComponent:Cl,BackdropProps:{timeout:500},"aria-labelledby":"adult-content-warning",children:u.jsx(Gi,{in:F,children:u.jsxs(ee,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:"90%",sm:"500px"},bgcolor:"background.paper",border:"2px solid #f44336",borderRadius:2,boxShadow:24,p:4},children:[u.jsxs(ee,{sx:{display:"flex",alignItems:"center",mb:2},children:[u.jsx(Zl,{color:"error",sx:{fontSize:40,mr:2}}),u.jsx(ge,{variant:"h5",component:"h2",sx:{fontWeight:"bold"},children:"Adult Content Warning"})]}),u.jsx(ge,{variant:"body1",sx:{mb:3},children:'This website contains adult material and is intended only for people 18 years of age or older. By clicking "Enter", you confirm that you are at least 18 years old and consent to viewing adult content.'}),u.jsxs(ee,{sx:{display:"flex",justifyContent:"space-between"},children:[u.jsx(He,{variant:"outlined",color:"error",onClick:()=>window.history.back(),children:"Exit"}),u.jsx(He,{variant:"contained",color:"primary",onClick:T,children:"Enter (18+)"})]})]})})}),u.jsxs(ee,{"data-testid":"search-section",sx:{display:"flex",flexDirection:{xs:"column",md:"row"},justifyContent:"space-between",alignItems:{xs:"stretch",md:"center"},mb:3},children:[u.jsxs(ee,{children:[u.jsx(ge,{variant:"h4",component:"h1",gutterBottom:!0,children:(te==null?void 0:te.video_list_title)||"Available Videos"}),!i&&t.length>0&&u.jsxs(ee,{sx:{mt:-1},children:[u.jsxs(ge,{variant:"body2",color:"text.secondary",sx:{mb:1},children:["Showing ",t.length," video",t.length!==1?"s":""]}),u.jsxs(ee,{sx:{display:"flex",gap:1.5,flexWrap:"wrap"},children:[u.jsx(or,{label:`From $${Math.min(...t.map(U=>U.price)).toFixed(2)}`,size:"small",sx:{backgroundColor:"rgba(255, 15, 80, 0.1)",color:"#FF0F50",fontWeight:"bold",border:"1px solid rgba(255, 15, 80, 0.3)"}}),u.jsx(or,{label:`Up to $${Math.max(...t.map(U=>U.price)).toFixed(2)}`,size:"small",sx:{backgroundColor:"rgba(255, 15, 80, 0.1)",color:"#FF0F50",fontWeight:"bold",border:"1px solid rgba(255, 15, 80, 0.3)"}}),u.jsx(or,{label:`Avg: $${(t.reduce((U,ne)=>U+ne.price,0)/t.length).toFixed(2)}`,size:"small",sx:{backgroundColor:"rgba(255, 15, 80, 0.1)",color:"#FF0F50",fontWeight:"bold",border:"1px solid rgba(255, 15, 80, 0.3)"}})]})]})]}),u.jsxs(ee,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:2,width:{xs:"100%",md:"auto"},mt:{xs:2,md:0}},children:[u.jsx(Lt,{placeholder:"Search videos...",size:"small",value:g,onChange:M,sx:{minWidth:{xs:"100%",sm:"200px"}},InputProps:{startAdornment:u.jsx(Cu,{position:"start",children:u.jsx(Pa,{})})}}),u.jsxs(ee,{sx:{display:"flex",gap:1},children:[u.jsxs(wf,{size:"small",sx:{minWidth:{xs:"100%",sm:"150px"}},children:[u.jsx(xf,{id:"sort-select-label",children:"Sort By"}),u.jsxs(_f,{labelId:"sort-select-label",value:l,label:"Sort By",onChange:G,children:[u.jsx(ba,{value:yi.NEWEST,children:"Newest"}),u.jsx(ba,{value:yi.PRICE_ASC,children:"Price: Low to High"}),u.jsx(ba,{value:yi.PRICE_DESC,children:"Price: High to Low"}),u.jsx(ba,{value:yi.VIEWS_DESC,children:"Most Viewed"}),u.jsx(ba,{value:yi.DURATION_DESC,children:"Longest"})]})]}),u.jsx(He,{variant:v?"contained":"outlined",color:"primary",startIcon:u.jsx(mp,{}),onClick:()=>k(!v),size:"small",children:"Filters"})]})]})]}),u.jsx(Sf,{in:v,children:u.jsxs(Wr,{sx:{p:3,mb:3},children:[u.jsx(ge,{variant:"h6",gutterBottom:!0,children:"Filter Options"}),u.jsx(jo,{sx:{mb:2}}),u.jsxs(Ze,{container:!0,spacing:3,children:[u.jsxs(Ze,{item:!0,xs:12,md:6,children:[u.jsxs(ge,{variant:"subtitle2",gutterBottom:!0,children:["Price Range ($",S[0]," - $",S[1],")"]}),u.jsx(r0,{value:S,onChange:z,valueLabelDisplay:"auto",min:0,max:100,sx:{mt:2}})]}),u.jsxs(Ze,{item:!0,xs:12,md:6,children:[u.jsx(ge,{variant:"subtitle2",gutterBottom:!0,children:"Duration"}),u.jsxs(ee,{sx:{display:"flex",gap:1,mt:2},children:[u.jsx(or,{label:"Short (<5 min)",onClick:()=>W("short"),color:w==="short"?"primary":"default",variant:w==="short"?"filled":"outlined"}),u.jsx(or,{label:"Medium (5-15 min)",onClick:()=>W("medium"),color:w==="medium"?"primary":"default",variant:w==="medium"?"filled":"outlined"}),u.jsx(or,{label:"Long (>15 min)",onClick:()=>W("long"),color:w==="long"?"primary":"default",variant:w==="long"?"filled":"outlined"})]})]})]}),u.jsx(ee,{sx:{mt:3,display:"flex",justifyContent:"flex-end"},children:u.jsx(He,{variant:"outlined",onClick:N,children:"Clear Filters"})})]})}),y&&u.jsx(Wr,{sx:{p:2,mb:3,bgcolor:"background.paper",borderRadius:1},children:u.jsxs(ge,{variant:"body1",children:["Search results for: ",u.jsxs("strong",{children:['"',y,'"']})]})}),a&&u.jsx(Yt,{severity:"error",sx:{mb:3},children:a}),u.jsx(Gi,{in:!i,timeout:500,children:u.jsx(ee,{children:i?u.jsx(Ze,{container:!0,spacing:3,children:V()}):t.length===0?u.jsx(Ml,{in:!0,timeout:1e3,children:u.jsxs(Wr,{sx:{p:4,my:3,textAlign:"center",borderRadius:2,background:"linear-gradient(135deg, rgba(255, 15, 80, 0.05) 0%, rgba(209, 13, 66, 0.05) 100%)"},children:[u.jsx(ge,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:"No videos found"}),u.jsx(ge,{variant:"body2",color:"text.secondary",children:g?`No videos matching "${g}". Try a different search term.`:v?"No videos match your current filters. Try adjusting your filter settings.":"No videos available at the moment. Please check back later."})]})}):u.jsx(u.Fragment,{children:u.jsx(Ze,{container:!0,spacing:3,children:t.map((U,ne)=>u.jsx(Ml,{in:!0,timeout:300+ne*50,children:u.jsx(Ze,{item:!0,xs:12,sm:6,md:4,lg:3,children:u.jsx(lh,{video:U})})},U.$id))})})})})]}),u.jsx(jp,{})]})};var ch={},dv=Ct;Object.defineProperty(ch,"__esModule",{value:!0});var Cs=ch.default=void 0,fv=dv(Pt()),pv=u;Cs=ch.default=(0,fv.default)((0,pv.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack");var uh={},gv=Ct;Object.defineProperty(uh,"__esModule",{value:!0});var Ap=uh.default=void 0,mv=gv(Pt()),vv=u;Ap=uh.default=(0,mv.default)((0,vv.jsx)("path",{d:"M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2M1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2"}),"ShoppingCart");const bv=()=>{const{id:n}=Rf(),e=En(),{user:t}=es(),{telegramUsername:r}=ni(),[i,s]=R.useState(null),[a,c]=R.useState(null),[l,f]=R.useState(!0),[g,m]=R.useState(null),[y,v]=R.useState(!1),[k,S]=R.useState(null),[j,w]=R.useState(!1),[C,F]=R.useState(!1);R.useEffect(()=>{(async()=>{if(!n){m("Invalid video ID"),f(!1);return}try{f(!0),m(null);const W=await Jt.getVideo(n);if(!W){m("Video not found"),f(!1);return}if(s(W),await Jt.incrementViews(n),t){w(!1);const N=await Jt.getVideoFileUrl(n);c(N)}}catch(W){console.error("Error loading video:",W),m("An error occurred while loading the video")}finally{f(!1)}})()},[n,t]);const Z=async()=>{if(!t){e("/login",{state:{from:`/video/${n}`}});return}if(!i){S("Video information not available");return}try{v(!0),S(null),setTimeout(()=>{F(!0),w(!0),Jt.getVideoFileUrl(n).then(z=>c(z)).catch(z=>console.error("Error getting video URL:",z)),v(!1)},1500)}catch(z){console.error("Purchase error:",z),S("Failed to complete purchase. Please try again."),v(!1)}},ae=()=>{if(!i)return;const z=`Hi, I'm interested in this video.

Title: ${i.title}
Price: $${i.price.toFixed(2)}
ID: ${i.$id}

Please let me know how to proceed with payment.`,W=encodeURIComponent(z);if(r){const N=`https://t.me/${r.replace("@","")}`;window.open(`${N}?start=0&text=${W}`,"_blank")}else window.open(`https://t.me/share/url?text=${W}`,"_blank")},te=()=>{e("/")},G=z=>{if(z==null)return"00:00";if(typeof z=="number"){const W=Math.floor(z/60),N=Math.floor(z%60);return`${W}min ${N}s`}if(typeof z=="string")try{const W=z.split(":");if(W.length===2)return`${W[0]}min ${W[1]}s`;if(W.length===3)return`${W[0]}h ${W[1]}m ${W[2]}s`}catch(W){return console.error("Error formatting duration:",W),z}return String(z)},M=z=>z===void 0?"0 views":z<1e3?`${z} views`:z<1e6?`${(z/1e3).toFixed(1)}K views`:`${(z/1e6).toFixed(1)}M views`;return l?u.jsx(wi,{maxWidth:"lg",sx:{py:4},children:u.jsx(ee,{sx:{display:"flex",justifyContent:"center",my:4},children:u.jsx(Gr,{size:60})})}):g?u.jsxs(wi,{maxWidth:"lg",sx:{py:4},children:[u.jsx(He,{startIcon:u.jsx(Cs,{}),onClick:te,sx:{mb:2},children:"Back"}),u.jsx(Yt,{severity:"error",sx:{mb:3},children:g})]}):u.jsxs(wi,{maxWidth:"lg",sx:{py:4},children:[u.jsx(He,{startIcon:u.jsx(Cs,{}),onClick:te,sx:{mb:3},children:"Back to videos"}),C&&u.jsx(Yt,{severity:"success",sx:{mb:3},children:"Purchase successful! You can now watch this video."}),k&&u.jsx(Yt,{severity:"error",sx:{mb:3},children:k}),u.jsxs(Wr,{elevation:3,sx:{p:3},children:[u.jsx(ge,{variant:"h4",component:"h1",gutterBottom:!0,children:(i==null?void 0:i.title)||"Video Details"}),u.jsxs(Ze,{container:!0,spacing:3,children:[u.jsx(Ze,{item:!0,xs:12,md:j&&a?12:6,children:j&&a?u.jsx(ee,{sx:{position:"relative",width:"100%",pt:"56.25%",mb:2},children:u.jsx("video",{controls:!0,autoPlay:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"contain",backgroundColor:"#000"},src:a,children:"Your browser does not support the video tag."})}):u.jsx(To,{children:u.jsx(Ao,{component:"img",image:(i==null?void 0:i.thumbnailUrl)||"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNjAwIiBoZWlnaHQ9IjQwMCIgZmlsbD0iI2Y1ZjVmNSIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTgiIGZpbGw9IiM5OTk5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5WaWRlbyBUaHVtYm5haWw8L3RleHQ+PC9zdmc+",alt:i==null?void 0:i.title,sx:{height:300,objectFit:"cover"}})})}),(!j||!a)&&u.jsxs(Ze,{item:!0,xs:12,md:6,children:[u.jsx(ge,{variant:"h6",gutterBottom:!0,children:"Video Information"}),u.jsx(ge,{variant:"body1",paragraph:!0,children:i==null?void 0:i.description}),u.jsxs(ee,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[u.jsxs(ee,{sx:{display:"flex",alignItems:"center",gap:.5},children:[u.jsx(Rs,{fontSize:"small",color:"action"}),u.jsx(ge,{variant:"body2",color:"text.secondary",children:i!=null&&i.duration?G(i.duration):"N/A"})]}),u.jsxs(ee,{sx:{display:"flex",alignItems:"center",gap:.5},children:[u.jsx(Ts,{fontSize:"small",color:"action"}),u.jsx(ge,{variant:"body2",color:"text.secondary",children:M(i==null?void 0:i.views)})]})]}),u.jsx(jo,{sx:{my:2}}),u.jsx(ee,{sx:{display:"flex",alignItems:"center",mb:2},children:u.jsxs(ge,{variant:"h5",component:"p",color:"primary",sx:{fontWeight:"bold"},children:["$",i==null?void 0:i.price.toFixed(2)]})}),u.jsxs(ee,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:2},children:[u.jsx(He,{variant:"contained",fullWidth:!0,startIcon:u.jsx(Ap,{}),onClick:Z,disabled:y||j||!t,children:y?u.jsxs(u.Fragment,{children:[u.jsx(Gr,{size:24,color:"inherit",sx:{mr:1}}),"Processing..."]}):j?"Already Purchased":"Purchase Now"}),r&&u.jsx(He,{variant:"outlined",color:"primary",fullWidth:!0,startIcon:u.jsx(Is,{}),onClick:ae,children:"Contact on Telegram"})]}),!t&&u.jsx(Yt,{severity:"info",sx:{mt:2},children:"Please log in to purchase this video."})]})]}),j&&a&&u.jsxs(u.Fragment,{children:[u.jsx(jo,{sx:{my:3}}),u.jsx(ge,{variant:"h6",gutterBottom:!0,children:"Description"}),u.jsx(ge,{variant:"body1",paragraph:!0,children:i==null?void 0:i.description}),u.jsxs(ee,{sx:{display:"flex",alignItems:"center",gap:2},children:[u.jsxs(ee,{sx:{display:"flex",alignItems:"center",gap:.5},children:[u.jsx(Rs,{fontSize:"small",color:"action"}),u.jsx(ge,{variant:"body2",color:"text.secondary",children:i!=null&&i.duration?G(i.duration):"N/A"})]}),u.jsxs(ee,{sx:{display:"flex",alignItems:"center",gap:.5},children:[u.jsx(Ts,{fontSize:"small",color:"action"}),u.jsx(ge,{variant:"body2",color:"text.secondary",children:M(i==null?void 0:i.views)})]})]})]})]})]})};var hh={},yv=Ct;Object.defineProperty(hh,"__esModule",{value:!0});var Pl=hh.default=void 0,wv=yv(Pt()),xv=u;Pl=hh.default=(0,wv.default)((0,xv.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"}),"ContentCopy");var dh={},_v=Ct;Object.defineProperty(dh,"__esModule",{value:!0});var Ss=dh.default=void 0,Sv=_v(Pt()),jv=u;Ss=dh.default=(0,Sv.default)((0,jv.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle");var fh={},Av=Ct;Object.defineProperty(fh,"__esModule",{value:!0});var kp=fh.default=void 0,kv=Av(Pt()),Lv=u;kp=fh.default=(0,kv.default)((0,Lv.jsx)("path",{d:"M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-8.5 7.5c0 .83-.67 1.5-1.5 1.5H9v2H7.5V7H10c.83 0 1.5.67 1.5 1.5zm5 2c0 .83-.67 1.5-1.5 1.5h-2.5V7H15c.83 0 1.5.67 1.5 1.5zm4-3H19v1h1.5V11H19v2h-1.5V7h3zM9 9.5h1v-1H9zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4zm10 5.5h1v-3h-1z"}),"PictureAsPdf");var ph={},Cv=Ct;Object.defineProperty(ph,"__esModule",{value:!0});var Il=ph.default=void 0,Pv=Cv(Pt()),Iv=u;Il=ph.default=(0,Pv.default)((0,Iv.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");var gh={},Nv=Ct;Object.defineProperty(gh,"__esModule",{value:!0});var gu=gh.default=void 0,Ev=Nv(Pt()),Tv=u;gu=gh.default=(0,Ev.default)((0,Tv.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1.41 16.09V20h-2.67v-1.93c-1.71-.36-3.16-1.46-3.27-3.4h1.96c.1 1.05.82 1.87 2.65 1.87 1.96 0 2.4-.98 2.4-1.59 0-.83-.44-1.61-2.67-2.14-2.48-.6-4.18-1.62-4.18-3.67 0-1.72 1.39-2.84 3.11-3.21V4h2.67v1.95c1.86.45 2.79 1.86 2.85 3.39H14.3c-.05-1.11-.64-1.87-2.22-1.87-1.5 0-2.4.68-2.4 1.64 0 .84.65 1.39 2.67 1.91s4.18 1.39 4.18 3.91c-.01 1.83-1.38 2.83-3.12 3.16"}),"MonetizationOn");/*!
 * react-paypal-js v8.8.3 (2025-04-11T19:50:46.506Z)
 * Copyright 2020-present, PayPal, Inc. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cn;(function(n){n.INITIAL="initial",n.PENDING="pending",n.REJECTED="rejected",n.RESOLVED="resolved"})(cn||(cn={}));var Ji;(function(n){n.LOADING_STATUS="setLoadingStatus",n.RESET_OPTIONS="resetOptions",n.SET_BRAINTREE_INSTANCE="braintreeInstance"})(Ji||(Ji={}));var Wd;(function(n){n.NUMBER="number",n.CVV="cvv",n.EXPIRATION_DATE="expirationDate",n.EXPIRATION_MONTH="expirationMonth",n.EXPIRATION_YEAR="expirationYear",n.POSTAL_CODE="postalCode"})(Wd||(Wd={}));var wr=function(){return wr=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},wr.apply(this,arguments)};function Lp(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Vd(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))}var Io="data-react-paypal-script-id",Ps={DATA_JS_SDK_LIBRARY:"dataJsSdkLibrary",DATA_LIBRARY_VALUE:"react-paypal-js",DATA_NAMESPACE:"dataNamespace",DATA_SDK_INTEGRATION_SOURCE:"dataSdkIntegrationSource"},Rv="Failed to load the PayPal JS SDK script.",Cp="paypal",Ov="usePayPalScriptReducer must be used within a PayPalScriptProvider";function Fv(n){return n===void 0&&(n=Cp),window[n]}function Dv(n){for(var e="",t=0;t<n.length;t++){var r=n[t].charCodeAt(0)*t;n[t+1]&&(r+=n[t+1].charCodeAt(0)*(t-1)),e+=String.fromCharCode(97+Math.abs(r)%26)}return e}function Mv(n){var e=n.reactComponentName,t=n.sdkComponentKey,r=n.sdkRequestedComponents,i=r===void 0?"":r,s=n.sdkDataNamespace,a=s===void 0?Cp:s,c=t.charAt(0).toUpperCase().concat(t.substring(1)),l="Unable to render <".concat(e," /> because window.").concat(a,".").concat(c," is undefined."),f=typeof i=="string"?i:i.join(",");if(!f.includes(t)){var g=[f,t].filter(Boolean).join();l+=`
To fix the issue, add '`.concat(t,"' to the list of components passed to the parent PayPalScriptProvider:")+"\n`<PayPalScriptProvider options={{ components: '".concat(g,"'}}>`.")}return l}function Pp(n){var e=n,t=Io;e[t];var r=Lp(e,[t+""]);return"react-paypal-js-".concat(Dv(JSON.stringify(r)))}function Bv(n){var e=self.document.querySelector("script[".concat(Io,'="').concat(n,'"]'));e!=null&&e.parentNode&&e.parentNode.removeChild(e)}function Uv(n,e){var t,r;switch(e.type){case Ji.LOADING_STATUS:return typeof e.value=="object"?wr(wr({},n),{loadingStatus:e.value.state,loadingStatusErrorMessage:e.value.message}):wr(wr({},n),{loadingStatus:e.value});case Ji.RESET_OPTIONS:return Bv(n.options[Io]),wr(wr({},n),{loadingStatus:cn.PENDING,options:wr(wr((t={},t[Ps.DATA_SDK_INTEGRATION_SOURCE]=Ps.DATA_LIBRARY_VALUE,t),e.value),(r={},r[Io]="".concat(Pp(e.value)),r))});case Ji.SET_BRAINTREE_INSTANCE:return wr(wr({},n),{braintreePayPalCheckoutInstance:e.value});default:return n}}var Ip=R.createContext(null);function $v(n){if(typeof(n==null?void 0:n.dispatch)=="function"&&n.dispatch.length!==0)return n;throw new Error(Ov)}function qv(){var n=$v(R.useContext(Ip)),e=wr(wr({},n),{isInitial:n.loadingStatus===cn.INITIAL,isPending:n.loadingStatus===cn.PENDING,isResolved:n.loadingStatus===cn.RESOLVED,isRejected:n.loadingStatus===cn.REJECTED});return[e,n.dispatch]}R.createContext({});function zv(n){var e=R.useRef(new Proxy({},{get:function(t,r,i){return typeof t[r]=="function"?function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];return t[r].apply(t,s)}:Reflect.get(t,r,i)}}));return e.current=Object.assign(e.current,n),e.current}var mh=function(n){var e,t=n.className,r=t===void 0?"":t,i=n.disabled,s=i===void 0?!1:i,a=n.children,c=n.forceReRender,l=c===void 0?[]:c,f=Lp(n,["className","disabled","children","forceReRender"]),g=s?{opacity:.38}:{},m="".concat(r," ").concat(s?"paypal-buttons-disabled":"").trim(),y=R.useRef(null),v=R.useRef(null),k=zv(f),S=qv()[0],j=S.isResolved,w=S.options,C=R.useState(null),F=C[0],Z=C[1],ae=R.useState(!0),te=ae[0],G=ae[1],M=R.useState(null),z=M[1];function W(){v.current!==null&&v.current.close().catch(function(){})}return!((e=v.current)===null||e===void 0)&&e.updateProps&&v.current.updateProps({message:f.message}),R.useEffect(function(){if(j===!1)return W;var N=Fv(w.dataNamespace);if(N===void 0||N.Buttons===void 0)return z(function(){throw new Error(Mv({reactComponentName:mh.displayName,sdkComponentKey:"buttons",sdkRequestedComponents:w.components,sdkDataNamespace:w[Ps.DATA_NAMESPACE]}))}),W;var T=function(V,U){Z(U),typeof f.onInit=="function"&&f.onInit(V,U)};try{v.current=N.Buttons(wr(wr({},k),{onInit:T}))}catch(V){return z(function(){throw new Error("Failed to render <PayPalButtons /> component. Failed to initialize:  ".concat(V))})}return v.current.isEligible()===!1?(G(!1),W):(y.current&&v.current.render(y.current).catch(function(V){y.current===null||y.current.children.length===0||z(function(){throw new Error("Failed to render <PayPalButtons /> component. ".concat(V))})}),W)},Vd(Vd([j],l,!0),[f.fundingSource],!1)),R.useEffect(function(){F!==null&&(s===!0?F.disable().catch(function(){}):F.enable().catch(function(){}))},[s,F]),bo.createElement(bo.Fragment,null,te?bo.createElement("div",{ref:y,style:g,className:m}):a)};mh.displayName="PayPalButtons";function Wv(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Vv(n,e){var t=document.querySelector('script[src="'.concat(n,'"]'));if(t===null)return null;var r=Np(n,e),i=t.cloneNode();if(delete i.dataset.uidAuto,Object.keys(i.dataset).length!==Object.keys(r.dataset).length)return null;var s=!0;return Object.keys(i.dataset).forEach(function(a){i.dataset[a]!==r.dataset[a]&&(s=!1)}),s?t:null}function Hv(n){var e=n.url,t=n.attributes,r=n.onSuccess,i=n.onError,s=Np(e,t);s.onerror=i,s.onload=r,document.head.insertBefore(s,document.head.firstElementChild)}function Gv(n){var e=n.sdkBaseUrl,t=n.environment,r=Wv(n,["sdkBaseUrl","environment"]),i=e||Yv(t),s=r,a=Object.keys(s).filter(function(f){return typeof s[f]<"u"&&s[f]!==null&&s[f]!==""}).reduce(function(f,g){var m=s[g].toString();return g=Kv(g),g.substring(0,4)==="data"||g==="crossorigin"?f.attributes[g]=m:f.queryParams[g]=m,f},{queryParams:{},attributes:{}}),c=a.queryParams,l=a.attributes;return c["merchant-id"]&&c["merchant-id"].indexOf(",")!==-1&&(l["data-merchant-id"]=c["merchant-id"],c["merchant-id"]="*"),{url:"".concat(i,"?").concat(Jv(c)),attributes:l}}function Kv(n){var e=function(t,r){return(r?"-":"")+t.toLowerCase()};return n.replace(/[A-Z]+(?![a-z])|[A-Z]/g,e)}function Jv(n){var e="";return Object.keys(n).forEach(function(t){e.length!==0&&(e+="&"),e+=t+"="+n[t]}),e}function Yv(n){return n==="sandbox"?"https://www.sandbox.paypal.com/sdk/js":"https://www.paypal.com/sdk/js"}function Np(n,e){e===void 0&&(e={});var t=document.createElement("script");return t.src=n,Object.keys(e).forEach(function(r){t.setAttribute(r,e[r]),r==="data-csp-nonce"&&t.setAttribute("nonce",e["data-csp-nonce"])}),t}function Zv(n,e){if(e===void 0&&(e=Promise),Ep(n,e),typeof document>"u")return e.resolve(null);var t=Gv(n),r=t.url,i=t.attributes,s=i["data-namespace"]||"paypal",a=Hd(s);return i["data-js-sdk-library"]||(i["data-js-sdk-library"]="paypal-js"),Vv(r,i)&&a?e.resolve(a):Xv({url:r,attributes:i},e).then(function(){var c=Hd(s);if(c)return c;throw new Error("The window.".concat(s," global variable is not available."))})}function Xv(n,e){e===void 0&&(e=Promise),Ep(n,e);var t=n.url,r=n.attributes;if(typeof t!="string"||t.length===0)throw new Error("Invalid url.");if(typeof r<"u"&&typeof r!="object")throw new Error("Expected attributes to be an object.");return new e(function(i,s){if(typeof document>"u")return i();Hv({url:t,attributes:r,onSuccess:function(){return i()},onError:function(){var a=new Error('The script "'.concat(t,'" failed to load. Check the HTTP status code and response body in DevTools to learn more.'));return s(a)}})})}function Hd(n){return window[n]}function Ep(n,e){if(typeof n!="object"||n===null)throw new Error("Expected an options object.");var t=n.environment;if(t&&t!=="production"&&t!=="sandbox")throw new Error('The `environment` option must be either "production" or "sandbox".');if(typeof e<"u"&&typeof e!="function")throw new Error("Expected PromisePonyfill to be a function.")}var Qv=function(n){var e,t=n.options,r=t===void 0?{clientId:"test"}:t,i=n.children,s=n.deferLoading,a=s===void 0?!1:s,c=R.useReducer(Uv,{options:wr(wr({},r),(e={},e[Ps.DATA_JS_SDK_LIBRARY]=Ps.DATA_LIBRARY_VALUE,e[Ps.DATA_SDK_INTEGRATION_SOURCE]=Ps.DATA_LIBRARY_VALUE,e[Io]="".concat(Pp(r)),e)),loadingStatus:a?cn.INITIAL:cn.PENDING}),l=c[0],f=c[1];return R.useEffect(function(){if(a===!1&&l.loadingStatus===cn.INITIAL)return f({type:Ji.LOADING_STATUS,value:cn.PENDING});if(l.loadingStatus===cn.PENDING){var g=!0;return Zv(l.options).then(function(){g&&f({type:Ji.LOADING_STATUS,value:cn.RESOLVED})}).catch(function(m){console.error("".concat(Rv," ").concat(m)),g&&f({type:Ji.LOADING_STATUS,value:{state:cn.REJECTED,message:String(m)}})}),function(){g=!1}}},[l.options,a,l.loadingStatus]),bo.createElement(Ip.Provider,{value:wr(wr({},l),{dispatch:f})},i)};function Gd(){}R.createContext({cardFieldsForm:null,fields:{},registerField:Gd,unregisterField:Gd});var Hr=Uint8Array,wn=Uint16Array,vh=Int32Array,Xl=new Hr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ql=new Hr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),mu=new Hr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Tp=function(n,e){for(var t=new wn(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new vh(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return{b:t,r:i}},Rp=Tp(Xl,2),Op=Rp.b,vu=Rp.r;Op[28]=258,vu[258]=28;var Fp=Tp(Ql,0),eb=Fp.b,Kd=Fp.r,bu=new wn(32768);for(var Kt=0;Kt<32768;++Kt){var $i=(Kt&43690)>>1|(Kt&21845)<<1;$i=($i&52428)>>2|($i&13107)<<2,$i=($i&61680)>>4|($i&3855)<<4,bu[Kt]=(($i&65280)>>8|($i&255)<<8)>>1}var ti=function(n,e,t){for(var r=n.length,i=0,s=new wn(e);i<r;++i)n[i]&&++s[n[i]-1];var a=new wn(e);for(i=1;i<e;++i)a[i]=a[i-1]+s[i-1]<<1;var c;if(t){c=new wn(1<<e);var l=15-e;for(i=0;i<r;++i)if(n[i])for(var f=i<<4|n[i],g=e-n[i],m=a[n[i]-1]++<<g,y=m|(1<<g)-1;m<=y;++m)c[bu[m]>>l]=f}else for(c=new wn(r),i=0;i<r;++i)n[i]&&(c[i]=bu[a[n[i]-1]++]>>15-n[i]);return c},Zi=new Hr(288);for(var Kt=0;Kt<144;++Kt)Zi[Kt]=8;for(var Kt=144;Kt<256;++Kt)Zi[Kt]=9;for(var Kt=256;Kt<280;++Kt)Zi[Kt]=7;for(var Kt=280;Kt<288;++Kt)Zi[Kt]=8;var No=new Hr(32);for(var Kt=0;Kt<32;++Kt)No[Kt]=5;var tb=ti(Zi,9,0),rb=ti(Zi,9,1),nb=ti(No,5,0),ib=ti(No,5,1),zc=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Mn=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},Wc=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},bh=function(n){return(n+7)/8|0},Dp=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new Hr(n.subarray(e,t))},sb=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],$n=function(n,e,t){var r=new Error(e||sb[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,$n),!t)throw r;return r},ab=function(n,e,t,r){var i=n.length,s=0;if(!i||e.f&&!e.l)return t||new Hr(0);var a=!t,c=a||e.i!=2,l=e.i;a&&(t=new Hr(i*3));var f=function(Le){var Te=t.length;if(Le>Te){var Ne=new Hr(Math.max(Te*2,Le));Ne.set(t),t=Ne}},g=e.f||0,m=e.p||0,y=e.b||0,v=e.l,k=e.d,S=e.m,j=e.n,w=i*8;do{if(!v){g=Mn(n,m,1);var C=Mn(n,m+1,3);if(m+=3,C)if(C==1)v=rb,k=ib,S=9,j=5;else if(C==2){var te=Mn(n,m,31)+257,G=Mn(n,m+10,15)+4,M=te+Mn(n,m+5,31)+1;m+=14;for(var z=new Hr(M),W=new Hr(19),N=0;N<G;++N)W[mu[N]]=Mn(n,m+N*3,7);m+=G*3;for(var T=zc(W),V=(1<<T)-1,U=ti(W,T,1),N=0;N<M;){var ne=U[Mn(n,m,V)];m+=ne&15;var F=ne>>4;if(F<16)z[N++]=F;else{var se=0,de=0;for(F==16?(de=3+Mn(n,m,3),m+=2,se=z[N-1]):F==17?(de=3+Mn(n,m,7),m+=3):F==18&&(de=11+Mn(n,m,127),m+=7);de--;)z[N++]=se}}var ie=z.subarray(0,te),fe=z.subarray(te);S=zc(ie),j=zc(fe),v=ti(ie,S,1),k=ti(fe,j,1)}else $n(1);else{var F=bh(m)+4,Z=n[F-4]|n[F-3]<<8,ae=F+Z;if(ae>i){l&&$n(0);break}c&&f(y+Z),t.set(n.subarray(F,ae),y),e.b=y+=Z,e.p=m=ae*8,e.f=g;continue}if(m>w){l&&$n(0);break}}c&&f(y+131072);for(var ve=(1<<S)-1,Fe=(1<<j)-1,P=m;;P=m){var se=v[Wc(n,m)&ve],D=se>>4;if(m+=se&15,m>w){l&&$n(0);break}if(se||$n(2),D<256)t[y++]=D;else if(D==256){P=m,v=null;break}else{var q=D-254;if(D>264){var N=D-257,H=Xl[N];q=Mn(n,m,(1<<H)-1)+Op[N],m+=H}var Q=k[Wc(n,m)&Fe],he=Q>>4;Q||$n(3),m+=Q&15;var fe=eb[he];if(he>3){var H=Ql[he];fe+=Wc(n,m)&(1<<H)-1,m+=H}if(m>w){l&&$n(0);break}c&&f(y+131072);var me=y+q;if(y<fe){var pe=s-fe,Pe=Math.min(fe,me);for(pe+y<0&&$n(3);y<Pe;++y)t[y]=r[pe+y]}for(;y<me;++y)t[y]=t[y-fe]}}e.l=v,e.p=P,e.b=y,e.f=g,v&&(g=1,e.m=S,e.d=k,e.n=j)}while(!g);return y!=t.length&&a?Dp(t,0,y):t.subarray(0,y)},mi=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},po=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},Vc=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,s=t.slice();if(!i)return{t:Bp,l:0};if(i==1){var a=new Hr(t[0].s+1);return a[t[0].s]=1,{t:a,l:1}}t.sort(function(ae,te){return ae.f-te.f}),t.push({s:-1,f:25001});var c=t[0],l=t[1],f=0,g=1,m=2;for(t[0]={s:-1,f:c.f+l.f,l:c,r:l};g!=i-1;)c=t[t[f].f<t[m].f?f++:m++],l=t[f!=g&&t[f].f<t[m].f?f++:m++],t[g++]={s:-1,f:c.f+l.f,l:c,r:l};for(var y=s[0].s,r=1;r<i;++r)s[r].s>y&&(y=s[r].s);var v=new wn(y+1),k=yu(t[g-1],v,0);if(k>e){var r=0,S=0,j=k-e,w=1<<j;for(s.sort(function(te,G){return v[G.s]-v[te.s]||te.f-G.f});r<i;++r){var C=s[r].s;if(v[C]>e)S+=w-(1<<k-v[C]),v[C]=e;else break}for(S>>=j;S>0;){var F=s[r].s;v[F]<e?S-=1<<e-v[F]++-1:++r}for(;r>=0&&S;--r){var Z=s[r].s;v[Z]==e&&(--v[Z],++S)}k=e}return{t:new Hr(v),l:k}},yu=function(n,e,t){return n.s==-1?Math.max(yu(n.l,e,t+1),yu(n.r,e,t+1)):e[n.s]=t},Jd=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new wn(++e),r=0,i=n[0],s=1,a=function(l){t[r++]=l},c=1;c<=e;++c)if(n[c]==i&&c!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(i),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(i);s=1,i=n[c]}return{c:t.subarray(0,r),n:e}},go=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},Mp=function(n,e,t){var r=t.length,i=bh(e+2);n[i]=r&255,n[i+1]=r>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var s=0;s<r;++s)n[i+s+4]=t[s];return(i+4+r)*8},Yd=function(n,e,t,r,i,s,a,c,l,f,g){mi(e,g++,t),++i[256];for(var m=Vc(i,15),y=m.t,v=m.l,k=Vc(s,15),S=k.t,j=k.l,w=Jd(y),C=w.c,F=w.n,Z=Jd(S),ae=Z.c,te=Z.n,G=new wn(19),M=0;M<C.length;++M)++G[C[M]&31];for(var M=0;M<ae.length;++M)++G[ae[M]&31];for(var z=Vc(G,7),W=z.t,N=z.l,T=19;T>4&&!W[mu[T-1]];--T);var V=f+5<<3,U=go(i,Zi)+go(s,No)+a,ne=go(i,y)+go(s,S)+a+14+3*T+go(G,W)+2*G[16]+3*G[17]+7*G[18];if(l>=0&&V<=U&&V<=ne)return Mp(e,g,n.subarray(l,l+f));var se,de,ie,fe;if(mi(e,g,1+(ne<U)),g+=2,ne<U){se=ti(y,v,0),de=y,ie=ti(S,j,0),fe=S;var ve=ti(W,N,0);mi(e,g,F-257),mi(e,g+5,te-1),mi(e,g+10,T-4),g+=14;for(var M=0;M<T;++M)mi(e,g+3*M,W[mu[M]]);g+=3*T;for(var Fe=[C,ae],P=0;P<2;++P)for(var D=Fe[P],M=0;M<D.length;++M){var q=D[M]&31;mi(e,g,ve[q]),g+=W[q],q>15&&(mi(e,g,D[M]>>5&127),g+=D[M]>>12)}}else se=tb,de=Zi,ie=nb,fe=No;for(var M=0;M<c;++M){var H=r[M];if(H>255){var q=H>>18&31;po(e,g,se[q+257]),g+=de[q+257],q>7&&(mi(e,g,H>>23&31),g+=Xl[q]);var Q=H&31;po(e,g,ie[Q]),g+=fe[Q],Q>3&&(po(e,g,H>>5&8191),g+=Ql[Q])}else po(e,g,se[H]),g+=de[H]}return po(e,g,se[256]),g+de[256]},ob=new vh([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Bp=new Hr(0),lb=function(n,e,t,r,i,s){var a=s.z||n.length,c=new Hr(r+a+5*(1+Math.ceil(a/7e3))+i),l=c.subarray(r,c.length-i),f=s.l,g=(s.r||0)&7;if(e){g&&(l[0]=s.r>>3);for(var m=ob[e-1],y=m>>13,v=m&8191,k=(1<<t)-1,S=s.p||new wn(32768),j=s.h||new wn(k+1),w=Math.ceil(t/3),C=2*w,F=function(Ye){return(n[Ye]^n[Ye+1]<<w^n[Ye+2]<<C)&k},Z=new vh(25e3),ae=new wn(288),te=new wn(32),G=0,M=0,z=s.i||0,W=0,N=s.w||0,T=0;z+2<a;++z){var V=F(z),U=z&32767,ne=j[V];if(S[U]=ne,j[V]=U,N<=z){var se=a-z;if((G>7e3||W>24576)&&(se>423||!f)){g=Yd(n,l,0,Z,ae,te,M,W,T,z-T,g),W=G=M=0,T=z;for(var de=0;de<286;++de)ae[de]=0;for(var de=0;de<30;++de)te[de]=0}var ie=2,fe=0,ve=v,Fe=U-ne&32767;if(se>2&&V==F(z-Fe))for(var P=Math.min(y,se)-1,D=Math.min(32767,z),q=Math.min(258,se);Fe<=D&&--ve&&U!=ne;){if(n[z+ie]==n[z+ie-Fe]){for(var H=0;H<q&&n[z+H]==n[z+H-Fe];++H);if(H>ie){if(ie=H,fe=Fe,H>P)break;for(var Q=Math.min(Fe,H-2),he=0,de=0;de<Q;++de){var me=z-Fe+de&32767,pe=S[me],Pe=me-pe&32767;Pe>he&&(he=Pe,ne=me)}}}U=ne,ne=S[U],Fe+=U-ne&32767}if(fe){Z[W++]=268435456|vu[ie]<<18|Kd[fe];var Le=vu[ie]&31,Te=Kd[fe]&31;M+=Xl[Le]+Ql[Te],++ae[257+Le],++te[Te],N=z+ie,++G}else Z[W++]=n[z],++ae[n[z]]}}for(z=Math.max(z,N);z<a;++z)Z[W++]=n[z],++ae[n[z]];g=Yd(n,l,f,Z,ae,te,M,W,T,z-T,g),f||(s.r=g&7|l[g/8|0]<<3,g-=7,s.h=j,s.p=S,s.i=z,s.w=N)}else{for(var z=s.w||0;z<a+f;z+=65535){var Ne=z+65535;Ne>=a&&(l[g/8|0]=f,Ne=a),g=Mp(l,g+1,n.subarray(z,Ne))}s.i=a}return Dp(c,0,r+bh(g)+i)},Up=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,s=t.length|0,a=0;a!=s;){for(var c=Math.min(a+2655,s);a<c;++a)i+=r+=t[a];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},cb=function(n,e,t,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),a=new Hr(s.length+n.length);a.set(s),a.set(n,s.length),n=a,i.w=s.length}return lb(n,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,i)},$p=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},ub=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var i=Up();i.p(e.dictionary),$p(n,2,i.d())}},hb=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&$n(6,"invalid zlib data"),(n[1]>>5&1)==1&&$n(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function wu(n,e){e||(e={});var t=Up();t.p(n);var r=cb(n,e,e.dictionary?6:2,4);return ub(r,e),$p(r,r.length-4,t.d()),r}function db(n,e){return ab(n.subarray(hb(n),-4),{i:2},e,e)}var fb=typeof TextDecoder<"u"&&new TextDecoder,pb=0;try{fb.decode(Bp,{stream:!0}),pb=1}catch{}var at=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Hc(){at.console&&typeof at.console.log=="function"&&at.console.log.apply(at.console,arguments)}var $t={log:Hc,warn:function(n){at.console&&(typeof at.console.warn=="function"?at.console.warn.apply(at.console,arguments):Hc.call(null,arguments))},error:function(n){at.console&&(typeof at.console.error=="function"?at.console.error.apply(at.console,arguments):Hc(n))}};function Gc(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){js(r.response,e,t)},r.onerror=function(){$t.error("could not download file")},r.send()}function Zd(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Sl(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var _o,xu,js=at.saveAs||((typeof window>"u"?"undefined":qt(window))!=="object"||window!==at?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=at.URL||at.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?Zd(i.href)?Gc(n,e,t):Sl(i,i.target="_blank"):Sl(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Sl(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(Zd(n))Gc(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){Sl(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:qt(s)!=="object"&&($t.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return Gc(n,e,t);var i=n.type==="application/octet-stream",s=/constructor/i.test(at.HTMLElement)||at.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&s)&&(typeof FileReader>"u"?"undefined":qt(FileReader))==="object"){var c=new FileReader;c.onloadend=function(){var g=c.result;g=a?g:g.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=g:location=g,r=null},c.readAsDataURL(n)}else{var l=at.URL||at.webkitURL,f=l.createObjectURL(n);r?r.location=f:location.href=f,r=null,setTimeout(function(){l.revokeObjectURL(f)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function qp(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(c){return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(c){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(c){return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,s=t[r].process,a=i.exec(n);a&&(e=s(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var c=this.r.toString(16),l=this.g.toString(16),f=this.b.toString(16);return c.length==1&&(c="0"+c),l.length==1&&(l="0"+l),f.length==1&&(f="0"+f),"#"+c+l+f}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Kc(n,e){var t=n[0],r=n[1],i=n[2],s=n[3];t=Ur(t,r,i,s,e[0],7,-680876936),s=Ur(s,t,r,i,e[1],12,-389564586),i=Ur(i,s,t,r,e[2],17,606105819),r=Ur(r,i,s,t,e[3],22,-1044525330),t=Ur(t,r,i,s,e[4],7,-176418897),s=Ur(s,t,r,i,e[5],12,1200080426),i=Ur(i,s,t,r,e[6],17,-1473231341),r=Ur(r,i,s,t,e[7],22,-45705983),t=Ur(t,r,i,s,e[8],7,1770035416),s=Ur(s,t,r,i,e[9],12,-1958414417),i=Ur(i,s,t,r,e[10],17,-42063),r=Ur(r,i,s,t,e[11],22,-1990404162),t=Ur(t,r,i,s,e[12],7,1804603682),s=Ur(s,t,r,i,e[13],12,-40341101),i=Ur(i,s,t,r,e[14],17,-1502002290),t=$r(t,r=Ur(r,i,s,t,e[15],22,1236535329),i,s,e[1],5,-165796510),s=$r(s,t,r,i,e[6],9,-1069501632),i=$r(i,s,t,r,e[11],14,643717713),r=$r(r,i,s,t,e[0],20,-373897302),t=$r(t,r,i,s,e[5],5,-701558691),s=$r(s,t,r,i,e[10],9,38016083),i=$r(i,s,t,r,e[15],14,-660478335),r=$r(r,i,s,t,e[4],20,-405537848),t=$r(t,r,i,s,e[9],5,568446438),s=$r(s,t,r,i,e[14],9,-1019803690),i=$r(i,s,t,r,e[3],14,-187363961),r=$r(r,i,s,t,e[8],20,1163531501),t=$r(t,r,i,s,e[13],5,-1444681467),s=$r(s,t,r,i,e[2],9,-51403784),i=$r(i,s,t,r,e[7],14,1735328473),t=qr(t,r=$r(r,i,s,t,e[12],20,-1926607734),i,s,e[5],4,-378558),s=qr(s,t,r,i,e[8],11,-2022574463),i=qr(i,s,t,r,e[11],16,1839030562),r=qr(r,i,s,t,e[14],23,-35309556),t=qr(t,r,i,s,e[1],4,-1530992060),s=qr(s,t,r,i,e[4],11,1272893353),i=qr(i,s,t,r,e[7],16,-155497632),r=qr(r,i,s,t,e[10],23,-1094730640),t=qr(t,r,i,s,e[13],4,681279174),s=qr(s,t,r,i,e[0],11,-358537222),i=qr(i,s,t,r,e[3],16,-722521979),r=qr(r,i,s,t,e[6],23,76029189),t=qr(t,r,i,s,e[9],4,-640364487),s=qr(s,t,r,i,e[12],11,-421815835),i=qr(i,s,t,r,e[15],16,530742520),t=zr(t,r=qr(r,i,s,t,e[2],23,-995338651),i,s,e[0],6,-198630844),s=zr(s,t,r,i,e[7],10,1126891415),i=zr(i,s,t,r,e[14],15,-1416354905),r=zr(r,i,s,t,e[5],21,-57434055),t=zr(t,r,i,s,e[12],6,1700485571),s=zr(s,t,r,i,e[3],10,-1894986606),i=zr(i,s,t,r,e[10],15,-1051523),r=zr(r,i,s,t,e[1],21,-2054922799),t=zr(t,r,i,s,e[8],6,1873313359),s=zr(s,t,r,i,e[15],10,-30611744),i=zr(i,s,t,r,e[6],15,-1560198380),r=zr(r,i,s,t,e[13],21,1309151649),t=zr(t,r,i,s,e[4],6,-145523070),s=zr(s,t,r,i,e[11],10,-1120210379),i=zr(i,s,t,r,e[2],15,718787259),r=zr(r,i,s,t,e[9],21,-343485551),n[0]=Hi(t,n[0]),n[1]=Hi(r,n[1]),n[2]=Hi(i,n[2]),n[3]=Hi(s,n[3])}function ec(n,e,t,r,i,s){return e=Hi(Hi(e,n),Hi(r,s)),Hi(e<<i|e>>>32-i,t)}function Ur(n,e,t,r,i,s,a){return ec(e&t|~e&r,n,e,i,s,a)}function $r(n,e,t,r,i,s,a){return ec(e&r|t&~r,n,e,i,s,a)}function qr(n,e,t,r,i,s,a){return ec(e^t^r,n,e,i,s,a)}function zr(n,e,t,r,i,s,a){return ec(t^(e|~r),n,e,i,s,a)}function zp(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)Kc(r,gb(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(Kc(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,Kc(r,i),r}function gb(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}_o=at.atob.bind(at),xu=at.btoa.bind(at);var Xd="0123456789abcdef".split("");function mb(n){for(var e="",t=0;t<4;t++)e+=Xd[n>>8*t+4&15]+Xd[n>>8*t&15];return e}function vb(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function _u(n){return zp(n).map(vb).join("")}var bb=function(n){for(var e=0;e<n.length;e++)n[e]=mb(n[e]);return n.join("")}(zp("hello"))!="5d41402abc4b2a76b9719d911017c592";function Hi(n,e){if(bb){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Su(n,e){var t,r,i,s;if(n!==t){for(var a=(i=n,s=1+(256/n.length>>0),new Array(s+1).join(i)),c=[],l=0;l<256;l++)c[l]=l;var f=0;for(l=0;l<256;l++){var g=c[l];f=(f+g+a.charCodeAt(l))%256,c[l]=c[f],c[f]=g}t=n,r=c}else c=r;var m=e.length,y=0,v=0,k="";for(l=0;l<m;l++)v=(v+(g=c[y=(y+1)%256]))%256,c[y]=c[v],c[v]=g,a=c[(c[y]+c[v])%256],k+=String.fromCharCode(e.charCodeAt(l)^a);return k}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Qd={print:4,modify:8,copy:16,"annot-forms":32};function xa(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach(function(c){if(Qd.perm!==void 0)throw new Error("Invalid permission: "+c);i+=Qd[c]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(e+this.padding).substr(0,32),a=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^i)),this.encryptionKey=_u(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Su(this.encryptionKey,this.padding)}function _a(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=n[r]}return e}function ef(n){if(qt(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var s=Math.random().toString(35);return e[t][s]=[r,!!i],s},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[t]){var a=e[t][s];try{a[0].apply(n,r)}catch(c){at.console&&$t.error("jsPDF PubSub Error",c.message,c)}a[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function ql(n){if(!(this instanceof ql))return new ql(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function Wp(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function ks(n,e,t,r,i){if(!(this instanceof ks))return new ks(n,e,t,r,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,Wp.call(this,r,i)}function Sa(n,e,t,r,i){if(!(this instanceof Sa))return new Sa(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,Wp.call(this,r,i)}function it(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],a=[],c=1,l=16,f="S",g=null;qt(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,i=n.format||i,s=n.compress||n.compressPdf||s,(g=n.encryption||null)!==null&&(g.userPassword=g.userPassword||"",g.ownerPassword=g.ownerPassword||"",g.userPermissions=g.userPermissions||[]),c=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(l=n.floatPrecision),f=n.defaultPathOperation||"S"),a=n.filters||(s===!0?["FlateEncode"]:a),r=r||"mm",t=(""+(t||"P")).toLowerCase();var m=n.putOnlyUsedFonts||!1,y={},v={internal:{},__private__:{}};v.__private__.PubSub=ef;var k="1.3",S=v.__private__.getPdfVersion=function(){return k};v.__private__.setPdfVersion=function(d){k=d};var j={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};v.__private__.getPageFormats=function(){return j};var w=v.__private__.getPageFormat=function(d){return j[d]};i=i||"a4";var C={COMPAT:"compat",ADVANCED:"advanced"},F=C.COMPAT;function Z(){this.saveGraphicsState(),$(new Ue(Me,0,0,-Me,0,Ci()*Me).toString()+" cm"),this.setFontSize(this.getFontSize()/Me),f="n",F=C.ADVANCED}function ae(){this.restoreGraphicsState(),f="S",F=C.COMPAT}var te=v.__private__.combineFontStyleAndFontWeight=function(d,_){if(d=="bold"&&_=="normal"||d=="bold"&&_==400||d=="normal"&&_=="italic"||d=="bold"&&_=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return _&&(d=_==400||_==="normal"?d==="italic"?"italic":"normal":_!=700&&_!=="bold"||d!=="normal"?(_==700?"bold":_)+""+d:"bold"),d};v.advancedAPI=function(d){var _=F===C.COMPAT;return _&&Z.call(this),typeof d!="function"||(d(this),_&&ae.call(this)),this},v.compatAPI=function(d){var _=F===C.ADVANCED;return _&&ae.call(this),typeof d!="function"||(d(this),_&&Z.call(this)),this},v.isAdvancedAPI=function(){return F===C.ADVANCED};var G,M=function(d){if(F!==C.ADVANCED)throw new Error(d+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},z=v.roundToPrecision=v.__private__.roundToPrecision=function(d,_){var B=e||_;if(isNaN(d)||isNaN(B))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return d.toFixed(B).replace(/0+$/,"")};G=v.hpf=v.__private__.hpf=typeof l=="number"?function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.hpf");return z(d,l)}:l==="smart"?function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.hpf");return z(d,d>-1&&d<1?16:5)}:function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.hpf");return z(d,16)};var W=v.f2=v.__private__.f2=function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.f2");return z(d,2)},N=v.__private__.f3=function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.f3");return z(d,3)},T=v.scale=v.__private__.scale=function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.scale");return F===C.COMPAT?d*Me:F===C.ADVANCED?d:void 0},V=function(d){return F===C.COMPAT?Ci()-d:F===C.ADVANCED?d:void 0},U=function(d){return T(V(d))};v.__private__.setPrecision=v.setPrecision=function(d){typeof parseInt(d,10)=="number"&&(e=parseInt(d,10))};var ne,se="00000000000000000000000000000000",de=v.__private__.getFileId=function(){return se},ie=v.__private__.setFileId=function(d){return se=d!==void 0&&/^[a-fA-F0-9]{32}$/.test(d)?d.toUpperCase():se.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),g!==null&&(Dr=new xa(g.userPermissions,g.userPassword,g.ownerPassword,se)),se};v.setFileId=function(d){return ie(d),this},v.getFileId=function(){return de()};var fe=v.__private__.convertDateToPDFDate=function(d){var _=d.getTimezoneOffset(),B=_<0?"+":"-",K=Math.floor(Math.abs(_/60)),le=Math.abs(_%60),we=[B,q(K),"'",q(le),"'"].join("");return["D:",d.getFullYear(),q(d.getMonth()+1),q(d.getDate()),q(d.getHours()),q(d.getMinutes()),q(d.getSeconds()),we].join("")},ve=v.__private__.convertPDFDateToDate=function(d){var _=parseInt(d.substr(2,4),10),B=parseInt(d.substr(6,2),10)-1,K=parseInt(d.substr(8,2),10),le=parseInt(d.substr(10,2),10),we=parseInt(d.substr(12,2),10),Ce=parseInt(d.substr(14,2),10);return new Date(_,B,K,le,we,Ce,0)},Fe=v.__private__.setCreationDate=function(d){var _;if(d===void 0&&(d=new Date),d instanceof Date)_=fe(d);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(d))throw new Error("Invalid argument passed to jsPDF.setCreationDate");_=d}return ne=_},P=v.__private__.getCreationDate=function(d){var _=ne;return d==="jsDate"&&(_=ve(ne)),_};v.setCreationDate=function(d){return Fe(d),this},v.getCreationDate=function(d){return P(d)};var D,q=v.__private__.padd2=function(d){return("0"+parseInt(d)).slice(-2)},H=v.__private__.padd2Hex=function(d){return("00"+(d=d.toString())).substr(d.length)},Q=0,he=[],me=[],pe=0,Pe=[],Le=[],Te=!1,Ne=me,Ye=function(){Q=0,pe=0,me=[],he=[],Pe=[],_n=Wt(),Qr=Wt()};v.__private__.setCustomOutputDestination=function(d){Te=!0,Ne=d};var be=function(d){Te||(Ne=d)};v.__private__.resetCustomOutputDestination=function(){Te=!1,Ne=me};var $=v.__private__.out=function(d){return d=d.toString(),pe+=d.length+1,Ne.push(d),Ne},nt=v.__private__.write=function(d){return $(arguments.length===1?d.toString():Array.prototype.join.call(arguments," "))},ze=v.__private__.getArrayBuffer=function(d){for(var _=d.length,B=new ArrayBuffer(_),K=new Uint8Array(B);_--;)K[_]=d.charCodeAt(_);return B},Ae=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];v.__private__.getStandardFonts=function(){return Ae};var Ie=n.fontSize||16;v.__private__.setFontSize=v.setFontSize=function(d){return Ie=F===C.ADVANCED?d/Me:d,this};var Ee,Re=v.__private__.getFontSize=v.getFontSize=function(){return F===C.COMPAT?Ie:Ie*Me},Ge=n.R2L||!1;v.__private__.setR2L=v.setR2L=function(d){return Ge=d,this},v.__private__.getR2L=v.getR2L=function(){return Ge};var Oe,ot=v.__private__.setZoomMode=function(d){var _=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(d))Ee=d;else if(isNaN(d)){if(_.indexOf(d)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+d+'" is not recognized.');Ee=d}else Ee=parseInt(d,10)};v.__private__.getZoomMode=function(){return Ee};var ct,vt=v.__private__.setPageMode=function(d){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(d)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+d+'" is not recognized.');Oe=d};v.__private__.getPageMode=function(){return Oe};var It=v.__private__.setLayoutMode=function(d){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(d)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+d+'" is not recognized.');ct=d};v.__private__.getLayoutMode=function(){return ct},v.__private__.setDisplayMode=v.setDisplayMode=function(d,_,B){return ot(d),It(_),vt(B),this};var tt={title:"",subject:"",author:"",keywords:"",creator:""};v.__private__.getDocumentProperty=function(d){if(Object.keys(tt).indexOf(d)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return tt[d]},v.__private__.getDocumentProperties=function(){return tt},v.__private__.setDocumentProperties=v.setProperties=v.setDocumentProperties=function(d){for(var _ in tt)tt.hasOwnProperty(_)&&d[_]&&(tt[_]=d[_]);return this},v.__private__.setDocumentProperty=function(d,_){if(Object.keys(tt).indexOf(d)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return tt[d]=_};var dt,Me,lr,bt,Or,yt={},At={},Er=[],_t={},xn={},zt={},xr={},Fr=null,Dt=0,st=[],St=new ef(v),xe=n.hotfixes||[],We={},Xe={},ft=[],Ue=function d(_,B,K,le,we,Ce){if(!(this instanceof d))return new d(_,B,K,le,we,Ce);isNaN(_)&&(_=1),isNaN(B)&&(B=0),isNaN(K)&&(K=0),isNaN(le)&&(le=1),isNaN(we)&&(we=0),isNaN(Ce)&&(Ce=0),this._matrix=[_,B,K,le,we,Ce]};Object.defineProperty(Ue.prototype,"sx",{get:function(){return this._matrix[0]},set:function(d){this._matrix[0]=d}}),Object.defineProperty(Ue.prototype,"shy",{get:function(){return this._matrix[1]},set:function(d){this._matrix[1]=d}}),Object.defineProperty(Ue.prototype,"shx",{get:function(){return this._matrix[2]},set:function(d){this._matrix[2]=d}}),Object.defineProperty(Ue.prototype,"sy",{get:function(){return this._matrix[3]},set:function(d){this._matrix[3]=d}}),Object.defineProperty(Ue.prototype,"tx",{get:function(){return this._matrix[4]},set:function(d){this._matrix[4]=d}}),Object.defineProperty(Ue.prototype,"ty",{get:function(){return this._matrix[5]},set:function(d){this._matrix[5]=d}}),Object.defineProperty(Ue.prototype,"a",{get:function(){return this._matrix[0]},set:function(d){this._matrix[0]=d}}),Object.defineProperty(Ue.prototype,"b",{get:function(){return this._matrix[1]},set:function(d){this._matrix[1]=d}}),Object.defineProperty(Ue.prototype,"c",{get:function(){return this._matrix[2]},set:function(d){this._matrix[2]=d}}),Object.defineProperty(Ue.prototype,"d",{get:function(){return this._matrix[3]},set:function(d){this._matrix[3]=d}}),Object.defineProperty(Ue.prototype,"e",{get:function(){return this._matrix[4]},set:function(d){this._matrix[4]=d}}),Object.defineProperty(Ue.prototype,"f",{get:function(){return this._matrix[5]},set:function(d){this._matrix[5]=d}}),Object.defineProperty(Ue.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ue.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ue.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ue.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ue.prototype.join=function(d){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(G).join(d)},Ue.prototype.multiply=function(d){var _=d.sx*this.sx+d.shy*this.shx,B=d.sx*this.shy+d.shy*this.sy,K=d.shx*this.sx+d.sy*this.shx,le=d.shx*this.shy+d.sy*this.sy,we=d.tx*this.sx+d.ty*this.shx+this.tx,Ce=d.tx*this.shy+d.ty*this.sy+this.ty;return new Ue(_,B,K,le,we,Ce)},Ue.prototype.decompose=function(){var d=this.sx,_=this.shy,B=this.shx,K=this.sy,le=this.tx,we=this.ty,Ce=Math.sqrt(d*d+_*_),$e=(d/=Ce)*B+(_/=Ce)*K;B-=d*$e,K-=_*$e;var et=Math.sqrt(B*B+K*K);return $e/=et,d*(K/=et)<_*(B/=et)&&(d=-d,_=-_,$e=-$e,Ce=-Ce),{scale:new Ue(Ce,0,0,et,0,0),translate:new Ue(1,0,0,1,le,we),rotate:new Ue(d,_,-_,d,0,0),skew:new Ue(1,0,$e,1,0,0)}},Ue.prototype.toString=function(d){return this.join(" ")},Ue.prototype.inversed=function(){var d=this.sx,_=this.shy,B=this.shx,K=this.sy,le=this.tx,we=this.ty,Ce=1/(d*K-_*B),$e=K*Ce,et=-_*Ce,pt=-B*Ce,ut=d*Ce;return new Ue($e,et,pt,ut,-$e*le-pt*we,-et*le-ut*we)},Ue.prototype.applyToPoint=function(d){var _=d.x*this.sx+d.y*this.shx+this.tx,B=d.x*this.shy+d.y*this.sy+this.ty;return new Ks(_,B)},Ue.prototype.applyToRectangle=function(d){var _=this.applyToPoint(d),B=this.applyToPoint(new Ks(d.x+d.w,d.y+d.h));return new za(_.x,_.y,B.x-_.x,B.y-_.y)},Ue.prototype.clone=function(){var d=this.sx,_=this.shy,B=this.shx,K=this.sy,le=this.tx,we=this.ty;return new Ue(d,_,B,K,le,we)},v.Matrix=Ue;var Zt=v.matrixMult=function(d,_){return _.multiply(d)},jt=new Ue(1,0,0,1,0,0);v.unitMatrix=v.identityMatrix=jt;var cr=function(d,_){if(!xn[d]){var B=(_ instanceof ks?"Sh":"P")+(Object.keys(_t).length+1).toString(10);_.id=B,xn[d]=B,_t[B]=_,St.publish("addPattern",_)}};v.ShadingPattern=ks,v.TilingPattern=Sa,v.addShadingPattern=function(d,_){return M("addShadingPattern()"),cr(d,_),this},v.beginTilingPattern=function(d){M("beginTilingPattern()"),Vo(d.boundingBox[0],d.boundingBox[1],d.boundingBox[2]-d.boundingBox[0],d.boundingBox[3]-d.boundingBox[1],d.matrix)},v.endTilingPattern=function(d,_){M("endTilingPattern()"),_.stream=Le[D].join(`
`),cr(d,_),St.publish("endTilingPattern",_),ft.pop().restore()};var Mt=v.__private__.newObject=function(){var d=Wt();return kr(d,!0),d},Wt=v.__private__.newObjectDeferred=function(){return Q++,he[Q]=function(){return pe},Q},kr=function(d,_){return _=typeof _=="boolean"&&_,he[d]=pe,_&&$(d+" 0 obj"),d},si=v.__private__.newAdditionalObject=function(){var d={objId:Wt(),content:""};return Pe.push(d),d},_n=Wt(),Qr=Wt(),en=v.__private__.decodeColorString=function(d){var _=d.split(" ");if(_.length!==2||_[1]!=="g"&&_[1]!=="G")_.length===5&&(_[4]==="k"||_[4]==="K")&&(_=[(1-_[0])*(1-_[3]),(1-_[1])*(1-_[3]),(1-_[2])*(1-_[3]),"r"]);else{var B=parseFloat(_[0]);_=[B,B,B,"r"]}for(var K="#",le=0;le<3;le++)K+=("0"+Math.floor(255*parseFloat(_[le])).toString(16)).slice(-2);return K},tn=v.__private__.encodeColorString=function(d){var _;typeof d=="string"&&(d={ch1:d});var B=d.ch1,K=d.ch2,le=d.ch3,we=d.ch4,Ce=d.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof B=="string"&&B.charAt(0)!=="#"){var $e=new qp(B);if($e.ok)B=$e.toHex();else if(!/^\d*\.?\d*$/.test(B))throw new Error('Invalid color "'+B+'" passed to jsPDF.encodeColorString.')}if(typeof B=="string"&&/^#[0-9A-Fa-f]{3}$/.test(B)&&(B="#"+B[1]+B[1]+B[2]+B[2]+B[3]+B[3]),typeof B=="string"&&/^#[0-9A-Fa-f]{6}$/.test(B)){var et=parseInt(B.substr(1),16);B=et>>16&255,K=et>>8&255,le=255&et}if(K===void 0||we===void 0&&B===K&&K===le)if(typeof B=="string")_=B+" "+Ce[0];else switch(d.precision){case 2:_=W(B/255)+" "+Ce[0];break;case 3:default:_=N(B/255)+" "+Ce[0]}else if(we===void 0||qt(we)==="object"){if(we&&!isNaN(we.a)&&we.a===0)return _=["1.","1.","1.",Ce[1]].join(" ");if(typeof B=="string")_=[B,K,le,Ce[1]].join(" ");else switch(d.precision){case 2:_=[W(B/255),W(K/255),W(le/255),Ce[1]].join(" ");break;default:case 3:_=[N(B/255),N(K/255),N(le/255),Ce[1]].join(" ")}}else if(typeof B=="string")_=[B,K,le,we,Ce[2]].join(" ");else switch(d.precision){case 2:_=[W(B),W(K),W(le),W(we),Ce[2]].join(" ");break;case 3:default:_=[N(B),N(K),N(le),N(we),Ce[2]].join(" ")}return _},fn=v.__private__.getFilters=function(){return a},Kr=v.__private__.putStream=function(d){var _=(d=d||{}).data||"",B=d.filters||fn(),K=d.alreadyAppliedFilters||[],le=d.addLength1||!1,we=_.length,Ce=d.objectId,$e=function(Mr){return Mr};if(g!==null&&Ce===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");g!==null&&($e=Dr.encryptor(Ce,0));var et={};B===!0&&(B=["FlateEncode"]);var pt=d.additionalKeyValues||[],ut=(et=it.API.processDataByFilters!==void 0?it.API.processDataByFilters(_,B):{data:_,reverseChain:[]}).reverseChain+(Array.isArray(K)?K.join(" "):K.toString());if(et.data.length!==0&&(pt.push({key:"Length",value:et.data.length}),le===!0&&pt.push({key:"Length1",value:we})),ut.length!=0)if(ut.split("/").length-1==1)pt.push({key:"Filter",value:ut});else{pt.push({key:"Filter",value:"["+ut+"]"});for(var kt=0;kt<pt.length;kt+=1)if(pt[kt].key==="DecodeParms"){for(var er=[],rr=0;rr<et.reverseChain.split("/").length-1;rr+=1)er.push("null");er.push(pt[kt].value),pt[kt].value="["+er.join(" ")+"]"}}$("<<");for(var mr=0;mr<pt.length;mr++)$("/"+pt[mr].key+" "+pt[mr].value);$(">>"),et.data.length!==0&&($("stream"),$($e(et.data)),$("endstream"))},pn=v.__private__.putPage=function(d){var _=d.number,B=d.data,K=d.objId,le=d.contentsObjId;kr(K,!0),$("<</Type /Page"),$("/Parent "+d.rootDictionaryObjId+" 0 R"),$("/Resources "+d.resourceDictionaryObjId+" 0 R"),$("/MediaBox ["+parseFloat(G(d.mediaBox.bottomLeftX))+" "+parseFloat(G(d.mediaBox.bottomLeftY))+" "+G(d.mediaBox.topRightX)+" "+G(d.mediaBox.topRightY)+"]"),d.cropBox!==null&&$("/CropBox ["+G(d.cropBox.bottomLeftX)+" "+G(d.cropBox.bottomLeftY)+" "+G(d.cropBox.topRightX)+" "+G(d.cropBox.topRightY)+"]"),d.bleedBox!==null&&$("/BleedBox ["+G(d.bleedBox.bottomLeftX)+" "+G(d.bleedBox.bottomLeftY)+" "+G(d.bleedBox.topRightX)+" "+G(d.bleedBox.topRightY)+"]"),d.trimBox!==null&&$("/TrimBox ["+G(d.trimBox.bottomLeftX)+" "+G(d.trimBox.bottomLeftY)+" "+G(d.trimBox.topRightX)+" "+G(d.trimBox.topRightY)+"]"),d.artBox!==null&&$("/ArtBox ["+G(d.artBox.bottomLeftX)+" "+G(d.artBox.bottomLeftY)+" "+G(d.artBox.topRightX)+" "+G(d.artBox.topRightY)+"]"),typeof d.userUnit=="number"&&d.userUnit!==1&&$("/UserUnit "+d.userUnit),St.publish("putPage",{objId:K,pageContext:st[_],pageNumber:_,page:B}),$("/Contents "+le+" 0 R"),$(">>"),$("endobj");var we=B.join(`
`);return F===C.ADVANCED&&(we+=`
Q`),kr(le,!0),Kr({data:we,filters:fn(),objectId:le}),$("endobj"),K},ai=v.__private__.putPages=function(){var d,_,B=[];for(d=1;d<=Dt;d++)st[d].objId=Wt(),st[d].contentsObjId=Wt();for(d=1;d<=Dt;d++)B.push(pn({number:d,data:Le[d],objId:st[d].objId,contentsObjId:st[d].contentsObjId,mediaBox:st[d].mediaBox,cropBox:st[d].cropBox,bleedBox:st[d].bleedBox,trimBox:st[d].trimBox,artBox:st[d].artBox,userUnit:st[d].userUnit,rootDictionaryObjId:_n,resourceDictionaryObjId:Qr}));kr(_n,!0),$("<</Type /Pages");var K="/Kids [";for(_=0;_<Dt;_++)K+=B[_]+" 0 R ";$(K+"]"),$("/Count "+Dt),$(">>"),$("endobj"),St.publish("postPutPages")},_i=function(d){St.publish("putFont",{font:d,out:$,newObject:Mt,putStream:Kr}),d.isAlreadyPutted!==!0&&(d.objectNumber=Mt(),$("<<"),$("/Type /Font"),$("/BaseFont /"+_a(d.postScriptName)),$("/Subtype /Type1"),typeof d.encoding=="string"&&$("/Encoding /"+d.encoding),$("/FirstChar 32"),$("/LastChar 255"),$(">>"),$("endobj"))},gn=function(){for(var d in yt)yt.hasOwnProperty(d)&&(m===!1||m===!0&&y.hasOwnProperty(d))&&_i(yt[d])},rn=function(d){d.objectNumber=Mt();var _=[];_.push({key:"Type",value:"/XObject"}),_.push({key:"Subtype",value:"/Form"}),_.push({key:"BBox",value:"["+[G(d.x),G(d.y),G(d.x+d.width),G(d.y+d.height)].join(" ")+"]"}),_.push({key:"Matrix",value:"["+d.matrix.toString()+"]"});var B=d.pages[1].join(`
`);Kr({data:B,additionalKeyValues:_,objectId:d.objectNumber}),$("endobj")},Tn=function(){for(var d in We)We.hasOwnProperty(d)&&rn(We[d])},Ms=function(d,_){var B,K=[],le=1/(_-1);for(B=0;B<1;B+=le)K.push(B);if(K.push(1),d[0].offset!=0){var we={offset:0,color:d[0].color};d.unshift(we)}if(d[d.length-1].offset!=1){var Ce={offset:1,color:d[d.length-1].color};d.push(Ce)}for(var $e="",et=0,pt=0;pt<K.length;pt++){for(B=K[pt];B>d[et+1].offset;)et++;var ut=d[et].offset,kt=(B-ut)/(d[et+1].offset-ut),er=d[et].color,rr=d[et+1].color;$e+=H(Math.round((1-kt)*er[0]+kt*rr[0]).toString(16))+H(Math.round((1-kt)*er[1]+kt*rr[1]).toString(16))+H(Math.round((1-kt)*er[2]+kt*rr[2]).toString(16))}return $e.trim()},rs=function(d,_){_||(_=21);var B=Mt(),K=Ms(d.colors,_),le=[];le.push({key:"FunctionType",value:"0"}),le.push({key:"Domain",value:"[0.0 1.0]"}),le.push({key:"Size",value:"["+_+"]"}),le.push({key:"BitsPerSample",value:"8"}),le.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),le.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Kr({data:K,additionalKeyValues:le,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:B}),$("endobj"),d.objectNumber=Mt(),$("<< /ShadingType "+d.type),$("/ColorSpace /DeviceRGB");var we="/Coords ["+G(parseFloat(d.coords[0]))+" "+G(parseFloat(d.coords[1]))+" ";d.type===2?we+=G(parseFloat(d.coords[2]))+" "+G(parseFloat(d.coords[3])):we+=G(parseFloat(d.coords[2]))+" "+G(parseFloat(d.coords[3]))+" "+G(parseFloat(d.coords[4]))+" "+G(parseFloat(d.coords[5])),$(we+="]"),d.matrix&&$("/Matrix ["+d.matrix.toString()+"]"),$("/Function "+B+" 0 R"),$("/Extend [true true]"),$(">>"),$("endobj")},Ta=function(d,_){var B=Wt(),K=Mt();_.push({resourcesOid:B,objectOid:K}),d.objectNumber=K;var le=[];le.push({key:"Type",value:"/Pattern"}),le.push({key:"PatternType",value:"1"}),le.push({key:"PaintType",value:"1"}),le.push({key:"TilingType",value:"1"}),le.push({key:"BBox",value:"["+d.boundingBox.map(G).join(" ")+"]"}),le.push({key:"XStep",value:G(d.xStep)}),le.push({key:"YStep",value:G(d.yStep)}),le.push({key:"Resources",value:B+" 0 R"}),d.matrix&&le.push({key:"Matrix",value:"["+d.matrix.toString()+"]"}),Kr({data:d.stream,additionalKeyValues:le,objectId:d.objectNumber}),$("endobj")},Si=function(d){var _;for(_ in _t)_t.hasOwnProperty(_)&&(_t[_]instanceof ks?rs(_t[_]):_t[_]instanceof Sa&&Ta(_t[_],d))},Bs=function(d){for(var _ in d.objectNumber=Mt(),$("<<"),d)switch(_){case"opacity":$("/ca "+W(d[_]));break;case"stroke-opacity":$("/CA "+W(d[_]))}$(">>"),$("endobj")},Ra=function(){var d;for(d in zt)zt.hasOwnProperty(d)&&Bs(zt[d])},ns=function(){for(var d in $("/XObject <<"),We)We.hasOwnProperty(d)&&We[d].objectNumber>=0&&$("/"+d+" "+We[d].objectNumber+" 0 R");St.publish("putXobjectDict"),$(">>")},is=function(){Dr.oid=Mt(),$("<<"),$("/Filter /Standard"),$("/V "+Dr.v),$("/R "+Dr.r),$("/U <"+Dr.toHexString(Dr.U)+">"),$("/O <"+Dr.toHexString(Dr.O)+">"),$("/P "+Dr.P),$(">>"),$("endobj")},ji=function(){for(var d in $("/Font <<"),yt)yt.hasOwnProperty(d)&&(m===!1||m===!0&&y.hasOwnProperty(d))&&$("/"+d+" "+yt[d].objectNumber+" 0 R");$(">>")},ss=function(){if(Object.keys(_t).length>0){for(var d in $("/Shading <<"),_t)_t.hasOwnProperty(d)&&_t[d]instanceof ks&&_t[d].objectNumber>=0&&$("/"+d+" "+_t[d].objectNumber+" 0 R");St.publish("putShadingPatternDict"),$(">>")}},Ai=function(d){if(Object.keys(_t).length>0){for(var _ in $("/Pattern <<"),_t)_t.hasOwnProperty(_)&&_t[_]instanceof v.TilingPattern&&_t[_].objectNumber>=0&&_t[_].objectNumber<d&&$("/"+_+" "+_t[_].objectNumber+" 0 R");St.publish("putTilingPatternDict"),$(">>")}},Oa=function(){if(Object.keys(zt).length>0){var d;for(d in $("/ExtGState <<"),zt)zt.hasOwnProperty(d)&&zt[d].objectNumber>=0&&$("/"+d+" "+zt[d].objectNumber+" 0 R");St.publish("putGStateDict"),$(">>")}},Xt=function(d){kr(d.resourcesOid,!0),$("<<"),$("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ji(),ss(),Ai(d.objectOid),Oa(),ns(),$(">>"),$("endobj")},Us=function(){var d=[];gn(),Ra(),Tn(),Si(d),St.publish("putResources"),d.forEach(Xt),Xt({resourcesOid:Qr,objectOid:Number.MAX_SAFE_INTEGER}),St.publish("postPutResources")},as=function(){St.publish("putAdditionalObjects");for(var d=0;d<Pe.length;d++){var _=Pe[d];kr(_.objId,!0),$(_.content),$("endobj")}St.publish("postPutAdditionalObjects")},$s=function(d){At[d.fontName]=At[d.fontName]||{},At[d.fontName][d.fontStyle]=d.id},os=function(d,_,B,K,le){var we={id:"F"+(Object.keys(yt).length+1).toString(10),postScriptName:d,fontName:_,fontStyle:B,encoding:K,isStandardFont:le||!1,metadata:{}};return St.publish("addFont",{font:we,instance:this}),yt[we.id]=we,$s(we),we.id},qs=function(d){for(var _=0,B=Ae.length;_<B;_++){var K=os.call(this,d[_][0],d[_][1],d[_][2],Ae[_][3],!0);m===!1&&(y[K]=!0);var le=d[_][0].split("-");$s({id:K,fontName:le[0],fontStyle:le[1]||""})}St.publish("addFonts",{fonts:yt,dictionary:At})},oe=function(d){return d.foo=function(){try{return d.apply(this,arguments)}catch(K){var _=K.stack||"";~_.indexOf(" at ")&&(_=_.split(" at ")[1]);var B="Error in function "+_.split(`
`)[0].split("<")[0]+": "+K.message;if(!at.console)throw new Error(B);at.console.error(B,K),at.alert&&alert(B)}},d.foo.bar=d,d.foo},Je=function(d,_){var B,K,le,we,Ce,$e,et,pt,ut;if(le=(_=_||{}).sourceEncoding||"Unicode",Ce=_.outputEncoding,(_.autoencode||Ce)&&yt[dt].metadata&&yt[dt].metadata[le]&&yt[dt].metadata[le].encoding&&(we=yt[dt].metadata[le].encoding,!Ce&&yt[dt].encoding&&(Ce=yt[dt].encoding),!Ce&&we.codePages&&(Ce=we.codePages[0]),typeof Ce=="string"&&(Ce=we[Ce]),Ce)){for(et=!1,$e=[],B=0,K=d.length;B<K;B++)(pt=Ce[d.charCodeAt(B)])?$e.push(String.fromCharCode(pt)):$e.push(d[B]),$e[B].charCodeAt(0)>>8&&(et=!0);d=$e.join("")}for(B=d.length;et===void 0&&B!==0;)d.charCodeAt(B-1)>>8&&(et=!0),B--;if(!et)return d;for($e=_.noBOM?[]:[254,255],B=0,K=d.length;B<K;B++){if((ut=(pt=d.charCodeAt(B))>>8)>>8)throw new Error("Character at position "+B+" of string '"+d+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");$e.push(ut),$e.push(pt-(ut<<8))}return String.fromCharCode.apply(void 0,$e)},Ke=v.__private__.pdfEscape=v.pdfEscape=function(d,_){return Je(d,_).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Qe=v.__private__.beginPage=function(d){Le[++Dt]=[],st[Dt]={objId:0,contentsObjId:0,userUnit:Number(c),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(d[0]),topRightY:Number(d[1])}},_r(Dt),be(Le[D])},nn=function(d,_){var B,K,le;switch(t=_||t,typeof d=="string"&&(B=w(d.toLowerCase()),Array.isArray(B)&&(K=B[0],le=B[1])),Array.isArray(d)&&(K=d[0]*Me,le=d[1]*Me),isNaN(K)&&(K=i[0],le=i[1]),(K>14400||le>14400)&&($t.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),K=Math.min(14400,K),le=Math.min(14400,le)),i=[K,le],t.substr(0,1)){case"l":le>K&&(i=[le,K]);break;case"p":K>le&&(i=[le,K])}Qe(i),Uo(Ba),$(Rn),$a!==0&&$($a+" J"),qa!==0&&$(qa+" j"),St.publish("addPage",{pageNumber:Dt})},Tt=function(d){d>0&&d<=Dt&&(Le.splice(d,1),st.splice(d,1),Dt--,D>Dt&&(D=Dt),this.setPage(D))},_r=function(d){d>0&&d<=Dt&&(D=d)},tr=v.__private__.getNumberOfPages=v.getNumberOfPages=function(){return Le.length-1},Qt=function(d,_,B){var K,le=void 0;return B=B||{},d=d!==void 0?d:yt[dt].fontName,_=_!==void 0?_:yt[dt].fontStyle,K=d.toLowerCase(),At[K]!==void 0&&At[K][_]!==void 0?le=At[K][_]:At[d]!==void 0&&At[d][_]!==void 0?le=At[d][_]:B.disableWarning===!1&&$t.warn("Unable to look up font label for font '"+d+"', '"+_+"'. Refer to getFontList() for available fonts."),le||B.noFallback||(le=At.times[_])==null&&(le=At.times.normal),le},Rt=v.__private__.putInfo=function(){var d=Mt(),_=function(K){return K};for(var B in g!==null&&(_=Dr.encryptor(d,0)),$("<<"),$("/Producer ("+Ke(_("jsPDF "+it.version))+")"),tt)tt.hasOwnProperty(B)&&tt[B]&&$("/"+B.substr(0,1).toUpperCase()+B.substr(1)+" ("+Ke(_(tt[B]))+")");$("/CreationDate ("+Ke(_(ne))+")"),$(">>"),$("endobj")},ls=v.__private__.putCatalog=function(d){var _=(d=d||{}).rootDictionaryObjId||_n;switch(Mt(),$("<<"),$("/Type /Catalog"),$("/Pages "+_+" 0 R"),Ee||(Ee="fullwidth"),Ee){case"fullwidth":$("/OpenAction [3 0 R /FitH null]");break;case"fullheight":$("/OpenAction [3 0 R /FitV null]");break;case"fullpage":$("/OpenAction [3 0 R /Fit]");break;case"original":$("/OpenAction [3 0 R /XYZ null null 1]");break;default:var B=""+Ee;B.substr(B.length-1)==="%"&&(Ee=parseInt(Ee)/100),typeof Ee=="number"&&$("/OpenAction [3 0 R /XYZ null null "+W(Ee)+"]")}switch(ct||(ct="continuous"),ct){case"continuous":$("/PageLayout /OneColumn");break;case"single":$("/PageLayout /SinglePage");break;case"two":case"twoleft":$("/PageLayout /TwoColumnLeft");break;case"tworight":$("/PageLayout /TwoColumnRight")}Oe&&$("/PageMode /"+Oe),St.publish("putCatalog"),$(">>"),$("endobj")},Fa=v.__private__.putTrailer=function(){$("trailer"),$("<<"),$("/Size "+(Q+1)),$("/Root "+Q+" 0 R"),$("/Info "+(Q-1)+" 0 R"),g!==null&&$("/Encrypt "+Dr.oid+" 0 R"),$("/ID [ <"+se+"> <"+se+"> ]"),$(">>")},tc=v.__private__.putHeader=function(){$("%PDF-"+k),$("%ºß¬à")},rc=v.__private__.putXRef=function(){var d="0000000000";$("xref"),$("0 "+(Q+1)),$("0000000000 65535 f ");for(var _=1;_<=Q;_++)typeof he[_]=="function"?$((d+he[_]()).slice(-10)+" 00000 n "):he[_]!==void 0?$((d+he[_]).slice(-10)+" 00000 n "):$("0000000000 00000 n ")},oi=v.__private__.buildDocument=function(){Ye(),be(me),St.publish("buildDocument"),tc(),ai(),as(),Us(),g!==null&&is(),Rt(),ls();var d=pe;return rc(),Fa(),$("startxref"),$(""+d),$("%%EOF"),be(Le[D]),me.join(`
`)},zs=v.__private__.getBlob=function(d){return new Blob([ze(d)],{type:"application/pdf"})},Ws=v.output=v.__private__.output=oe(function(d,_){switch(typeof(_=_||{})=="string"?_={filename:_}:_.filename=_.filename||"generated.pdf",d){case void 0:return oi();case"save":v.save(_.filename);break;case"arraybuffer":return ze(oi());case"blob":return zs(oi());case"bloburi":case"bloburl":if(at.URL!==void 0&&typeof at.URL.createObjectURL=="function")return at.URL&&at.URL.createObjectURL(zs(oi()))||void 0;$t.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var B="",K=oi();try{B=xu(K)}catch{B=xu(unescape(encodeURIComponent(K)))}return"data:application/pdf;filename="+_.filename+";base64,"+B;case"pdfobjectnewwindow":if(Object.prototype.toString.call(at)==="[object Window]"){var le="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",we=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';_.pdfObjectUrl&&(le=_.pdfObjectUrl,we="");var Ce='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+le+'"'+we+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(_)+");<\/script></body></html>",$e=at.open();return $e!==null&&$e.document.write(Ce),$e}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(at)==="[object Window]"){var et='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(_.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+_.filename+'" width="500px" height="400px" /></body></html>',pt=at.open();if(pt!==null){pt.document.write(et);var ut=this;pt.document.documentElement.querySelector("#pdfViewer").onload=function(){pt.document.title=_.filename,pt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ut.output("bloburl"))}}return pt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(at)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var kt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",_)+'"></iframe></body></html>',er=at.open();if(er!==null&&(er.document.write(kt),er.document.title=_.filename),er||typeof safari>"u")return er;break;case"datauri":case"dataurl":return at.document.location.href=this.output("datauristring",_);default:return null}}),Fo=function(d){return Array.isArray(xe)===!0&&xe.indexOf(d)>-1};switch(r){case"pt":Me=1;break;case"mm":Me=72/25.4;break;case"cm":Me=72/2.54;break;case"in":Me=72;break;case"px":Me=Fo("px_scaling")==1?.75:96/72;break;case"pc":case"em":Me=12;break;case"ex":Me=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Me=r}var Dr=null;Fe(),ie();var nc=function(d){return g!==null?Dr.encryptor(d,0):function(_){return _}},Do=v.__private__.getPageInfo=v.getPageInfo=function(d){if(isNaN(d)||d%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:st[d].objId,pageNumber:d,pageContext:st[d]}},lt=v.__private__.getPageInfoByObjId=function(d){if(isNaN(d)||d%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var _ in st)if(st[_].objId===d)break;return Do(_)},ic=v.__private__.getCurrentPageInfo=v.getCurrentPageInfo=function(){return{objId:st[D].objId,pageNumber:D,pageContext:st[D]}};v.addPage=function(){return nn.apply(this,arguments),this},v.setPage=function(){return _r.apply(this,arguments),be.call(this,Le[D]),this},v.insertPage=function(d){return this.addPage(),this.movePage(D,d),this},v.movePage=function(d,_){var B,K;if(d>_){B=Le[d],K=st[d];for(var le=d;le>_;le--)Le[le]=Le[le-1],st[le]=st[le-1];Le[_]=B,st[_]=K,this.setPage(_)}else if(d<_){B=Le[d],K=st[d];for(var we=d;we<_;we++)Le[we]=Le[we+1],st[we]=st[we+1];Le[_]=B,st[_]=K,this.setPage(_)}return this},v.deletePage=function(){return Tt.apply(this,arguments),this},v.__private__.text=v.text=function(d,_,B,K,le){var we,Ce,$e,et,pt,ut,kt,er,rr,mr=(K=K||{}).scope||this;if(typeof d=="number"&&typeof _=="number"&&(typeof B=="string"||Array.isArray(B))){var Mr=B;B=_,_=d,d=Mr}if(arguments[3]instanceof Ue?(M("The transform parameter of text() with a Matrix value"),rr=le):($e=arguments[4],et=arguments[5],qt(kt=arguments[3])==="object"&&kt!==null||(typeof $e=="string"&&(et=$e,$e=null),typeof kt=="string"&&(et=kt,kt=null),typeof kt=="number"&&($e=kt,kt=null),K={flags:kt,angle:$e,align:et})),isNaN(_)||isNaN(B)||d==null)throw new Error("Invalid arguments passed to jsPDF.text");if(d.length===0)return mr;var Lr="",On=!1,mn=typeof K.lineHeightFactor=="number"?K.lineHeightFactor:us,Gn=mr.internal.scaleFactor;function Ho(Vt){return Vt=Vt.split("	").join(Array(K.TabLen||9).join(" ")),Ke(Vt,kt)}function Ga(Vt){for(var Ht,hr=Vt.concat(),Sr=[],di=hr.length;di--;)typeof(Ht=hr.shift())=="string"?Sr.push(Ht):Array.isArray(Vt)&&(Ht.length===1||Ht[1]===void 0&&Ht[2]===void 0)?Sr.push(Ht[0]):Sr.push([Ht[0],Ht[1],Ht[2]]);return Sr}function Ka(Vt,Ht){var hr;if(typeof Vt=="string")hr=Ht(Vt)[0];else if(Array.isArray(Vt)){for(var Sr,di,ro=Vt.concat(),sa=[],Zo=ro.length;Zo--;)typeof(Sr=ro.shift())=="string"?sa.push(Ht(Sr)[0]):Array.isArray(Sr)&&typeof Sr[0]=="string"&&(di=Ht(Sr[0],Sr[1],Sr[2]),sa.push([di[0],di[1],di[2]]));hr=sa}return hr}var Ys=!1,Ja=!0;if(typeof d=="string")Ys=!0;else if(Array.isArray(d)){var Ya=d.concat();Ce=[];for(var Zs,Tr=Ya.length;Tr--;)(typeof(Zs=Ya.shift())!="string"||Array.isArray(Zs)&&typeof Zs[0]!="string")&&(Ja=!1);Ys=Ja}if(Ys===!1)throw new Error('Type of text must be string or Array. "'+d+'" is not recognized.');typeof d=="string"&&(d=d.match(/[\r?\n]/)?d.split(/\r\n|\r|\n/g):[d]);var Xs=Ie/mr.internal.scaleFactor,Qs=Xs*(mn-1);switch(K.baseline){case"bottom":B-=Qs;break;case"top":B+=Xs-Qs;break;case"hanging":B+=Xs-2*Qs;break;case"middle":B+=Xs/2-Qs}if((ut=K.maxWidth||0)>0&&(typeof d=="string"?d=mr.splitTextToSize(d,ut):Object.prototype.toString.call(d)==="[object Array]"&&(d=d.reduce(function(Vt,Ht){return Vt.concat(mr.splitTextToSize(Ht,ut))},[]))),we={text:d,x:_,y:B,options:K,mutex:{pdfEscape:Ke,activeFontKey:dt,fonts:yt,activeFontSize:Ie}},St.publish("preProcessText",we),d=we.text,$e=(K=we.options).angle,!(rr instanceof Ue)&&$e&&typeof $e=="number"){$e*=Math.PI/180,K.rotationDirection===0&&($e=-$e),F===C.ADVANCED&&($e=-$e);var ea=Math.cos($e),Za=Math.sin($e);rr=new Ue(ea,Za,-Za,ea,0,0)}else $e&&$e instanceof Ue&&(rr=$e);F!==C.ADVANCED||rr||(rr=jt),(pt=K.charSpace||Gs)!==void 0&&(Lr+=G(T(pt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(er=K.horizontalScale)!==void 0&&(Lr+=G(100*er)+` Tz
`),K.lang;var sn=-1,pc=K.renderingMode!==void 0?K.renderingMode:K.stroke,Xa=mr.internal.getCurrentPageInfo().pageContext;switch(pc){case 0:case!1:case"fill":sn=0;break;case 1:case!0:case"stroke":sn=1;break;case 2:case"fillThenStroke":sn=2;break;case 3:case"invisible":sn=3;break;case 4:case"fillAndAddForClipping":sn=4;break;case 5:case"strokeAndAddPathForClipping":sn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":sn=6;break;case 7:case"addToPathForClipping":sn=7}var Go=Xa.usedRenderingMode!==void 0?Xa.usedRenderingMode:-1;sn!==-1?Lr+=sn+` Tr
`:Go!==-1&&(Lr+=`0 Tr
`),sn!==-1&&(Xa.usedRenderingMode=sn),et=K.align||"left";var Sn,ta=Ie*mn,Ko=mr.internal.pageSize.getWidth(),Jo=yt[dt];pt=K.charSpace||Gs,ut=K.maxWidth||0,kt=Object.assign({autoencode:!0,noBOM:!0},K.flags);var Pi=[],fs=function(Vt){return mr.getStringUnitWidth(Vt,{font:Jo,charSpace:pt,fontSize:Ie,doKerning:!1})*Ie/Gn};if(Object.prototype.toString.call(d)==="[object Array]"){var an;Ce=Ga(d),et!=="left"&&(Sn=Ce.map(fs));var Jr,Ii=0;if(et==="right"){_-=Sn[0],d=[],Tr=Ce.length;for(var ci=0;ci<Tr;ci++)ci===0?(Jr=Hn(_),an=li(B)):(Jr=T(Ii-Sn[ci]),an=-ta),d.push([Ce[ci],Jr,an]),Ii=Sn[ci]}else if(et==="center"){_-=Sn[0]/2,d=[],Tr=Ce.length;for(var ui=0;ui<Tr;ui++)ui===0?(Jr=Hn(_),an=li(B)):(Jr=T((Ii-Sn[ui])/2),an=-ta),d.push([Ce[ui],Jr,an]),Ii=Sn[ui]}else if(et==="left"){d=[],Tr=Ce.length;for(var ra=0;ra<Tr;ra++)d.push(Ce[ra])}else if(et==="justify"&&Jo.encoding==="Identity-H"){d=[],Tr=Ce.length,ut=ut!==0?ut:Ko;for(var hi=0,ur=0;ur<Tr;ur++)if(an=ur===0?li(B):-ta,Jr=ur===0?Hn(_):hi,ur<Tr-1){var Qa=T((ut-Sn[ur])/(Ce[ur].split(" ").length-1)),Yr=Ce[ur].split(" ");d.push([Yr[0]+" ",Jr,an]),hi=0;for(var jn=1;jn<Yr.length;jn++){var na=(fs(Yr[jn-1]+" "+Yr[jn])-fs(Yr[jn]))*Gn+Qa;jn==Yr.length-1?d.push([Yr[jn],na,0]):d.push([Yr[jn]+" ",na,0]),hi-=na}}else d.push([Ce[ur],Jr,an]);d.push(["",hi,0])}else{if(et!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(d=[],Tr=Ce.length,ut=ut!==0?ut:Ko,ur=0;ur<Tr;ur++)an=ur===0?li(B):-ta,Jr=ur===0?Hn(_):0,ur<Tr-1?Pi.push(G(T((ut-Sn[ur])/(Ce[ur].split(" ").length-1)))):Pi.push(0),d.push([Ce[ur],Jr,an])}}var Yo=typeof K.R2L=="boolean"?K.R2L:Ge;Yo===!0&&(d=Ka(d,function(Vt,Ht,hr){return[Vt.split("").reverse().join(""),Ht,hr]})),we={text:d,x:_,y:B,options:K,mutex:{pdfEscape:Ke,activeFontKey:dt,fonts:yt,activeFontSize:Ie}},St.publish("postProcessText",we),d=we.text,On=we.mutex.isHex||!1;var eo=yt[dt].encoding;eo!=="WinAnsiEncoding"&&eo!=="StandardEncoding"||(d=Ka(d,function(Vt,Ht,hr){return[Ho(Vt),Ht,hr]})),Ce=Ga(d),d=[];for(var ps,gs,Ni,ms=0,ia=1,vs=Array.isArray(Ce[0])?ia:ms,Ei="",to=function(Vt,Ht,hr){var Sr="";return hr instanceof Ue?(hr=typeof K.angle=="number"?Zt(hr,new Ue(1,0,0,1,Vt,Ht)):Zt(new Ue(1,0,0,1,Vt,Ht),hr),F===C.ADVANCED&&(hr=Zt(new Ue(1,0,0,-1,0,0),hr)),Sr=hr.join(" ")+` Tm
`):Sr=G(Vt)+" "+G(Ht)+` Td
`,Sr},An=0;An<Ce.length;An++){switch(Ei="",vs){case ia:Ni=(On?"<":"(")+Ce[An][0]+(On?">":")"),ps=parseFloat(Ce[An][1]),gs=parseFloat(Ce[An][2]);break;case ms:Ni=(On?"<":"(")+Ce[An]+(On?">":")"),ps=Hn(_),gs=li(B)}Pi!==void 0&&Pi[An]!==void 0&&(Ei=Pi[An]+` Tw
`),An===0?d.push(Ei+to(ps,gs,rr)+Ni):vs===ms?d.push(Ei+Ni):vs===ia&&d.push(Ei+to(ps,gs,rr)+Ni)}d=vs===ms?d.join(` Tj
T* `):d.join(` Tj
`),d+=` Tj
`;var kn=`BT
/`;return kn+=dt+" "+Ie+` Tf
`,kn+=G(Ie*mn)+` TL
`,kn+=hs+`
`,kn+=Lr,kn+=d,$(kn+="ET"),y[dt]=!0,mr};var sc=v.__private__.clip=v.clip=function(d){return $(d==="evenodd"?"W*":"W"),this};v.clipEvenOdd=function(){return sc("evenodd")},v.__private__.discardPath=v.discardPath=function(){return $("n"),this};var Vn=v.__private__.isValidStyle=function(d){var _=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(d)!==-1&&(_=!0),_};v.__private__.setDefaultPathOperation=v.setDefaultPathOperation=function(d){return Vn(d)&&(f=d),this};var Mo=v.__private__.getStyle=v.getStyle=function(d){var _=f;switch(d){case"D":case"S":_="S";break;case"F":_="f";break;case"FD":case"DF":_="B";break;case"f":case"f*":case"B":case"B*":_=d}return _},Bo=v.close=function(){return $("h"),this};v.stroke=function(){return $("S"),this},v.fill=function(d){return Vs("f",d),this},v.fillEvenOdd=function(d){return Vs("f*",d),this},v.fillStroke=function(d){return Vs("B",d),this},v.fillStrokeEvenOdd=function(d){return Vs("B*",d),this};var Vs=function(d,_){qt(_)==="object"?oc(_,d):$(d)},Da=function(d){d===null||F===C.ADVANCED&&d===void 0||(d=Mo(d),$(d))};function ac(d,_,B,K,le){var we=new Sa(_||this.boundingBox,B||this.xStep,K||this.yStep,this.gState,le||this.matrix);we.stream=this.stream;var Ce=d+"$$"+this.cloneIndex+++"$$";return cr(Ce,we),we}var oc=function(d,_){var B=xn[d.key],K=_t[B];if(K instanceof ks)$("q"),$(lc(_)),K.gState&&v.setGState(K.gState),$(d.matrix.toString()+" cm"),$("/"+B+" sh"),$("Q");else if(K instanceof Sa){var le=new Ue(1,0,0,-1,0,Ci());d.matrix&&(le=le.multiply(d.matrix||jt),B=ac.call(K,d.key,d.boundingBox,d.xStep,d.yStep,le).id),$("q"),$("/Pattern cs"),$("/"+B+" scn"),K.gState&&v.setGState(K.gState),$(_),$("Q")}},lc=function(d){switch(d){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Ma=v.moveTo=function(d,_){return $(G(T(d))+" "+G(U(_))+" m"),this},cs=v.lineTo=function(d,_){return $(G(T(d))+" "+G(U(_))+" l"),this},ki=v.curveTo=function(d,_,B,K,le,we){return $([G(T(d)),G(U(_)),G(T(B)),G(U(K)),G(T(le)),G(U(we)),"c"].join(" ")),this};v.__private__.line=v.line=function(d,_,B,K,le){if(isNaN(d)||isNaN(_)||isNaN(B)||isNaN(K)||!Vn(le))throw new Error("Invalid arguments passed to jsPDF.line");return F===C.COMPAT?this.lines([[B-d,K-_]],d,_,[1,1],le||"S"):this.lines([[B-d,K-_]],d,_,[1,1]).stroke()},v.__private__.lines=v.lines=function(d,_,B,K,le,we){var Ce,$e,et,pt,ut,kt,er,rr,mr,Mr,Lr,On;if(typeof d=="number"&&(On=B,B=_,_=d,d=On),K=K||[1,1],we=we||!1,isNaN(_)||isNaN(B)||!Array.isArray(d)||!Array.isArray(K)||!Vn(le)||typeof we!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ma(_,B),Ce=K[0],$e=K[1],pt=d.length,Mr=_,Lr=B,et=0;et<pt;et++)(ut=d[et]).length===2?(Mr=ut[0]*Ce+Mr,Lr=ut[1]*$e+Lr,cs(Mr,Lr)):(kt=ut[0]*Ce+Mr,er=ut[1]*$e+Lr,rr=ut[2]*Ce+Mr,mr=ut[3]*$e+Lr,Mr=ut[4]*Ce+Mr,Lr=ut[5]*$e+Lr,ki(kt,er,rr,mr,Mr,Lr));return we&&Bo(),Da(le),this},v.path=function(d){for(var _=0;_<d.length;_++){var B=d[_],K=B.c;switch(B.op){case"m":Ma(K[0],K[1]);break;case"l":cs(K[0],K[1]);break;case"c":ki.apply(this,K);break;case"h":Bo()}}return this},v.__private__.rect=v.rect=function(d,_,B,K,le){if(isNaN(d)||isNaN(_)||isNaN(B)||isNaN(K)||!Vn(le))throw new Error("Invalid arguments passed to jsPDF.rect");return F===C.COMPAT&&(K=-K),$([G(T(d)),G(U(_)),G(T(B)),G(T(K)),"re"].join(" ")),Da(le),this},v.__private__.triangle=v.triangle=function(d,_,B,K,le,we,Ce){if(isNaN(d)||isNaN(_)||isNaN(B)||isNaN(K)||isNaN(le)||isNaN(we)||!Vn(Ce))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[B-d,K-_],[le-B,we-K],[d-le,_-we]],d,_,[1,1],Ce,!0),this},v.__private__.roundedRect=v.roundedRect=function(d,_,B,K,le,we,Ce){if(isNaN(d)||isNaN(_)||isNaN(B)||isNaN(K)||isNaN(le)||isNaN(we)||!Vn(Ce))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var $e=4/3*(Math.SQRT2-1);return le=Math.min(le,.5*B),we=Math.min(we,.5*K),this.lines([[B-2*le,0],[le*$e,0,le,we-we*$e,le,we],[0,K-2*we],[0,we*$e,-le*$e,we,-le,we],[2*le-B,0],[-le*$e,0,-le,-we*$e,-le,-we],[0,2*we-K],[0,-we*$e,le*$e,-we,le,-we]],d+le,_,[1,1],Ce,!0),this},v.__private__.ellipse=v.ellipse=function(d,_,B,K,le){if(isNaN(d)||isNaN(_)||isNaN(B)||isNaN(K)||!Vn(le))throw new Error("Invalid arguments passed to jsPDF.ellipse");var we=4/3*(Math.SQRT2-1)*B,Ce=4/3*(Math.SQRT2-1)*K;return Ma(d+B,_),ki(d+B,_-Ce,d+we,_-K,d,_-K),ki(d-we,_-K,d-B,_-Ce,d-B,_),ki(d-B,_+Ce,d-we,_+K,d,_+K),ki(d+we,_+K,d+B,_+Ce,d+B,_),Da(le),this},v.__private__.circle=v.circle=function(d,_,B,K){if(isNaN(d)||isNaN(_)||isNaN(B)||!Vn(K))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(d,_,B,B,K)},v.setFont=function(d,_,B){return B&&(_=te(_,B)),dt=Qt(d,_,{disableWarning:!1}),this};var cc=v.__private__.getFont=v.getFont=function(){return yt[Qt.apply(v,arguments)]};v.__private__.getFontList=v.getFontList=function(){var d,_,B={};for(d in At)if(At.hasOwnProperty(d))for(_ in B[d]=[],At[d])At[d].hasOwnProperty(_)&&B[d].push(_);return B},v.addFont=function(d,_,B,K,le){var we=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&we.indexOf(arguments[3])!==-1?le=arguments[3]:arguments[3]&&we.indexOf(arguments[3])==-1&&(B=te(B,K)),le=le||"Identity-H",os.call(this,d,_,B,le)};var us,Ba=n.lineWidth||.200025,Hs=v.__private__.getLineWidth=v.getLineWidth=function(){return Ba},Uo=v.__private__.setLineWidth=v.setLineWidth=function(d){return Ba=d,$(G(T(d))+" w"),this};v.__private__.setLineDash=it.API.setLineDash=it.API.setLineDashPattern=function(d,_){if(d=d||[],_=_||0,isNaN(_)||!Array.isArray(d))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return d=d.map(function(B){return G(T(B))}).join(" "),_=G(T(_)),$("["+d+"] "+_+" d"),this};var $o=v.__private__.getLineHeight=v.getLineHeight=function(){return Ie*us};v.__private__.getLineHeight=v.getLineHeight=function(){return Ie*us};var qo=v.__private__.setLineHeightFactor=v.setLineHeightFactor=function(d){return typeof(d=d||1.15)=="number"&&(us=d),this},zo=v.__private__.getLineHeightFactor=v.getLineHeightFactor=function(){return us};qo(n.lineHeight);var Hn=v.__private__.getHorizontalCoordinate=function(d){return T(d)},li=v.__private__.getVerticalCoordinate=function(d){return F===C.ADVANCED?d:st[D].mediaBox.topRightY-st[D].mediaBox.bottomLeftY-T(d)},uc=v.__private__.getHorizontalCoordinateString=v.getHorizontalCoordinateString=function(d){return G(Hn(d))},Li=v.__private__.getVerticalCoordinateString=v.getVerticalCoordinateString=function(d){return G(li(d))},Rn=n.strokeColor||"0 G";v.__private__.getStrokeColor=v.getDrawColor=function(){return en(Rn)},v.__private__.setStrokeColor=v.setDrawColor=function(d,_,B,K){return Rn=tn({ch1:d,ch2:_,ch3:B,ch4:K,pdfColorType:"draw",precision:2}),$(Rn),this};var Ua=n.fillColor||"0 g";v.__private__.getFillColor=v.getFillColor=function(){return en(Ua)},v.__private__.setFillColor=v.setFillColor=function(d,_,B,K){return Ua=tn({ch1:d,ch2:_,ch3:B,ch4:K,pdfColorType:"fill",precision:2}),$(Ua),this};var hs=n.textColor||"0 g",hc=v.__private__.getTextColor=v.getTextColor=function(){return en(hs)};v.__private__.setTextColor=v.setTextColor=function(d,_,B,K){return hs=tn({ch1:d,ch2:_,ch3:B,ch4:K,pdfColorType:"text",precision:3}),this};var Gs=n.charSpace,dc=v.__private__.getCharSpace=v.getCharSpace=function(){return parseFloat(Gs||0)};v.__private__.setCharSpace=v.setCharSpace=function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Gs=d,this};var $a=0;v.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},v.__private__.setLineCap=v.setLineCap=function(d){var _=v.CapJoinStyles[d];if(_===void 0)throw new Error("Line cap style of '"+d+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return $a=_,$(_+" J"),this};var qa=0;v.__private__.setLineJoin=v.setLineJoin=function(d){var _=v.CapJoinStyles[d];if(_===void 0)throw new Error("Line join style of '"+d+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return qa=_,$(_+" j"),this},v.__private__.setLineMiterLimit=v.__private__.setMiterLimit=v.setLineMiterLimit=v.setMiterLimit=function(d){if(d=d||0,isNaN(d))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return $(G(T(d))+" M"),this},v.GState=ql,v.setGState=function(d){(d=typeof d=="string"?zt[xr[d]]:Wo(null,d)).equals(Fr)||($("/"+d.id+" gs"),Fr=d)};var Wo=function(d,_){if(!d||!xr[d]){var B=!1;for(var K in zt)if(zt.hasOwnProperty(K)&&zt[K].equals(_)){B=!0;break}if(B)_=zt[K];else{var le="GS"+(Object.keys(zt).length+1).toString(10);zt[le]=_,_.id=le}return d&&(xr[d]=_.id),St.publish("addGState",_),_}};v.addGState=function(d,_){return Wo(d,_),this},v.saveGraphicsState=function(){return $("q"),Er.push({key:dt,size:Ie,color:hs}),this},v.restoreGraphicsState=function(){$("Q");var d=Er.pop();return dt=d.key,Ie=d.size,hs=d.color,Fr=null,this},v.setCurrentTransformationMatrix=function(d){return $(d.toString()+" cm"),this},v.comment=function(d){return $("#"+d),this};var Ks=function(d,_){var B=d||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return B},set:function(we){isNaN(we)||(B=parseFloat(we))}});var K=_||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return K},set:function(we){isNaN(we)||(K=parseFloat(we))}});var le="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return le},set:function(we){le=we.toString()}}),this},za=function(d,_,B,K){Ks.call(this,d,_),this.type="rect";var le=B||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return le},set:function(Ce){isNaN(Ce)||(le=parseFloat(Ce))}});var we=K||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return we},set:function(Ce){isNaN(Ce)||(we=parseFloat(Ce))}}),this},Wa=function(){this.page=Dt,this.currentPage=D,this.pages=Le.slice(0),this.pagesContext=st.slice(0),this.x=lr,this.y=bt,this.matrix=Or,this.width=ds(D),this.height=Ci(D),this.outputDestination=Ne,this.id="",this.objectNumber=-1};Wa.prototype.restore=function(){Dt=this.page,D=this.currentPage,st=this.pagesContext,Le=this.pages,lr=this.x,bt=this.y,Or=this.matrix,Va(D,this.width),Ha(D,this.height),Ne=this.outputDestination};var Vo=function(d,_,B,K,le){ft.push(new Wa),Dt=D=0,Le=[],lr=d,bt=_,Or=le,Qe([B,K])},fc=function(d){if(Xe[d])ft.pop().restore();else{var _=new Wa,B="Xo"+(Object.keys(We).length+1).toString(10);_.id=B,Xe[d]=B,We[B]=_,St.publish("addFormObject",_),ft.pop().restore()}};for(var Js in v.beginFormObject=function(d,_,B,K,le){return Vo(d,_,B,K,le),this},v.endFormObject=function(d){return fc(d),this},v.doFormObject=function(d,_){var B=We[Xe[d]];return $("q"),$(_.toString()+" cm"),$("/"+B.id+" Do"),$("Q"),this},v.getFormObject=function(d){var _=We[Xe[d]];return{x:_.x,y:_.y,width:_.width,height:_.height,matrix:_.matrix}},v.save=function(d,_){return d=d||"generated.pdf",(_=_||{}).returnPromise=_.returnPromise||!1,_.returnPromise===!1?(js(zs(oi()),d),typeof js.unload=="function"&&at.setTimeout&&setTimeout(js.unload,911),this):new Promise(function(B,K){try{var le=js(zs(oi()),d);typeof js.unload=="function"&&at.setTimeout&&setTimeout(js.unload,911),B(le)}catch(we){K(we.message)}})},it.API)it.API.hasOwnProperty(Js)&&(Js==="events"&&it.API.events.length?function(d,_){var B,K,le;for(le=_.length-1;le!==-1;le--)B=_[le][0],K=_[le][1],d.subscribe.apply(d,[B].concat(typeof K=="function"?[K]:K))}(St,it.API.events):v[Js]=it.API[Js]);var ds=v.getPageWidth=function(d){return(st[d=d||D].mediaBox.topRightX-st[d].mediaBox.bottomLeftX)/Me},Va=v.setPageWidth=function(d,_){st[d].mediaBox.topRightX=_*Me+st[d].mediaBox.bottomLeftX},Ci=v.getPageHeight=function(d){return(st[d=d||D].mediaBox.topRightY-st[d].mediaBox.bottomLeftY)/Me},Ha=v.setPageHeight=function(d,_){st[d].mediaBox.topRightY=_*Me+st[d].mediaBox.bottomLeftY};return v.internal={pdfEscape:Ke,getStyle:Mo,getFont:cc,getFontSize:Re,getCharSpace:dc,getTextColor:hc,getLineHeight:$o,getLineHeightFactor:zo,getLineWidth:Hs,write:nt,getHorizontalCoordinate:Hn,getVerticalCoordinate:li,getCoordinateString:uc,getVerticalCoordinateString:Li,collections:{},newObject:Mt,newAdditionalObject:si,newObjectDeferred:Wt,newObjectDeferredBegin:kr,getFilters:fn,putStream:Kr,events:St,scaleFactor:Me,pageSize:{getWidth:function(){return ds(D)},setWidth:function(d){Va(D,d)},getHeight:function(){return Ci(D)},setHeight:function(d){Ha(D,d)}},encryptionOptions:g,encryption:Dr,getEncryptor:nc,output:Ws,getNumberOfPages:tr,pages:Le,out:$,f2:W,f3:N,getPageInfo:Do,getPageInfoByObjId:lt,getCurrentPageInfo:ic,getPDFVersion:S,Point:Ks,Rectangle:za,Matrix:Ue,hasHotfix:Fo},Object.defineProperty(v.internal.pageSize,"width",{get:function(){return ds(D)},set:function(d){Va(D,d)},enumerable:!0,configurable:!0}),Object.defineProperty(v.internal.pageSize,"height",{get:function(){return Ci(D)},set:function(d){Ha(D,d)},enumerable:!0,configurable:!0}),qs.call(v,Ae),dt="F1",nn(i,t),St.publish("initialized"),v}xa.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},xa.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},xa.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},xa.prototype.processOwnerPassword=function(n,e){return Su(_u(e).substr(0,5),n)},xa.prototype.encryptor=function(n,e){var t=_u(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return Su(t,r)}},ql.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||qt(n)!==qt(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},it.API={events:[]},it.version="3.0.1";var sr=it.API,yh=1,Ds=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ma=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},ht=function(n){return n.toFixed(2)},qi=function(n){return n.toFixed(5)};sr.__acroform__={};var dn=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},tf=function(n){return n*yh},Xn=function(n){var e=new Hp,t=Ve.internal.getHeight(n)||0,r=Ve.internal.getWidth(n)||0;return e.BBox=[0,0,Number(ht(r)),Number(ht(t))],e},yb=sr.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},wb=sr.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},xb=sr.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},dr=sr.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return xb(n,e-1)},fr=sr.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return yb(n,e-1)},pr=sr.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return wb(n,e-1)},_b=sr.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],s=n[1],a=n[2],c=n[3],l={};return l.lowerLeft_X=t(i)||0,l.lowerLeft_Y=r(s+c)||0,l.upperRight_X=t(i+a)||0,l.upperRight_Y=r(s)||0,[Number(ht(l.lowerLeft_X)),Number(ht(l.lowerLeft_Y)),Number(ht(l.upperRight_X)),Number(ht(l.upperRight_Y))]},Sb=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=ju(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+ht(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Xn(n);return s.scope=n.scope,s.stream=e.join(`
`),s}},ju=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map(function(N){return N.split(`
`)}):i.map(function(N){return[N]});var s=t,a=Ve.internal.getHeight(n)||0;a=a<0?-a:a;var c=Ve.internal.getWidth(n)||0;c=c<0?-c:c;var l=function(N,T,V){if(N+1<i.length){var U=T+" "+i[N+1][0];return jl(U,n,V).width<=c-4}return!1};s++;e:for(;s>0;){e="",s--;var f,g,m=jl("3",n,s).height,y=n.multiline?a-s:(a-m)/2,v=y+=2,k=0,S=0,j=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+jl(e,n,s=12).width+", FieldWidth:"+c+`
`;break}for(var w="",C=0,F=0;F<i.length;F++)if(i.hasOwnProperty(F)){var Z=!1;if(i[F].length!==1&&j!==i[F].length-1){if((m+2)*(C+2)+2>a)continue e;w+=i[F][j],Z=!0,S=F,F--}else{w=(w+=i[F][j]+" ").substr(w.length-1)==" "?w.substr(0,w.length-1):w;var ae=parseInt(F),te=l(ae,w,s),G=F>=i.length-1;if(te&&!G){w+=" ",j=0;continue}if(te||G){if(G)S=ae;else if(n.multiline&&(m+2)*(C+2)+2>a)continue e}else{if(!n.multiline||(m+2)*(C+2)+2>a)continue e;S=ae}}for(var M="",z=k;z<=S;z++){var W=i[z];if(n.multiline){if(z===S){M+=W[j]+" ",j=(j+1)%W.length;continue}if(z===k){M+=W[W.length-1]+" ";continue}}M+=W[0]+" "}switch(M=M.substr(M.length-1)==" "?M.substr(0,M.length-1):M,g=jl(M,n,s).width,n.textAlign){case"right":f=c-g-2;break;case"center":f=(c-g)/2;break;case"left":default:f=2}e+=ht(f)+" "+ht(v)+` Td
`,e+="("+Ds(M)+`) Tj
`,e+=-ht(f)+` 0 Td
`,v=-(s+2),g=0,k=Z?S:S+1,C++,w=""}break}return r.text=e,r.fontSize=s,r},jl=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},jb={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Ab=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},kb=function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var r=t,i=n[t];e.internal.newObjectDeferredBegin(i.objId,!0),qt(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete n[r]}},Lb=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(zn.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(jb)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");yh=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new Gp,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&Ab(s,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,i){var s=!r;for(var a in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(a)){var c=r[a],l=[],f=c.Rect;if(c.Rect&&(c.Rect=_b(c.Rect,i)),i.internal.newObjectDeferredBegin(c.objId,!0),c.DA=Ve.createDefaultAppearanceStream(c),qt(c)==="object"&&typeof c.getKeyValueListForStream=="function"&&(l=c.getKeyValueListForStream()),c.Rect=f,c.hasAppearanceStream&&!c.appearanceStreamContent){var g=Sb(c);l.push({key:"AP",value:"<</N "+g+">>"}),i.internal.acroformPlugin.xForms.push(g)}if(c.appearanceStreamContent){var m="";for(var y in c.appearanceStreamContent)if(c.appearanceStreamContent.hasOwnProperty(y)){var v=c.appearanceStreamContent[y];if(m+="/"+y+" ",m+="<<",Object.keys(v).length>=1||Array.isArray(v)){for(var a in v)if(v.hasOwnProperty(a)){var k=v[a];typeof k=="function"&&(k=k.call(i,c)),m+="/"+a+" "+k+" ",i.internal.acroformPlugin.xForms.indexOf(k)>=0||i.internal.acroformPlugin.xForms.push(k)}}else typeof(k=v)=="function"&&(k=k.call(i,c)),m+="/"+a+" "+k,i.internal.acroformPlugin.xForms.indexOf(k)>=0||i.internal.acroformPlugin.xForms.push(k);m+=">>"}l.push({key:"AP",value:`<<
`+m+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:c.objId}),i.internal.out("endobj")}s&&kb(i.internal.acroformPlugin.xForms,i)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},Vp=sr.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(a){return a};if(Array.isArray(n)){for(var i="[",s=0;s<n.length;s++)switch(s!==0&&(i+=" "),qt(n[s])){case"boolean":case"number":case"object":i+=n[s].toString();break;case"string":n[s].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),i+="("+Ds(r(n[s].toString()))+")"):i+=n[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Jc=function(n,e,t){var r=function(i){return i};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),n="("+Ds(r(n))+")"},ei=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ei.prototype.toString=function(){return this.objId+" 0 R"},ei.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},ei.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:Vp(i,this.objId,this.scope)}):i instanceof ei?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var Hp=function(){ei.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};dn(Hp,ei);var Gp=function(){ei.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Ds(t(n))+")"}},set:function(t){n=t}})};dn(Gp,ei);var zn=function n(){ei.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute F supplied.');e=w}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!dr(e,3)},set:function(w){w?this.F=fr(e,3):this.F=pr(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute Ff supplied.');t=w}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(w){r=w!==void 0?w:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(w){r[0]=w}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(w){r[1]=w}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(w){r[2]=w}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(w){r[3]=w}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(w){switch(w){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=w;break;default:throw new Error('Invalid value "'+w+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof zl)return;s="FieldObject"+n.FieldNum++}var w=function(C){return C};return this.scope&&(w=this.scope.internal.getEncryptor(this.objId)),"("+Ds(w(s))+")"},set:function(w){s=w.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(w){s=w}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(w){a=w}});var c="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return c},set:function(w){c=w}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(w){l=w}});var f=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return f===void 0?50/yh:f},set:function(w){f=w}});var g="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return g},set:function(w){g=w}});var m="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!m||this instanceof zl||this instanceof Es))return Jc(m,this.objId,this.scope)},set:function(w){w=w.toString(),m=w}});var y=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof Nr?y:Jc(y,this.objId,this.scope)},set:function(w){w=w.toString(),y=this instanceof Nr?w:w.substr(0,1)==="("?ma(w.substr(1,w.length-2)):ma(w)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Nr?ma(y.substr(1,y.length-1)):y},set:function(w){w=w.toString(),y=this instanceof Nr?"/"+w:w}});var v=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(v)return v},set:function(w){this.V=w}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof Nr?v:Jc(v,this.objId,this.scope)},set:function(w){w=w.toString(),v=this instanceof Nr?w:w.substr(0,1)==="("?ma(w.substr(1,w.length-2)):ma(w)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Nr?ma(v.substr(1,v.length-1)):v},set:function(w){w=w.toString(),v=this instanceof Nr?"/"+w:w}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var k,S=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return S},set:function(w){w=!!w,S=w}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(k)return k},set:function(w){k=w}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!dr(this.Ff,1)},set:function(w){w?this.Ff=fr(this.Ff,1):this.Ff=pr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!dr(this.Ff,2)},set:function(w){w?this.Ff=fr(this.Ff,2):this.Ff=pr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!dr(this.Ff,3)},set:function(w){w?this.Ff=fr(this.Ff,3):this.Ff=pr(this.Ff,3)}});var j=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(j!==null)return j},set:function(w){if([0,1,2].indexOf(w)===-1)throw new Error('Invalid value "'+w+'" for attribute Q supplied.');j=w}}),Object.defineProperty(this,"textAlign",{get:function(){var w;switch(j){case 0:default:w="left";break;case 1:w="center";break;case 2:w="right"}return w},configurable:!0,enumerable:!0,set:function(w){switch(w){case"right":case 2:j=2;break;case"center":case 1:j=1;break;case"left":case 0:default:j=0}}})};dn(zn,ei);var ja=function(){zn.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Vp(e,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=function(s,a,c){c||(c=1);for(var l,f=[];l=a.exec(s);)f.push(l[c]);return f}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!dr(this.Ff,18)},set:function(t){t?this.Ff=fr(this.Ff,18):this.Ff=pr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!dr(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=fr(this.Ff,19):this.Ff=pr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!dr(this.Ff,20)},set:function(t){t?(this.Ff=fr(this.Ff,20),e.sort()):this.Ff=pr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!dr(this.Ff,22)},set:function(t){t?this.Ff=fr(this.Ff,22):this.Ff=pr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!dr(this.Ff,23)},set:function(t){t?this.Ff=fr(this.Ff,23):this.Ff=pr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!dr(this.Ff,27)},set:function(t){t?this.Ff=fr(this.Ff,27):this.Ff=pr(this.Ff,27)}}),this.hasAppearanceStream=!1};dn(ja,zn);var Aa=function(){ja.call(this),this.fontName="helvetica",this.combo=!1};dn(Aa,ja);var ka=function(){Aa.call(this),this.combo=!0};dn(ka,Aa);var Nl=function(){ka.call(this),this.edit=!0};dn(Nl,ka);var Nr=function(){zn.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!dr(this.Ff,15)},set:function(t){t?this.Ff=fr(this.Ff,15):this.Ff=pr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!dr(this.Ff,16)},set:function(t){t?this.Ff=fr(this.Ff,16):this.Ff=pr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!dr(this.Ff,17)},set:function(t){t?this.Ff=fr(this.Ff,17):this.Ff=pr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!dr(this.Ff,26)},set:function(t){t?this.Ff=fr(this.Ff,26):this.Ff=pr(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(s){return s};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Ds(t(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){qt(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};dn(Nr,zn);var El=function(){Nr.call(this),this.pushButton=!0};dn(El,Nr);var La=function(){Nr.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};dn(La,Nr);var zl=function(){var n,e;zn.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(c){return c};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,a=[];for(s in a.push("<<"),r)a.push("/"+s+" ("+Ds(i(r[s]))+")");return a.push(">>"),a.join(`
`)},set:function(i){qt(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ve.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};dn(zl,zn),La.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},La.prototype.createOption=function(n){var e=new zl;return e.Parent=this,e.optionName=n,this.Kids.push(e),Cb.call(this.scope,e),e};var Tl=function(){Nr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ve.CheckBox.createAppearanceStream()};dn(Tl,Nr);var Es=function(){zn.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!dr(this.Ff,13)},set:function(e){e?this.Ff=fr(this.Ff,13):this.Ff=pr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!dr(this.Ff,21)},set:function(e){e?this.Ff=fr(this.Ff,21):this.Ff=pr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!dr(this.Ff,23)},set:function(e){e?this.Ff=fr(this.Ff,23):this.Ff=pr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!dr(this.Ff,24)},set:function(e){e?this.Ff=fr(this.Ff,24):this.Ff=pr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!dr(this.Ff,25)},set:function(e){e?this.Ff=fr(this.Ff,25):this.Ff=pr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!dr(this.Ff,26)},set:function(e){e?this.Ff=fr(this.Ff,26):this.Ff=pr(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};dn(Es,zn);var Rl=function(){Es.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!dr(this.Ff,14)},set:function(n){n?this.Ff=fr(this.Ff,14):this.Ff=pr(this.Ff,14)}}),this.password=!0};dn(Rl,Es);var Ve={CheckBox:{createAppearanceStream:function(){return{N:{On:Ve.CheckBox.YesNormal},D:{On:Ve.CheckBox.YesPushDown,Off:Ve.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=Xn(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),s=ju(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+ht(Ve.internal.getWidth(n))+" "+ht(Ve.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+ht(s.fontSize)+" Tf "+i),t.push("BT"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=Xn(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],s=Ve.internal.getHeight(n),a=Ve.internal.getWidth(n),c=ju(n,n.caption);return i.push("1 g"),i.push("0 0 "+ht(a)+" "+ht(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+ht(a-1)+" "+ht(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+ht(c.fontSize)+" Tf "+r),i.push(c.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=Xn(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+ht(Ve.internal.getWidth(n))+" "+ht(Ve.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:Ve.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=Ve.RadioButton.Circle.YesNormal,e.D[n]=Ve.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=Xn(n);e.scope=n.scope;var t=[],r=Ve.internal.getWidth(n)<=Ve.internal.getHeight(n)?Ve.internal.getWidth(n)/4:Ve.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Ve.internal.Bezier_C,s=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+qi(Ve.internal.getWidth(n)/2)+" "+qi(Ve.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Xn(n);e.scope=n.scope;var t=[],r=Ve.internal.getWidth(n)<=Ve.internal.getHeight(n)?Ve.internal.getWidth(n)/4:Ve.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Ve.internal.Bezier_C).toFixed(5)),a=Number((r*Ve.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+qi(Ve.internal.getWidth(n)/2)+" "+qi(Ve.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+qi(Ve.internal.getWidth(n)/2)+" "+qi(Ve.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),t.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),t.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),t.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=Xn(n);e.scope=n.scope;var t=[],r=Ve.internal.getWidth(n)<=Ve.internal.getHeight(n)?Ve.internal.getWidth(n)/4:Ve.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Ve.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+qi(Ve.internal.getWidth(n)/2)+" "+qi(Ve.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:Ve.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=Ve.RadioButton.Cross.YesNormal,e.D[n]=Ve.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=Xn(n);e.scope=n.scope;var t=[],r=Ve.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+ht(Ve.internal.getWidth(n)-2)+" "+ht(Ve.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(ht(r.x1.x)+" "+ht(r.x1.y)+" m"),t.push(ht(r.x2.x)+" "+ht(r.x2.y)+" l"),t.push(ht(r.x4.x)+" "+ht(r.x4.y)+" m"),t.push(ht(r.x3.x)+" "+ht(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Xn(n);e.scope=n.scope;var t=Ve.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+ht(Ve.internal.getWidth(n))+" "+ht(Ve.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+ht(Ve.internal.getWidth(n)-2)+" "+ht(Ve.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(ht(t.x1.x)+" "+ht(t.x1.y)+" m"),r.push(ht(t.x2.x)+" "+ht(t.x2.y)+" l"),r.push(ht(t.x4.x)+" "+ht(t.x4.y)+" m"),r.push(ht(t.x3.x)+" "+ht(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=Xn(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+ht(Ve.internal.getWidth(n))+" "+ht(Ve.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};Ve.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=Ve.internal.getWidth(n),t=Ve.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},Ve.internal.getWidth=function(n){var e=0;return qt(n)==="object"&&(e=tf(n.Rect[2])),e},Ve.internal.getHeight=function(n){var e=0;return qt(n)==="object"&&(e=tf(n.Rect[3])),e};var Cb=sr.addField=function(n){if(Lb(this,n),!(n instanceof zn))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};sr.AcroFormChoiceField=ja,sr.AcroFormListBox=Aa,sr.AcroFormComboBox=ka,sr.AcroFormEditBox=Nl,sr.AcroFormButton=Nr,sr.AcroFormPushButton=El,sr.AcroFormRadioButton=La,sr.AcroFormCheckBox=Tl,sr.AcroFormTextField=Es,sr.AcroFormPasswordField=Rl,sr.AcroFormAppearance=Ve,sr.AcroForm={ChoiceField:ja,ListBox:Aa,ComboBox:ka,EditBox:Nl,Button:Nr,PushButton:El,RadioButton:La,CheckBox:Tl,TextField:Es,PasswordField:Rl,Appearance:Ve},it.AcroForm={ChoiceField:ja,ListBox:Aa,ComboBox:ka,EditBox:Nl,Button:Nr,PushButton:El,RadioButton:La,CheckBox:Tl,TextField:Es,PasswordField:Rl,Appearance:Ve};it.AcroForm;function Kp(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=n.__addimage__.getImageFileTypeByImageData=function(N,T){var V,U,ne,se,de,ie=e;if((T=T||e)==="RGBA"||N.data!==void 0&&N.data instanceof Uint8ClampedArray&&"height"in N&&"width"in N)return"RGBA";if(te(N))for(de in t)for(ne=t[de],V=0;V<ne.length;V+=1){for(se=!0,U=0;U<ne[V].length;U+=1)if(ne[V][U]!==void 0&&ne[V][U]!==N[U]){se=!1;break}if(se===!0){ie=de;break}}else for(de in t)for(ne=t[de],V=0;V<ne.length;V+=1){for(se=!0,U=0;U<ne[V].length;U+=1)if(ne[V][U]!==void 0&&ne[V][U]!==N.charCodeAt(U)){se=!1;break}if(se===!0){ie=de;break}}return ie===e&&T!==e&&(ie=T),ie},i=function N(T){for(var V=this.internal.write,U=this.internal.putStream,ne=(0,this.internal.getFilters)();ne.indexOf("FlateEncode")!==-1;)ne.splice(ne.indexOf("FlateEncode"),1);T.objectId=this.internal.newObject();var se=[];if(se.push({key:"Type",value:"/XObject"}),se.push({key:"Subtype",value:"/Image"}),se.push({key:"Width",value:T.width}),se.push({key:"Height",value:T.height}),T.colorSpace===j.INDEXED?se.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(T.palette.length/3-1)+" "+("sMask"in T&&T.sMask!==void 0?T.objectId+2:T.objectId+1)+" 0 R]"}):(se.push({key:"ColorSpace",value:"/"+T.colorSpace}),T.colorSpace===j.DEVICE_CMYK&&se.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),se.push({key:"BitsPerComponent",value:T.bitsPerComponent}),"decodeParameters"in T&&T.decodeParameters!==void 0&&se.push({key:"DecodeParms",value:"<<"+T.decodeParameters+">>"}),"transparency"in T&&Array.isArray(T.transparency)){for(var de="",ie=0,fe=T.transparency.length;ie<fe;ie++)de+=T.transparency[ie]+" "+T.transparency[ie]+" ";se.push({key:"Mask",value:"["+de+"]"})}T.sMask!==void 0&&se.push({key:"SMask",value:T.objectId+1+" 0 R"});var ve=T.filter!==void 0?["/"+T.filter]:void 0;if(U({data:T.data,additionalKeyValues:se,alreadyAppliedFilters:ve,objectId:T.objectId}),V("endobj"),"sMask"in T&&T.sMask!==void 0){var Fe="/Predictor "+T.predictor+" /Colors 1 /BitsPerComponent "+T.bitsPerComponent+" /Columns "+T.width,P={width:T.width,height:T.height,colorSpace:"DeviceGray",bitsPerComponent:T.bitsPerComponent,decodeParameters:Fe,data:T.sMask};"filter"in T&&(P.filter=T.filter),N.call(this,P)}if(T.colorSpace===j.INDEXED){var D=this.internal.newObject();U({data:M(new Uint8Array(T.palette)),objectId:D}),V("endobj")}},s=function(){var N=this.internal.collections.addImage_images;for(var T in N)i.call(this,N[T])},a=function(){var N,T=this.internal.collections.addImage_images,V=this.internal.write;for(var U in T)V("/I"+(N=T[U]).index,N.objectId,"0","R")},c=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a))},l=function(){var N=this.internal.collections.addImage_images;return c.call(this),N},f=function(){return Object.keys(this.internal.collections.addImage_images).length},g=function(N){return typeof n["process"+N.toUpperCase()]=="function"},m=function(N){return qt(N)==="object"&&N.nodeType===1},y=function(N,T){if(N.nodeName==="IMG"&&N.hasAttribute("src")){var V=""+N.getAttribute("src");if(V.indexOf("data:image/")===0)return _o(unescape(V).split("base64,").pop());var U=n.loadFile(V,!0);if(U!==void 0)return U}if(N.nodeName==="CANVAS"){if(N.width===0||N.height===0)throw new Error("Given canvas must have data. Canvas width: "+N.width+", height: "+N.height);var ne;switch(T){case"PNG":ne="image/png";break;case"WEBP":ne="image/webp";break;case"JPEG":case"JPG":default:ne="image/jpeg"}return _o(N.toDataURL(ne,1).split("base64,").pop())}},v=function(N){var T=this.internal.collections.addImage_images;if(T){for(var V in T)if(N===T[V].alias)return T[V]}},k=function(N,T,V){return N||T||(N=-96,T=-96),N<0&&(N=-1*V.width*72/N/this.internal.scaleFactor),T<0&&(T=-1*V.height*72/T/this.internal.scaleFactor),N===0&&(N=T*V.width/V.height),T===0&&(T=N*V.height/V.width),[N,T]},S=function(N,T,V,U,ne,se){var de=k.call(this,V,U,ne),ie=this.internal.getCoordinateString,fe=this.internal.getVerticalCoordinateString,ve=l.call(this);if(V=de[0],U=de[1],ve[ne.index]=ne,se){se*=Math.PI/180;var Fe=Math.cos(se),P=Math.sin(se),D=function(H){return H.toFixed(4)},q=[D(Fe),D(P),D(-1*P),D(Fe),0,0,"cm"]}this.internal.write("q"),se?(this.internal.write([1,"0","0",1,ie(N),fe(T+U),"cm"].join(" ")),this.internal.write(q.join(" ")),this.internal.write([ie(V),"0","0",ie(U),"0","0","cm"].join(" "))):this.internal.write([ie(V),"0","0",ie(U),ie(N),fe(T+U),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ne.index+" Do"),this.internal.write("Q")},j=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var w=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},C=n.__addimage__.sHashCode=function(N){var T,V,U=0;if(typeof N=="string")for(V=N.length,T=0;T<V;T++)U=(U<<5)-U+N.charCodeAt(T),U|=0;else if(te(N))for(V=N.byteLength/2,T=0;T<V;T++)U=(U<<5)-U+N[T],U|=0;return U},F=n.__addimage__.validateStringAsBase64=function(N){(N=N||"").toString().trim();var T=!0;return N.length===0&&(T=!1),N.length%4!=0&&(T=!1),/^[A-Za-z0-9+/]+$/.test(N.substr(0,N.length-2))===!1&&(T=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(N.substr(-2))===!1&&(T=!1),T},Z=n.__addimage__.extractImageFromDataUrl=function(N){if(N==null||!(N=N.trim()).startsWith("data:"))return null;var T=N.indexOf(",");return T<0?null:N.substring(0,T).trim().endsWith("base64")?N.substring(T+1):null},ae=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(N){return ae()&&N instanceof ArrayBuffer};var te=n.__addimage__.isArrayBufferView=function(N){return ae()&&typeof Uint32Array<"u"&&(N instanceof Int8Array||N instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&N instanceof Uint8ClampedArray||N instanceof Int16Array||N instanceof Uint16Array||N instanceof Int32Array||N instanceof Uint32Array||N instanceof Float32Array||N instanceof Float64Array)},G=n.__addimage__.binaryStringToUint8Array=function(N){for(var T=N.length,V=new Uint8Array(T),U=0;U<T;U++)V[U]=N.charCodeAt(U);return V},M=n.__addimage__.arrayBufferToBinaryString=function(N){for(var T="",V=te(N)?N:new Uint8Array(N),U=0;U<V.length;U+=8192)T+=String.fromCharCode.apply(null,V.subarray(U,U+8192));return T};n.addImage=function(){var N,T,V,U,ne,se,de,ie,fe;if(typeof arguments[1]=="number"?(T=e,V=arguments[1],U=arguments[2],ne=arguments[3],se=arguments[4],de=arguments[5],ie=arguments[6],fe=arguments[7]):(T=arguments[1],V=arguments[2],U=arguments[3],ne=arguments[4],se=arguments[5],de=arguments[6],ie=arguments[7],fe=arguments[8]),qt(N=arguments[0])==="object"&&!m(N)&&"imageData"in N){var ve=N;N=ve.imageData,T=ve.format||T||e,V=ve.x||V||0,U=ve.y||U||0,ne=ve.w||ve.width||ne,se=ve.h||ve.height||se,de=ve.alias||de,ie=ve.compression||ie,fe=ve.rotation||ve.angle||fe}var Fe=this.internal.getFilters();if(ie===void 0&&Fe.indexOf("FlateEncode")!==-1&&(ie="SLOW"),isNaN(V)||isNaN(U))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var P=z.call(this,N,T,de,ie);return S.call(this,V,U,ne,se,P,fe),this};var z=function(N,T,V,U){var ne,se,de;if(typeof N=="string"&&r(N)===e){N=unescape(N);var ie=W(N,!1);(ie!==""||(ie=n.loadFile(N,!0))!==void 0)&&(N=ie)}if(m(N)&&(N=y(N,T)),T=r(N,T),!g(T))throw new Error("addImage does not support files of type '"+T+"', please ensure that a plugin for '"+T+"' support is added.");if(((de=V)==null||de.length===0)&&(V=function(fe){return typeof fe=="string"||te(fe)?C(fe):te(fe.data)?C(fe.data):null}(N)),(ne=v.call(this,V))||(ae()&&(N instanceof Uint8Array||T==="RGBA"||(se=N,N=G(N))),ne=this["process"+T.toUpperCase()](N,f.call(this),V,function(fe){return fe&&typeof fe=="string"&&(fe=fe.toUpperCase()),fe in n.image_compression?fe:w.NONE}(U),se)),!ne)throw new Error("An unknown error occurred whilst processing the image.");return ne},W=n.__addimage__.convertBase64ToBinaryString=function(N,T){T=typeof T!="boolean"||T;var V,U="";if(typeof N=="string"){var ne;V=(ne=Z(N))!==null&&ne!==void 0?ne:N;try{U=_o(V)}catch(se){if(T)throw F(V)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+se.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return U};n.getImageProperties=function(N){var T,V,U="";if(m(N)&&(N=y(N)),typeof N=="string"&&r(N)===e&&((U=W(N,!1))===""&&(U=n.loadFile(N)||""),N=U),V=r(N),!g(V))throw new Error("addImage does not support files of type '"+V+"', please ensure that a plugin for '"+V+"' support is added.");if(!ae()||N instanceof Uint8Array||(N=G(N)),!(T=this["process"+V.toUpperCase()](N)))throw new Error("An unknown error occurred whilst processing the image");return T.fileType=V,T}})(it.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};it.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,s,a=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(t.objId),f=t.pageContext.annotations,g=!1,m=0;m<f.length&&!g;m++)switch((r=f[m]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(g=!0);break;case"reference":case"text":case"freetext":g=!0}if(g!=0){this.internal.write("/Annots [");for(var y=0;y<f.length;y++){r=f[y];var v=this.internal.pdfEscape,k=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var S=this.internal.newAdditionalObject(),j=this.internal.newAdditionalObject(),w=this.internal.getEncryptor(S.objId),C=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+a(r.bounds.x)+" "+c(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w)+" "+c(r.bounds.y)+"] ")+"/Contents ("+v(w(r.contents))+")",s+=" /Popup "+j.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+v(w(C))+") >>",S.content=s;var F=S.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+a(r.bounds.x+30)+" "+c(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w+30)+" "+c(r.bounds.y)+"] ")+" /Parent "+F,r.open&&(s+=" /Open true"),s+=" >>",j.content=s,this.internal.write(S.objId,"0 R",j.objId,"0 R");break;case"freetext":i="/Rect ["+a(r.bounds.x)+" "+c(r.bounds.y)+" "+a(r.bounds.x+r.bounds.w)+" "+c(r.bounds.y+r.bounds.h)+"] ";var Z=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+v(k(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+Z+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var ae=this.annotations._nameMap[r.options.name];r.options.pageNumber=ae.page,r.options.top=ae.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+v(k(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var te=c(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+te+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,s,a){var c=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString;c.pageContext.annotations.push({finalBounds:{x:l(t),y:f(r),w:l(t+i),h:f(r+s)},options:a,type:"link"})},n.textWithLink=function(t,r,i,s){var a,c,l=this.getTextWidth(t),f=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){c=s.maxWidth;var g=this.splitTextToSize(t,c).length;a=Math.ceil(f*g)}else c=l,a=f;return this.text(t,r,i,s),i+=.2*f,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-f,c,a,s),l},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}}(it.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var s=n.__arabicParser__.isInArabicSubstitutionA=function(S){return e[S.charCodeAt(0)]!==void 0},a=n.__arabicParser__.isArabicLetter=function(S){return typeof S=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(S)},c=n.__arabicParser__.isArabicEndLetter=function(S){return a(S)&&s(S)&&e[S.charCodeAt(0)].length<=2},l=n.__arabicParser__.isArabicAlfLetter=function(S){return a(S)&&i.indexOf(S.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(S){return a(S)&&s(S)&&e[S.charCodeAt(0)].length>=1};var f=n.__arabicParser__.arabicLetterHasFinalForm=function(S){return a(S)&&s(S)&&e[S.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(S){return a(S)&&s(S)&&e[S.charCodeAt(0)].length>=3};var g=n.__arabicParser__.arabicLetterHasMedialForm=function(S){return a(S)&&s(S)&&e[S.charCodeAt(0)].length==4},m=n.__arabicParser__.resolveLigatures=function(S){var j=0,w=t,C="",F=0;for(j=0;j<S.length;j+=1)w[S.charCodeAt(j)]!==void 0?(F++,typeof(w=w[S.charCodeAt(j)])=="number"&&(C+=String.fromCharCode(w),w=t,F=0),j===S.length-1&&(w=t,C+=S.charAt(j-(F-1)),j-=F-1,F=0)):(w=t,C+=S.charAt(j-F),j-=F,F=0);return C};n.__arabicParser__.isArabicDiacritic=function(S){return S!==void 0&&r[S.charCodeAt(0)]!==void 0};var y=n.__arabicParser__.getCorrectForm=function(S,j,w){return a(S)?s(S)===!1?-1:!f(S)||!a(j)&&!a(w)||!a(w)&&c(j)||c(S)&&!a(j)||c(S)&&l(j)||c(S)&&c(j)?0:g(S)&&a(j)&&!c(j)&&a(w)&&f(w)?3:c(S)||!a(w)?1:2:-1},v=function(S){var j=0,w=0,C=0,F="",Z="",ae="",te=(S=S||"").split("\\s+"),G=[];for(j=0;j<te.length;j+=1){for(G.push(""),w=0;w<te[j].length;w+=1)F=te[j][w],Z=te[j][w-1],ae=te[j][w+1],a(F)?(C=y(F,Z,ae),G[j]+=C!==-1?String.fromCharCode(e[F.charCodeAt(0)][C]):F):G[j]+=F;G[j]=m(G[j])}return G.join(" ")},k=n.__arabicParser__.processArabic=n.processArabic=function(){var S,j=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,w=[];if(Array.isArray(j)){var C=0;for(w=[],C=0;C<j.length;C+=1)Array.isArray(j[C])?w.push([v(j[C][0]),j[C][1],j[C][2]]):w.push([v(j[C])]);S=w}else S=v(j);return typeof arguments[0]=="string"?S:(arguments[0].text=S,arguments[0])};n.events.push(["preProcessText",k])}(it.API),it.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(c){t=c}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(c){r=isNaN(c)||Number.isInteger(c)===!1||c<0?150:c,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(c){i=isNaN(c)||Number.isInteger(c)===!1||c<0?300:c,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(c){s=c}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(c){a=c}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(it.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(S){l=S}});var f=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return f},set:function(S){f=S}});var g=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return g},set:function(S){g=S}});var m=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return m},set:function(S){m=S}});var y=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return y},set:function(S){y=S}});var v=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return v},set:function(S){v=S}});var k=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return k},set:function(S){k=S}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},n.getTextDimensions=function(l,f){r.call(this);var g=(f=f||{}).fontSize||this.getFontSize(),m=f.font||this.getFont(),y=f.scaleFactor||this.internal.scaleFactor,v=0,k=0,S=0,j=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var w=f.maxWidth;w>0?typeof l=="string"?l=this.splitTextToSize(l,w):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(F,Z){return F.concat(j.splitTextToSize(Z,w))},[])):l=Array.isArray(l)?l:[l];for(var C=0;C<l.length;C++)v<(S=this.getStringUnitWidth(l[C],{font:m})*g)&&(v=S);return v!==0&&(k=l.length),{w:v/=y,h:Math.max((k*g*this.getLineHeightFactor()-g*(this.getLineHeightFactor()-1))/y,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=n.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var f=this.internal.__cell__.lastCell,g=this.internal.__cell__.padding,m=this.internal.__cell__.margins||e,y=this.internal.__cell__.tableHeaderRow,v=this.internal.__cell__.printHeaders;return f.lineNumber!==void 0&&(f.lineNumber===l.lineNumber?(l.x=(f.x||0)+(f.width||0),l.y=f.y||0):f.y+f.height+l.height+m.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=m.top,v&&y&&(this.printHeaderRow(l.lineNumber,!0),l.y+=y[0].height)):l.y=f.y+f.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,t===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-g,l.y+g,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+g,{align:"center",baseline:"top",maxWidth:l.width-g-g}):this.text(l.text,l.x+g,l.y+g,{align:"left",baseline:"top",maxWidth:l.width-g-g})),this.internal.__cell__.lastCell=l,this};n.table=function(l,f,g,m,y){if(r.call(this),!g)throw new Error("No data for PDF table.");var v,k,S,j,w=[],C=[],F=[],Z={},ae={},te=[],G=[],M=(y=y||{}).autoSize||!1,z=y.printHeaders!==!1,W=y.css&&y.css["font-size"]!==void 0?16*y.css["font-size"]:y.fontSize||12,N=y.margins||Object.assign({width:this.getPageWidth()},e),T=typeof y.padding=="number"?y.padding:3,V=y.headerBackgroundColor||"#c8c8c8",U=y.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=z,this.internal.__cell__.margins=N,this.internal.__cell__.table_font_size=W,this.internal.__cell__.padding=T,this.internal.__cell__.headerBackgroundColor=V,this.internal.__cell__.headerTextColor=U,this.setFontSize(W),m==null)C=w=Object.keys(g[0]),F=w.map(function(){return"left"});else if(Array.isArray(m)&&qt(m[0])==="object")for(w=m.map(function(ve){return ve.name}),C=m.map(function(ve){return ve.prompt||ve.name||""}),F=m.map(function(ve){return ve.align||"left"}),v=0;v<m.length;v+=1)ae[m[v].name]=m[v].width*(19.049976/25.4);else Array.isArray(m)&&typeof m[0]=="string"&&(C=w=m,F=w.map(function(){return"left"}));if(M||Array.isArray(m)&&typeof m[0]=="string")for(v=0;v<w.length;v+=1){for(Z[j=w[v]]=g.map(function(ve){return ve[j]}),this.setFont(void 0,"bold"),te.push(this.getTextDimensions(C[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),k=Z[j],this.setFont(void 0,"normal"),S=0;S<k.length;S+=1)te.push(this.getTextDimensions(k[S],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);ae[j]=Math.max.apply(null,te)+T+T,te=[]}if(z){var ne={};for(v=0;v<w.length;v+=1)ne[w[v]]={},ne[w[v]].text=C[v],ne[w[v]].align=F[v];var se=c.call(this,ne,ae);G=w.map(function(ve){return new s(l,f,ae[ve],se,ne[ve].text,void 0,ne[ve].align)}),this.setTableHeaderRow(G),this.printHeaderRow(1,!1)}var de=m.reduce(function(ve,Fe){return ve[Fe.name]=Fe.align,ve},{});for(v=0;v<g.length;v+=1){"rowStart"in y&&y.rowStart instanceof Function&&y.rowStart({row:v,data:g[v]},this);var ie=c.call(this,g[v],ae);for(S=0;S<w.length;S+=1){var fe=g[v][w[S]];"cellStart"in y&&y.cellStart instanceof Function&&y.cellStart({row:v,col:S,data:fe},this),a.call(this,new s(l,f,ae[w[S]],ie,fe,v+2,de[w[S]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=f,this};var c=function(l,f){var g=this.internal.__cell__.padding,m=this.internal.__cell__.table_font_size,y=this.internal.scaleFactor;return Object.keys(l).map(function(v){var k=l[v];return this.splitTextToSize(k.hasOwnProperty("text")?k.text:k,f[v]-g-g)},this).map(function(v){return this.getLineHeightFactor()*v.length*m/y+g+g},this).reduce(function(v,k){return Math.max(v,k)},0)};n.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},n.printHeaderRow=function(l,f){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var g;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var m=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(m[0],m[1],m[2],m[3],void 0,-1)}this.setFont(void 0,"bold");for(var y=[],v=0;v<this.internal.__cell__.tableHeaderRow.length;v+=1){g=this.internal.__cell__.tableHeaderRow[v].clone(),f&&(g.y=this.internal.__cell__.margins.top||0,y.push(g)),g.lineNumber=l;var k=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,g),this.setTextColor(k)}y.length>0&&this.setTableHeaderRow(y),this.setFont(void 0,"normal"),t=!1}}(it.API);var Jp={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Yp=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Au=Kp(Yp),Zp=[100,200,300,400,500,600,700,800,900],Pb=Kp(Zp);function ku(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(s){return Jp[s=s||"normal"]?s:"normal"}(n.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(n.weight),i=function(s){return typeof Au[s=s||"normal"]=="number"?s:"normal"}(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function rf(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var Ib={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},nf={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function sf(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function Nb(n,e,t){for(var r=(t=t||{}).defaultFontFamily||"times",i=Object.assign({},Ib,t.genericFontFamilies||{}),s=null,a=null,c=0;c<e.length;++c)if(i[(s=ku(e[c])).family]&&(s.family=i[s.family]),n.hasOwnProperty(s.family)){a=n[s.family];break}if(!(a=a||n[r]))throw new Error("Could not find a font-family for the rule '"+sf(s)+"' and default family '"+r+"'.");if(a=function(l,f){if(f[l])return f[l];var g=Au[l],m=g<=Au.normal?-1:1,y=rf(f,Yp,g,m);if(!y)throw new Error("Could not find a matching font-stretch value for "+l);return y}(s.stretch,a),a=function(l,f){if(f[l])return f[l];for(var g=Jp[l],m=0;m<g.length;++m)if(f[g[m]])return f[g[m]];throw new Error("Could not find a matching font-style for "+l)}(s.style,a),!(a=function(l,f){if(f[l])return f[l];if(l===400&&f[500])return f[500];if(l===500&&f[400])return f[400];var g=Pb[l],m=rf(f,Zp,g,l<400?-1:1);if(!m)throw new Error("Could not find a matching font-weight for value "+l);return m}(s.weight,a)))throw new Error("Failed to resolve a font for the rule '"+sf(s)+"'.");return a}function af(n){return n.trimLeft()}function Eb(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function Tb(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var Al,of,lf,Yc=["times"];(function(n){var e,t,r,i,s,a,c,l,f,g=function(P){return P=P||{},this.isStrokeTransparent=P.isStrokeTransparent||!1,this.strokeOpacity=P.strokeOpacity||1,this.strokeStyle=P.strokeStyle||"#000000",this.fillStyle=P.fillStyle||"#000000",this.isFillTransparent=P.isFillTransparent||!1,this.fillOpacity=P.fillOpacity||1,this.font=P.font||"10px sans-serif",this.textBaseline=P.textBaseline||"alphabetic",this.textAlign=P.textAlign||"left",this.lineWidth=P.lineWidth||1,this.lineJoin=P.lineJoin||"miter",this.lineCap=P.lineCap||"butt",this.path=P.path||[],this.transform=P.transform!==void 0?P.transform.clone():new l,this.globalCompositeOperation=P.globalCompositeOperation||"normal",this.globalAlpha=P.globalAlpha||1,this.clip_path=P.clip_path||[],this.currentPoint=P.currentPoint||new a,this.miterLimit=P.miterLimit||10,this.lastPoint=P.lastPoint||new a,this.lineDashOffset=P.lineDashOffset||0,this.lineDash=P.lineDash||[],this.margin=P.margin||[0,0,0,0],this.prevPageLastElemOffset=P.prevPageLastElemOffset||0,this.ignoreClearRect=typeof P.ignoreClearRect!="boolean"||P.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new m(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,c=this.internal.Rectangle,l=this.internal.Matrix,f=new g}]);var m=function(P){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var D=P;Object.defineProperty(this,"pdf",{get:function(){return D}});var q=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return q},set:function(be){q=!!be}});var H=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return H},set:function(be){H=!!be}});var Q=0;Object.defineProperty(this,"posX",{get:function(){return Q},set:function(be){isNaN(be)||(Q=be)}});var he=0;Object.defineProperty(this,"posY",{get:function(){return he},set:function(be){isNaN(be)||(he=be)}}),Object.defineProperty(this,"margin",{get:function(){return f.margin},set:function(be){var $;typeof be=="number"?$=[be,be,be,be]:(($=new Array(4))[0]=be[0],$[1]=be.length>=2?be[1]:$[0],$[2]=be.length>=3?be[2]:$[0],$[3]=be.length>=4?be[3]:$[1]),f.margin=$}});var me=!1;Object.defineProperty(this,"autoPaging",{get:function(){return me},set:function(be){me=be}});var pe=0;Object.defineProperty(this,"lastBreak",{get:function(){return pe},set:function(be){pe=be}});var Pe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Pe},set:function(be){Pe=be}}),Object.defineProperty(this,"ctx",{get:function(){return f},set:function(be){be instanceof g&&(f=be)}}),Object.defineProperty(this,"path",{get:function(){return f.path},set:function(be){f.path=be}});var Le=[];Object.defineProperty(this,"ctxStack",{get:function(){return Le},set:function(be){Le=be}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(be){var $;$=y(be),this.ctx.fillStyle=$.style,this.ctx.isFillTransparent=$.a===0,this.ctx.fillOpacity=$.a,this.pdf.setFillColor($.r,$.g,$.b,{a:$.a}),this.pdf.setTextColor($.r,$.g,$.b,{a:$.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(be){var $=y(be);this.ctx.strokeStyle=$.style,this.ctx.isStrokeTransparent=$.a===0,this.ctx.strokeOpacity=$.a,$.a===0?this.pdf.setDrawColor(255,255,255):($.a,this.pdf.setDrawColor($.r,$.g,$.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(be){["butt","round","square"].indexOf(be)!==-1&&(this.ctx.lineCap=be,this.pdf.setLineCap(be))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(be){isNaN(be)||(this.ctx.lineWidth=be,this.pdf.setLineWidth(be))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(be){["bevel","round","miter"].indexOf(be)!==-1&&(this.ctx.lineJoin=be,this.pdf.setLineJoin(be))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(be){isNaN(be)||(this.ctx.miterLimit=be,this.pdf.setMiterLimit(be))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(be){this.ctx.textBaseline=be}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(be){["right","end","center","left","start"].indexOf(be)!==-1&&(this.ctx.textAlign=be)}});var Te=null;function Ne(be,$){if(Te===null){var nt=function(ze){var Ae=[];return Object.keys(ze).forEach(function(Ie){ze[Ie].forEach(function(Ee){var Re=null;switch(Ee){case"bold":Re={family:Ie,weight:"bold"};break;case"italic":Re={family:Ie,style:"italic"};break;case"bolditalic":Re={family:Ie,weight:"bold",style:"italic"};break;case"":case"normal":Re={family:Ie}}Re!==null&&(Re.ref={name:Ie,style:Ee},Ae.push(Re))})}),Ae}(be.getFontList());Te=function(ze){for(var Ae={},Ie=0;Ie<ze.length;++Ie){var Ee=ku(ze[Ie]),Re=Ee.family,Ge=Ee.stretch,Oe=Ee.style,ot=Ee.weight;Ae[Re]=Ae[Re]||{},Ae[Re][Ge]=Ae[Re][Ge]||{},Ae[Re][Ge][Oe]=Ae[Re][Ge][Oe]||{},Ae[Re][Ge][Oe][ot]=Ee}return Ae}(nt.concat($))}return Te}var Ye=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ye},set:function(be){Te=null,Ye=be}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(be){var $;if(this.ctx.font=be,($=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(be))!==null){var nt=$[1];$[2];var ze=$[3],Ae=$[4];$[5];var Ie=$[6],Ee=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ae)[2];Ae=Math.floor(Ee==="px"?parseFloat(Ae)*this.pdf.internal.scaleFactor:Ee==="em"?parseFloat(Ae)*this.pdf.getFontSize():parseFloat(Ae)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ae);var Re=function(tt){var dt,Me,lr=[],bt=tt.trim();if(bt==="")return Yc;if(bt in nf)return[nf[bt]];for(;bt!=="";){switch(Me=null,dt=(bt=af(bt)).charAt(0)){case'"':case"'":Me=Eb(bt.substring(1),dt);break;default:Me=Tb(bt)}if(Me===null||(lr.push(Me[0]),(bt=af(Me[1]))!==""&&bt.charAt(0)!==","))return Yc;bt=bt.replace(/^,/,"")}return lr}(Ie);if(this.fontFaces){var Ge=Nb(Ne(this.pdf,this.fontFaces),Re.map(function(tt){return{family:tt,stretch:"normal",weight:ze,style:nt}}));this.pdf.setFont(Ge.ref.name,Ge.ref.style)}else{var Oe="";(ze==="bold"||parseInt(ze,10)>=700||nt==="bold")&&(Oe="bold"),nt==="italic"&&(Oe+="italic"),Oe.length===0&&(Oe="normal");for(var ot="",ct={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},vt=0;vt<Re.length;vt++){if(this.pdf.internal.getFont(Re[vt],Oe,{noFallback:!0,disableWarning:!0})!==void 0){ot=Re[vt];break}if(Oe==="bolditalic"&&this.pdf.internal.getFont(Re[vt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ot=Re[vt],Oe="bold";else if(this.pdf.internal.getFont(Re[vt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ot=Re[vt],Oe="normal";break}}if(ot===""){for(var It=0;It<Re.length;It++)if(ct[Re[It]]){ot=ct[Re[It]];break}}ot=ot===""?"Times":ot,this.pdf.setFont(ot,Oe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(be){this.ctx.globalCompositeOperation=be}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(be){this.ctx.globalAlpha=be}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(be){this.ctx.lineDashOffset=be,Fe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(be){this.ctx.lineDash=be,Fe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(be){this.ctx.ignoreClearRect=!!be}})};m.prototype.setLineDash=function(P){this.lineDash=P},m.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},m.prototype.fill=function(){Z.call(this,"fill",!1)},m.prototype.stroke=function(){Z.call(this,"stroke",!1)},m.prototype.beginPath=function(){this.path=[{type:"begin"}]},m.prototype.moveTo=function(P,D){if(isNaN(P)||isNaN(D))throw $t.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var q=this.ctx.transform.applyToPoint(new a(P,D));this.path.push({type:"mt",x:q.x,y:q.y}),this.ctx.lastPoint=new a(P,D)},m.prototype.closePath=function(){var P=new a(0,0),D=0;for(D=this.path.length-1;D!==-1;D--)if(this.path[D].type==="begin"&&qt(this.path[D+1])==="object"&&typeof this.path[D+1].x=="number"){P=new a(this.path[D+1].x,this.path[D+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(P.x,P.y)},m.prototype.lineTo=function(P,D){if(isNaN(P)||isNaN(D))throw $t.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var q=this.ctx.transform.applyToPoint(new a(P,D));this.path.push({type:"lt",x:q.x,y:q.y}),this.ctx.lastPoint=new a(q.x,q.y)},m.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),Z.call(this,null,!0)},m.prototype.quadraticCurveTo=function(P,D,q,H){if(isNaN(q)||isNaN(H)||isNaN(P)||isNaN(D))throw $t.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Q=this.ctx.transform.applyToPoint(new a(q,H)),he=this.ctx.transform.applyToPoint(new a(P,D));this.path.push({type:"qct",x1:he.x,y1:he.y,x:Q.x,y:Q.y}),this.ctx.lastPoint=new a(Q.x,Q.y)},m.prototype.bezierCurveTo=function(P,D,q,H,Q,he){if(isNaN(Q)||isNaN(he)||isNaN(P)||isNaN(D)||isNaN(q)||isNaN(H))throw $t.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var me=this.ctx.transform.applyToPoint(new a(Q,he)),pe=this.ctx.transform.applyToPoint(new a(P,D)),Pe=this.ctx.transform.applyToPoint(new a(q,H));this.path.push({type:"bct",x1:pe.x,y1:pe.y,x2:Pe.x,y2:Pe.y,x:me.x,y:me.y}),this.ctx.lastPoint=new a(me.x,me.y)},m.prototype.arc=function(P,D,q,H,Q,he){if(isNaN(P)||isNaN(D)||isNaN(q)||isNaN(H)||isNaN(Q))throw $t.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(he=!!he,!this.ctx.transform.isIdentity){var me=this.ctx.transform.applyToPoint(new a(P,D));P=me.x,D=me.y;var pe=this.ctx.transform.applyToPoint(new a(0,q)),Pe=this.ctx.transform.applyToPoint(new a(0,0));q=Math.sqrt(Math.pow(pe.x-Pe.x,2)+Math.pow(pe.y-Pe.y,2))}Math.abs(Q-H)>=2*Math.PI&&(H=0,Q=2*Math.PI),this.path.push({type:"arc",x:P,y:D,radius:q,startAngle:H,endAngle:Q,counterclockwise:he})},m.prototype.arcTo=function(P,D,q,H,Q){throw new Error("arcTo not implemented.")},m.prototype.rect=function(P,D,q,H){if(isNaN(P)||isNaN(D)||isNaN(q)||isNaN(H))throw $t.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(P,D),this.lineTo(P+q,D),this.lineTo(P+q,D+H),this.lineTo(P,D+H),this.lineTo(P,D),this.lineTo(P+q,D),this.lineTo(P,D)},m.prototype.fillRect=function(P,D,q,H){if(isNaN(P)||isNaN(D)||isNaN(q)||isNaN(H))throw $t.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!v.call(this)){var Q={};this.lineCap!=="butt"&&(Q.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Q.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(P,D,q,H),this.fill(),Q.hasOwnProperty("lineCap")&&(this.lineCap=Q.lineCap),Q.hasOwnProperty("lineJoin")&&(this.lineJoin=Q.lineJoin)}},m.prototype.strokeRect=function(P,D,q,H){if(isNaN(P)||isNaN(D)||isNaN(q)||isNaN(H))throw $t.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");k.call(this)||(this.beginPath(),this.rect(P,D,q,H),this.stroke())},m.prototype.clearRect=function(P,D,q,H){if(isNaN(P)||isNaN(D)||isNaN(q)||isNaN(H))throw $t.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(P,D,q,H))},m.prototype.save=function(P){P=typeof P!="boolean"||P;for(var D=this.pdf.internal.getCurrentPageInfo().pageNumber,q=0;q<this.pdf.internal.getNumberOfPages();q++)this.pdf.setPage(q+1),this.pdf.internal.out("q");if(this.pdf.setPage(D),P){this.ctx.fontSize=this.pdf.internal.getFontSize();var H=new g(this.ctx);this.ctxStack.push(this.ctx),this.ctx=H}},m.prototype.restore=function(P){P=typeof P!="boolean"||P;for(var D=this.pdf.internal.getCurrentPageInfo().pageNumber,q=0;q<this.pdf.internal.getNumberOfPages();q++)this.pdf.setPage(q+1),this.pdf.internal.out("Q");this.pdf.setPage(D),P&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},m.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var y=function(P){var D,q,H,Q;if(P.isCanvasGradient===!0&&(P=P.getColor()),!P)return{r:0,g:0,b:0,a:0,style:P};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(P))D=0,q=0,H=0,Q=0;else{var he=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(P);if(he!==null)D=parseInt(he[1]),q=parseInt(he[2]),H=parseInt(he[3]),Q=1;else if((he=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(P))!==null)D=parseInt(he[1]),q=parseInt(he[2]),H=parseInt(he[3]),Q=parseFloat(he[4]);else{if(Q=1,typeof P=="string"&&P.charAt(0)!=="#"){var me=new qp(P);P=me.ok?me.toHex():"#000000"}P.length===4?(D=P.substring(1,2),D+=D,q=P.substring(2,3),q+=q,H=P.substring(3,4),H+=H):(D=P.substring(1,3),q=P.substring(3,5),H=P.substring(5,7)),D=parseInt(D,16),q=parseInt(q,16),H=parseInt(H,16)}}return{r:D,g:q,b:H,a:Q,style:P}},v=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},k=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};m.prototype.fillText=function(P,D,q,H){if(isNaN(D)||isNaN(q)||typeof P!="string")throw $t.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(H=isNaN(H)?void 0:H,!v.call(this)){var Q=ie(this.ctx.transform.rotation),he=this.ctx.transform.scaleX;T.call(this,{text:P,x:D,y:q,scale:he,angle:Q,align:this.textAlign,maxWidth:H})}},m.prototype.strokeText=function(P,D,q,H){if(isNaN(D)||isNaN(q)||typeof P!="string")throw $t.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!k.call(this)){H=isNaN(H)?void 0:H;var Q=ie(this.ctx.transform.rotation),he=this.ctx.transform.scaleX;T.call(this,{text:P,x:D,y:q,scale:he,renderingMode:"stroke",angle:Q,align:this.textAlign,maxWidth:H})}},m.prototype.measureText=function(P){if(typeof P!="string")throw $t.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var D=this.pdf,q=this.pdf.internal.scaleFactor,H=D.internal.getFontSize(),Q=D.getStringUnitWidth(P)*H/D.internal.scaleFactor,he=function(me){var pe=(me=me||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return pe}}),this};return new he({width:Q*=Math.round(96*q/72*1e4)/1e4})},m.prototype.scale=function(P,D){if(isNaN(P)||isNaN(D))throw $t.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var q=new l(P,0,0,D,0,0);this.ctx.transform=this.ctx.transform.multiply(q)},m.prototype.rotate=function(P){if(isNaN(P))throw $t.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var D=new l(Math.cos(P),Math.sin(P),-Math.sin(P),Math.cos(P),0,0);this.ctx.transform=this.ctx.transform.multiply(D)},m.prototype.translate=function(P,D){if(isNaN(P)||isNaN(D))throw $t.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var q=new l(1,0,0,1,P,D);this.ctx.transform=this.ctx.transform.multiply(q)},m.prototype.transform=function(P,D,q,H,Q,he){if(isNaN(P)||isNaN(D)||isNaN(q)||isNaN(H)||isNaN(Q)||isNaN(he))throw $t.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var me=new l(P,D,q,H,Q,he);this.ctx.transform=this.ctx.transform.multiply(me)},m.prototype.setTransform=function(P,D,q,H,Q,he){P=isNaN(P)?1:P,D=isNaN(D)?0:D,q=isNaN(q)?0:q,H=isNaN(H)?1:H,Q=isNaN(Q)?0:Q,he=isNaN(he)?0:he,this.ctx.transform=new l(P,D,q,H,Q,he)};var S=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};m.prototype.drawImage=function(P,D,q,H,Q,he,me,pe,Pe){var Le=this.pdf.getImageProperties(P),Te=1,Ne=1,Ye=1,be=1;H!==void 0&&pe!==void 0&&(Ye=pe/H,be=Pe/Q,Te=Le.width/H*pe/H,Ne=Le.height/Q*Pe/Q),he===void 0&&(he=D,me=q,D=0,q=0),H!==void 0&&pe===void 0&&(pe=H,Pe=Q),H===void 0&&pe===void 0&&(pe=Le.width,Pe=Le.height);for(var $,nt=this.ctx.transform.decompose(),ze=ie(nt.rotate.shx),Ae=new l,Ie=(Ae=(Ae=(Ae=Ae.multiply(nt.translate)).multiply(nt.skew)).multiply(nt.scale)).applyToRectangle(new c(he-D*Ye,me-q*be,H*Te,Q*Ne)),Ee=j.call(this,Ie),Re=[],Ge=0;Ge<Ee.length;Ge+=1)Re.indexOf(Ee[Ge])===-1&&Re.push(Ee[Ge]);if(F(Re),this.autoPaging)for(var Oe=Re[0],ot=Re[Re.length-1],ct=Oe;ct<ot+1;ct++){this.pdf.setPage(ct);var vt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],It=ct===1?this.posY+this.margin[0]:this.margin[0],tt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],dt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Me=ct===1?0:tt+(ct-2)*dt;if(this.ctx.clip_path.length!==0){var lr=this.path;$=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=C($,this.posX+this.margin[3],-Me+It+this.ctx.prevPageLastElemOffset),ae.call(this,"fill",!0),this.path=lr}var bt=JSON.parse(JSON.stringify(Ie));bt=C([bt],this.posX+this.margin[3],-Me+It+this.ctx.prevPageLastElemOffset)[0];var Or=(ct>Oe||ct<ot)&&S.call(this);Or&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],vt,dt,null).clip().discardPath()),this.pdf.addImage(P,"JPEG",bt.x,bt.y,bt.w,bt.h,null,null,ze),Or&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(P,"JPEG",Ie.x,Ie.y,Ie.w,Ie.h,null,null,ze)};var j=function(P,D,q){var H=[];D=D||this.pdf.internal.pageSize.width,q=q||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Q=this.posY+this.ctx.prevPageLastElemOffset;switch(P.type){default:case"mt":case"lt":H.push(Math.floor((P.y+Q)/q)+1);break;case"arc":H.push(Math.floor((P.y+Q-P.radius)/q)+1),H.push(Math.floor((P.y+Q+P.radius)/q)+1);break;case"qct":var he=fe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x,P.y);H.push(Math.floor((he.y+Q)/q)+1),H.push(Math.floor((he.y+he.h+Q)/q)+1);break;case"bct":var me=ve(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x2,P.y2,P.x,P.y);H.push(Math.floor((me.y+Q)/q)+1),H.push(Math.floor((me.y+me.h+Q)/q)+1);break;case"rect":H.push(Math.floor((P.y+Q)/q)+1),H.push(Math.floor((P.y+P.h+Q)/q)+1)}for(var pe=0;pe<H.length;pe+=1)for(;this.pdf.internal.getNumberOfPages()<H[pe];)w.call(this);return H},w=function(){var P=this.fillStyle,D=this.strokeStyle,q=this.font,H=this.lineCap,Q=this.lineWidth,he=this.lineJoin;this.pdf.addPage(),this.fillStyle=P,this.strokeStyle=D,this.font=q,this.lineCap=H,this.lineWidth=Q,this.lineJoin=he},C=function(P,D,q){for(var H=0;H<P.length;H++)switch(P[H].type){case"bct":P[H].x2+=D,P[H].y2+=q;case"qct":P[H].x1+=D,P[H].y1+=q;case"mt":case"lt":case"arc":default:P[H].x+=D,P[H].y+=q}return P},F=function(P){return P.sort(function(D,q){return D-q})},Z=function(P,D){for(var q,H,Q=this.fillStyle,he=this.strokeStyle,me=this.lineCap,pe=this.lineWidth,Pe=Math.abs(pe*this.ctx.transform.scaleX),Le=this.lineJoin,Te=JSON.parse(JSON.stringify(this.path)),Ne=JSON.parse(JSON.stringify(this.path)),Ye=[],be=0;be<Ne.length;be++)if(Ne[be].x!==void 0)for(var $=j.call(this,Ne[be]),nt=0;nt<$.length;nt+=1)Ye.indexOf($[nt])===-1&&Ye.push($[nt]);for(var ze=0;ze<Ye.length;ze++)for(;this.pdf.internal.getNumberOfPages()<Ye[ze];)w.call(this);if(F(Ye),this.autoPaging)for(var Ae=Ye[0],Ie=Ye[Ye.length-1],Ee=Ae;Ee<Ie+1;Ee++){this.pdf.setPage(Ee),this.fillStyle=Q,this.strokeStyle=he,this.lineCap=me,this.lineWidth=Pe,this.lineJoin=Le;var Re=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ge=Ee===1?this.posY+this.margin[0]:this.margin[0],Oe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ot=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ct=Ee===1?0:Oe+(Ee-2)*ot;if(this.ctx.clip_path.length!==0){var vt=this.path;q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=C(q,this.posX+this.margin[3],-ct+Ge+this.ctx.prevPageLastElemOffset),ae.call(this,P,!0),this.path=vt}if(H=JSON.parse(JSON.stringify(Te)),this.path=C(H,this.posX+this.margin[3],-ct+Ge+this.ctx.prevPageLastElemOffset),D===!1||Ee===0){var It=(Ee>Ae||Ee<Ie)&&S.call(this);It&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Re,ot,null).clip().discardPath()),ae.call(this,P,D),It&&this.pdf.restoreGraphicsState()}this.lineWidth=pe}else this.lineWidth=Pe,ae.call(this,P,D),this.lineWidth=pe;this.path=Te},ae=function(P,D){if((P!=="stroke"||D||!k.call(this))&&(P==="stroke"||D||!v.call(this))){for(var q,H,Q=[],he=this.path,me=0;me<he.length;me++){var pe=he[me];switch(pe.type){case"begin":Q.push({begin:!0});break;case"close":Q.push({close:!0});break;case"mt":Q.push({start:pe,deltas:[],abs:[]});break;case"lt":var Pe=Q.length;if(he[me-1]&&!isNaN(he[me-1].x)&&(q=[pe.x-he[me-1].x,pe.y-he[me-1].y],Pe>0)){for(;Pe>=0;Pe--)if(Q[Pe-1].close!==!0&&Q[Pe-1].begin!==!0){Q[Pe-1].deltas.push(q),Q[Pe-1].abs.push(pe);break}}break;case"bct":q=[pe.x1-he[me-1].x,pe.y1-he[me-1].y,pe.x2-he[me-1].x,pe.y2-he[me-1].y,pe.x-he[me-1].x,pe.y-he[me-1].y],Q[Q.length-1].deltas.push(q);break;case"qct":var Le=he[me-1].x+2/3*(pe.x1-he[me-1].x),Te=he[me-1].y+2/3*(pe.y1-he[me-1].y),Ne=pe.x+2/3*(pe.x1-pe.x),Ye=pe.y+2/3*(pe.y1-pe.y),be=pe.x,$=pe.y;q=[Le-he[me-1].x,Te-he[me-1].y,Ne-he[me-1].x,Ye-he[me-1].y,be-he[me-1].x,$-he[me-1].y],Q[Q.length-1].deltas.push(q);break;case"arc":Q.push({deltas:[],abs:[],arc:!0}),Array.isArray(Q[Q.length-1].abs)&&Q[Q.length-1].abs.push(pe)}}H=D?null:P==="stroke"?"stroke":"fill";for(var nt=!1,ze=0;ze<Q.length;ze++)if(Q[ze].arc)for(var Ae=Q[ze].abs,Ie=0;Ie<Ae.length;Ie++){var Ee=Ae[Ie];Ee.type==="arc"?M.call(this,Ee.x,Ee.y,Ee.radius,Ee.startAngle,Ee.endAngle,Ee.counterclockwise,void 0,D,!nt):V.call(this,Ee.x,Ee.y),nt=!0}else if(Q[ze].close===!0)this.pdf.internal.out("h"),nt=!1;else if(Q[ze].begin!==!0){var Re=Q[ze].start.x,Ge=Q[ze].start.y;U.call(this,Q[ze].deltas,Re,Ge),nt=!0}H&&z.call(this,H),D&&W.call(this)}},te=function(P){var D=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,q=D*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return P-q;case"top":return P+D-q;case"hanging":return P+D-2*q;case"middle":return P+D/2-q;case"ideographic":return P;case"alphabetic":default:return P}},G=function(P){return P+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};m.prototype.createLinearGradient=function(){var P=function(){};return P.colorStops=[],P.addColorStop=function(D,q){this.colorStops.push([D,q])},P.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},P.isCanvasGradient=!0,P},m.prototype.createPattern=function(){return this.createLinearGradient()},m.prototype.createRadialGradient=function(){return this.createLinearGradient()};var M=function(P,D,q,H,Q,he,me,pe,Pe){for(var Le=se.call(this,q,H,Q,he),Te=0;Te<Le.length;Te++){var Ne=Le[Te];Te===0&&(Pe?N.call(this,Ne.x1+P,Ne.y1+D):V.call(this,Ne.x1+P,Ne.y1+D)),ne.call(this,P,D,Ne.x2,Ne.y2,Ne.x3,Ne.y3,Ne.x4,Ne.y4)}pe?W.call(this):z.call(this,me)},z=function(P){switch(P){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},W=function(){this.pdf.clip(),this.pdf.discardPath()},N=function(P,D){this.pdf.internal.out(t(P)+" "+r(D)+" m")},T=function(P){var D;switch(P.align){case"right":case"end":D="right";break;case"center":D="center";break;case"left":case"start":default:D="left"}var q=this.pdf.getTextDimensions(P.text),H=te.call(this,P.y),Q=G.call(this,H)-q.h,he=this.ctx.transform.applyToPoint(new a(P.x,H)),me=this.ctx.transform.decompose(),pe=new l;pe=(pe=(pe=pe.multiply(me.translate)).multiply(me.skew)).multiply(me.scale);for(var Pe,Le,Te,Ne=this.ctx.transform.applyToRectangle(new c(P.x,H,q.w,q.h)),Ye=pe.applyToRectangle(new c(P.x,Q,q.w,q.h)),be=j.call(this,Ye),$=[],nt=0;nt<be.length;nt+=1)$.indexOf(be[nt])===-1&&$.push(be[nt]);if(F($),this.autoPaging)for(var ze=$[0],Ae=$[$.length-1],Ie=ze;Ie<Ae+1;Ie++){this.pdf.setPage(Ie);var Ee=Ie===1?this.posY+this.margin[0]:this.margin[0],Re=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ge=this.pdf.internal.pageSize.height-this.margin[2],Oe=Ge-this.margin[0],ot=this.pdf.internal.pageSize.width-this.margin[1],ct=ot-this.margin[3],vt=Ie===1?0:Re+(Ie-2)*Oe;if(this.ctx.clip_path.length!==0){var It=this.path;Pe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=C(Pe,this.posX+this.margin[3],-1*vt+Ee),ae.call(this,"fill",!0),this.path=It}var tt=C([JSON.parse(JSON.stringify(Ye))],this.posX+this.margin[3],-vt+Ee+this.ctx.prevPageLastElemOffset)[0];P.scale>=.01&&(Le=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Le*P.scale),Te=this.lineWidth,this.lineWidth=Te*P.scale);var dt=this.autoPaging!=="text";if(dt||tt.y+tt.h<=Ge){if(dt||tt.y>=Ee&&tt.x<=ot){var Me=dt?P.text:this.pdf.splitTextToSize(P.text,P.maxWidth||ot-tt.x)[0],lr=C([JSON.parse(JSON.stringify(Ne))],this.posX+this.margin[3],-vt+Ee+this.ctx.prevPageLastElemOffset)[0],bt=dt&&(Ie>ze||Ie<Ae)&&S.call(this);bt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ct,Oe,null).clip().discardPath()),this.pdf.text(Me,lr.x,lr.y,{angle:P.angle,align:D,renderingMode:P.renderingMode}),bt&&this.pdf.restoreGraphicsState()}}else tt.y<Ge&&(this.ctx.prevPageLastElemOffset+=Ge-tt.y);P.scale>=.01&&(this.pdf.setFontSize(Le),this.lineWidth=Te)}else P.scale>=.01&&(Le=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Le*P.scale),Te=this.lineWidth,this.lineWidth=Te*P.scale),this.pdf.text(P.text,he.x+this.posX,he.y+this.posY,{angle:P.angle,align:D,renderingMode:P.renderingMode,maxWidth:P.maxWidth}),P.scale>=.01&&(this.pdf.setFontSize(Le),this.lineWidth=Te)},V=function(P,D,q,H){q=q||0,H=H||0,this.pdf.internal.out(t(P+q)+" "+r(D+H)+" l")},U=function(P,D,q){return this.pdf.lines(P,D,q,null,null)},ne=function(P,D,q,H,Q,he,me,pe){this.pdf.internal.out([e(i(q+P)),e(s(H+D)),e(i(Q+P)),e(s(he+D)),e(i(me+P)),e(s(pe+D)),"c"].join(" "))},se=function(P,D,q,H){for(var Q=2*Math.PI,he=Math.PI/2;D>q;)D-=Q;var me=Math.abs(q-D);me<Q&&H&&(me=Q-me);for(var pe=[],Pe=H?-1:1,Le=D;me>1e-5;){var Te=Le+Pe*Math.min(me,he);pe.push(de.call(this,P,Le,Te)),me-=Math.abs(Te-Le),Le=Te}return pe},de=function(P,D,q){var H=(q-D)/2,Q=P*Math.cos(H),he=P*Math.sin(H),me=Q,pe=-he,Pe=me*me+pe*pe,Le=Pe+me*Q+pe*he,Te=4/3*(Math.sqrt(2*Pe*Le)-Le)/(me*he-pe*Q),Ne=me-Te*pe,Ye=pe+Te*me,be=Ne,$=-Ye,nt=H+D,ze=Math.cos(nt),Ae=Math.sin(nt);return{x1:P*Math.cos(D),y1:P*Math.sin(D),x2:Ne*ze-Ye*Ae,y2:Ne*Ae+Ye*ze,x3:be*ze-$*Ae,y3:be*Ae+$*ze,x4:P*Math.cos(q),y4:P*Math.sin(q)}},ie=function(P){return 180*P/Math.PI},fe=function(P,D,q,H,Q,he){var me=P+.5*(q-P),pe=D+.5*(H-D),Pe=Q+.5*(q-Q),Le=he+.5*(H-he),Te=Math.min(P,Q,me,Pe),Ne=Math.max(P,Q,me,Pe),Ye=Math.min(D,he,pe,Le),be=Math.max(D,he,pe,Le);return new c(Te,Ye,Ne-Te,be-Ye)},ve=function(P,D,q,H,Q,he,me,pe){var Pe,Le,Te,Ne,Ye,be,$,nt,ze,Ae,Ie,Ee,Re,Ge,Oe=q-P,ot=H-D,ct=Q-q,vt=he-H,It=me-Q,tt=pe-he;for(Le=0;Le<41;Le++)ze=($=(Te=P+(Pe=Le/40)*Oe)+Pe*((Ye=q+Pe*ct)-Te))+Pe*(Ye+Pe*(Q+Pe*It-Ye)-$),Ae=(nt=(Ne=D+Pe*ot)+Pe*((be=H+Pe*vt)-Ne))+Pe*(be+Pe*(he+Pe*tt-be)-nt),Le==0?(Ie=ze,Ee=Ae,Re=ze,Ge=Ae):(Ie=Math.min(Ie,ze),Ee=Math.min(Ee,Ae),Re=Math.max(Re,ze),Ge=Math.max(Ge,Ae));return new c(Math.round(Ie),Math.round(Ee),Math.round(Re-Ie),Math.round(Ge-Ee))},Fe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var P,D,q=(P=this.ctx.lineDash,D=this.ctx.lineDashOffset,JSON.stringify({lineDash:P,lineDashOffset:D}));this.prevLineDash!==q&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=q)}}})(it.API),function(n){var e=function(s){var a,c,l,f,g,m,y,v,k,S;for(c=[],l=0,f=(s+=a="\0\0\0\0".slice(s.length%4||4)).length;f>l;l+=4)(g=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(m=(g=((g=((g=((g=(g-(S=g%85))/85)-(k=g%85))/85)-(v=g%85))/85)-(y=g%85))/85)%85,c.push(m+33,y+33,v+33,k+33,S+33)):c.push(122);return function(j,w){for(var C=w;C>0;C--)j.pop()}(c,a.length),String.fromCharCode.apply(String,c)+"~>"},t=function(s){var a,c,l,f,g,m=String,y="length",v=255,k="charCodeAt",S="slice",j="replace";for(s[S](-2),s=s[S](0,-2)[j](/\s/g,"")[j]("z","!!!!!"),l=[],f=0,g=(s+=a="uuuuu"[S](s[y]%5||5))[y];g>f;f+=5)c=52200625*(s[k](f)-33)+614125*(s[k](f+1)-33)+7225*(s[k](f+2)-33)+85*(s[k](f+3)-33)+(s[k](f+4)-33),l.push(v&c>>24,v&c>>16,v&c>>8,v&c);return function(w,C){for(var F=C;F>0;F--)w.pop()}(l,a[y]),m.fromCharCode.apply(m,l)},r=function(s){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),a.test(s)===!1)return"";for(var c="",l=0;l<s.length;l+=2)c+=String.fromCharCode("0x"+(s[l]+s[l+1]));return c},i=function(s){for(var a=new Uint8Array(s.length),c=s.length;c--;)a[c]=s.charCodeAt(c);return s=(a=wu(a)).reduce(function(l,f){return l+String.fromCharCode(f)},"")};n.processDataByFilters=function(s,a){var c=0,l=s||"",f=[];for(typeof(a=a||[])=="string"&&(a=[a]),c=0;c<a.length;c+=1)switch(a[c]){case"ASCII85Decode":case"/ASCII85Decode":l=t(l),f.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),f.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),f.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(g){return("0"+g.charCodeAt().toString(16)).slice(-2)}).join("")+">",f.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),f.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[c]+'" is not implemented')}return{data:l,reverseChain:f.reverse().join(" ")}}}(it.API),function(n){n.loadFile=function(e,t,r){return function(i,s,a){s=s!==!1,a=typeof a=="function"?a:function(){};var c=void 0;try{c=function(l,f,g){var m=new XMLHttpRequest,y=0,v=function(k){var S=k.length,j=[],w=String.fromCharCode;for(y=0;y<S;y+=1)j.push(w(255&k.charCodeAt(y)));return j.join("")};if(m.open("GET",l,!f),m.overrideMimeType("text/plain; charset=x-user-defined"),f===!1&&(m.onload=function(){m.status===200?g(v(this.responseText)):g(void 0)}),m.send(null),f&&m.status===200)return v(m.responseText)}(i,s,a)}catch{}return c}(e,t,r)},n.loadImageFile=n.loadFile}(it.API),function(n){function e(){return(at.html2canvas?Promise.resolve(at.html2canvas):Yi(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function t(){return(at.DOMPurify?Promise.resolve(at.DOMPurify):Yi(()=>import("./purify.es-Bf0oSh3b.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var c=qt(a);return c==="undefined"?"undefined":c==="string"||a instanceof String?"string":c==="number"||a instanceof Number?"number":c==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":c==="object"?"object":"unknown"},i=function(a,c){var l=document.createElement(a);for(var f in c.className&&(l.className=c.className),c.innerHTML&&c.dompurify&&(l.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)l.style[f]=c.style[f];return l},s=function a(c){var l=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),f=a.convert(Promise.resolve(),l);return f=(f=f.setProgress(1,a,1,[a])).set(c)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(a,c){return a.__proto__=c||s.prototype,a},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(a,c){return this.then(function(){switch(c=c||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(t).then(function(l){return this.set({src:i("div",{innerHTML:a,dompurify:l})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},s.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=function l(f,g){for(var m=f.nodeType===3?document.createTextNode(f.nodeValue):f.cloneNode(!1),y=f.firstChild;y;y=y.nextSibling)g!==!0&&y.nodeType===1&&y.nodeName==="SCRIPT"||m.appendChild(l(y,g));return f.nodeType===1&&(f.nodeName==="CANVAS"?(m.width=f.width,m.height=f.height,m.getContext("2d").drawImage(f,0,0)):f.nodeName!=="TEXTAREA"&&f.nodeName!=="SELECT"||(m.value=f.value),m.addEventListener("load",function(){m.scrollTop=f.scrollTop,m.scrollLeft=f.scrollLeft},!0)),m}(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(c){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,c(this.prop.container,l)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(c){var l=this.opt.jsPDF,f=this.opt.fontFaces,g=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,m=Object.assign({async:!0,allowTaint:!0,scale:g,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete m.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=f,f)for(var y=0;y<f.length;++y){var v=f[y],k=v.src.find(function(S){return S.format==="truetype"});k&&l.addFont(k.url,v.ref.name,v.ref.style)}return m.windowHeight=m.windowHeight||0,m.windowHeight=m.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):m.windowHeight,l.context2d.save(!0),c(this.prop.container,m)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(a,c,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(a,c):this.outputPdf(a,c)},s.prototype.outputPdf=function(a,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,c)})},s.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},s.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(a){if(r(a)!=="object")return this;var c=Object.keys(a||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=a[l]};switch(l){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[l]=a[l]}}},this);return this.then(function(){return this.thenList(c)})},s.prototype.get=function(a,c){return this.then(function(){var l=a in s.template.prop?this.prop[a]:this.opt[a];return c?c(l):l})},s.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},s.prototype.setPageSize=function(a){function c(l,f){return Math.floor(l*f/72*96)}return this.then(function(){(a=a||it.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:c(a.inner.width,a.k),height:c(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},s.prototype.setProgress=function(a,c,l,f){return a!=null&&(this.progress.val=a),c!=null&&(this.progress.state=c),l!=null&&(this.progress.n=l),f!=null&&(this.progress.stack=f),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(a,c,l,f){return this.setProgress(a?this.progress.val+a:null,c||null,l?this.progress.n+l:null,f?this.progress.stack.concat(f):null)},s.prototype.then=function(a,c){var l=this;return this.thenCore(a,c,function(f,g){return l.updateProgress(null,null,1,[f]),Promise.prototype.then.call(this,function(m){return l.updateProgress(null,f),m}).then(f,g).then(function(m){return l.updateProgress(1),m})})},s.prototype.thenCore=function(a,c,l){l=l||Promise.prototype.then,a&&(a=a.bind(this)),c&&(c=c.bind(this));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),g=l.call(f,a,c);return s.convert(g,this.__proto__)},s.prototype.thenExternal=function(a,c){return Promise.prototype.then.call(this,a,c)},s.prototype.thenList=function(a){var c=this;return a.forEach(function(l){c=c.thenCore(l)}),c},s.prototype.catch=function(a){a&&(a=a.bind(this));var c=Promise.prototype.catch.call(this,a);return s.convert(c,this)},s.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},s.prototype.error=function(a){return this.then(function(){throw new Error(a)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,it.getPageSize=function(a,c,l){if(qt(a)==="object"){var f=a;a=f.orientation,c=f.unit||c,l=f.format||l}c=c||"mm",l=l||"a4",a=(""+(a||"P")).toLowerCase();var g,m=(""+l).toLowerCase(),y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":g=1;break;case"mm":g=72/25.4;break;case"cm":g=72/2.54;break;case"in":g=72;break;case"px":g=.75;break;case"pc":case"em":g=12;break;case"ex":g=6;break;default:throw"Invalid unit: "+c}var v,k=0,S=0;if(y.hasOwnProperty(m))k=y[m][1]/g,S=y[m][0]/g;else try{k=l[1],S=l[0]}catch{throw new Error("Invalid format: "+l)}if(a==="p"||a==="portrait")a="p",S>k&&(v=S,S=k,k=v);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",k>S&&(v=S,S=k,k=v)}return{width:S,height:k,unit:c,k:g,orientation:a}},n.html=function(a,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(ku):null;var l=new s(c);return c.worker?l:l.from(a).doCallback()}}(it.API),it.API.addJS=function(n){return lf=n,this.internal.events.subscribe("postPutResources",function(){Al=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Al+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),of=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+lf+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Al!==void 0&&of!==void 0&&this.internal.out("/Names <</JavaScript "+Al+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),s=0;s<i.length;s++){var a=i[s],c=r.exec(a);if(c!=null){var l=c[1];t.internal.newObjectDeferredBegin(l,!1)}t.internal.write(a)}if(this.outline.createNamedDestinations){var f=this.internal.pages.length,g=[];for(s=0;s<f;s++){var m=t.internal.newObject();g.push(m);var y=t.internal.getPageInfo(s+1);t.internal.write("<< /D["+y.objId+" 0 R /XYZ null null null]>> endobj")}var v=t.internal.newObject();for(t.internal.write("<< /Names [ "),s=0;s<g.length;s++)t.internal.write("(page_"+(s+1)+")"+g[s]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+v+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,s){var a={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(a),a},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var a=r.children[s];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var c=this.count=this.count_r({count:0},a);if(c>0&&this.line("/Count "+c),a.options&&a.options.pageNumber){var l=t.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var f=0;f<r.children.length;f++)this.renderItems(r.children[f])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(it.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,s,a,c){var l,f=this.decode.DCT_DECODE,g=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=a||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(l=function(m){for(var y,v=256*m.charCodeAt(4)+m.charCodeAt(5),k=m.length,S={width:0,height:0,numcomponents:1},j=4;j<k;j+=2){if(j+=v,e.indexOf(m.charCodeAt(j+1))!==-1){y=256*m.charCodeAt(j+5)+m.charCodeAt(j+6),S={width:256*m.charCodeAt(j+7)+m.charCodeAt(j+8),height:y,numcomponents:m.charCodeAt(j+9)};break}v=256*m.charCodeAt(j+2)+m.charCodeAt(j+3)}return S}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:c=this.color_spaces.DEVICE_GRAY;break;case 4:c=this.color_spaces.DEVICE_CMYK;break;case 3:c=this.color_spaces.DEVICE_RGB}g={data:t,width:l.width,height:l.height,colorSpace:c,bitsPerComponent:8,filter:f,index:r,alias:i}}return g}}(it.API);var va,kl,cf,uf,hf,Rb=function(){var n,e,t;function r(s){var a,c,l,f,g,m,y,v,k,S,j,w,C,F;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},m=null;;){switch(a=this.readUInt32(),k=(function(){var Z,ae;for(ae=[],Z=0;Z<4;++Z)ae.push(String.fromCharCode(this.data[this.pos++]));return ae}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":m&&this.animation.frames.push(m),this.pos+=4,m={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},g=this.readUInt16(),f=this.readUInt16()||100,m.delay=1e3*g/f,m.disposeOp=this.data[this.pos++],m.blendOp=this.data[this.pos++],m.data=[];break;case"IDAT":case"fdAT":for(k==="fdAT"&&(this.pos+=4,a-=4),s=(m!=null?m.data:void 0)||this.imgData,w=0;0<=a?w<a:w>a;0<=a?++w:--w)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((S=l-this.transparency.indexed.length)>0)for(C=0;0<=S?C<S:C>S;0<=S?++C:--C)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":y=(j=this.read(a)).indexOf(0),v=String.fromCharCode.apply(String,j.slice(0,y)),this.text[v]=String.fromCharCode.apply(String,j.slice(y+1));break;case"IEND":return m&&this.animation.frames.push(m),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(F=this.colorType)===4||F===6,c=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*c,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var a,c;for(c=[],a=0;0<=s?a<s:a>s;0<=s?++a:--a)c.push(this.data[this.pos++]);return c},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var a=this.pixelBitlength/8,c=new Uint8Array(this.width*this.height*a),l=0,f=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function g(m,y,v,k){var S,j,w,C,F,Z,ae,te,G,M,z,W,N,T,V,U,ne,se,de,ie,fe,ve=Math.ceil((f.width-m)/v),Fe=Math.ceil((f.height-y)/k),P=f.width==ve&&f.height==Fe;for(T=a*ve,W=P?c:new Uint8Array(T*Fe),Z=s.length,N=0,j=0;N<Fe&&l<Z;){switch(s[l++]){case 0:for(C=ne=0;ne<T;C=ne+=1)W[j++]=s[l++];break;case 1:for(C=se=0;se<T;C=se+=1)S=s[l++],F=C<a?0:W[j-a],W[j++]=(S+F)%256;break;case 2:for(C=de=0;de<T;C=de+=1)S=s[l++],w=(C-C%a)/a,V=N&&W[(N-1)*T+w*a+C%a],W[j++]=(V+S)%256;break;case 3:for(C=ie=0;ie<T;C=ie+=1)S=s[l++],w=(C-C%a)/a,F=C<a?0:W[j-a],V=N&&W[(N-1)*T+w*a+C%a],W[j++]=(S+Math.floor((F+V)/2))%256;break;case 4:for(C=fe=0;fe<T;C=fe+=1)S=s[l++],w=(C-C%a)/a,F=C<a?0:W[j-a],N===0?V=U=0:(V=W[(N-1)*T+w*a+C%a],U=w&&W[(N-1)*T+(w-1)*a+C%a]),ae=F+V-U,te=Math.abs(ae-F),M=Math.abs(ae-V),z=Math.abs(ae-U),G=te<=M&&te<=z?F:M<=z?V:U,W[j++]=(S+G)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!P){var D=((y+N*k)*f.width+m)*a,q=N*T;for(C=0;C<ve;C+=1){for(var H=0;H<a;H+=1)c[D++]=W[q++];D+=(v-1)*a}}N++}}return s=db(s),f.interlaceMethod==1?(g(0,0,8,8),g(4,0,8,8),g(0,4,4,8),g(2,0,4,4),g(0,2,2,4),g(1,0,2,2),g(0,1,1,2)):g(0,0,1,1),c},r.prototype.decodePalette=function(){var s,a,c,l,f,g,m,y,v;for(c=this.palette,g=this.transparency.indexed||[],f=new Uint8Array((g.length||0)+c.length),l=0,s=0,a=m=0,y=c.length;m<y;a=m+=3)f[l++]=c[a],f[l++]=c[a+1],f[l++]=c[a+2],f[l++]=(v=g[s++])!=null?v:255;return f},r.prototype.copyToImageData=function(s,a){var c,l,f,g,m,y,v,k,S,j,w;if(l=this.colors,S=null,c=this.hasAlphaChannel,this.palette.length&&(S=(w=this._decodedPalette)!=null?w:this._decodedPalette=this.decodePalette(),l=4,c=!0),k=(f=s.data||s).length,m=S||a,g=y=0,l===1)for(;g<k;)v=S?4*a[g/4]:y,j=m[v++],f[g++]=j,f[g++]=j,f[g++]=j,f[g++]=c?m[v++]:255,y=v;else for(;g<k;)v=S?4*a[g/4]:y,f[g++]=m[v++],f[g++]=m[v++],f[g++]=m[v++],f[g++]=c?m[v++]:255,y=v},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(at)==="[object Window]"){try{e=at.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),n=function(s){var a;if(i()===!0)return t.width=s.width,t.height=s.height,t.clearRect(0,0,s.width,s.height),t.putImageData(s,0,0),(a=new Image).src=e.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var a,c,l,f,g,m,y,v;if(this.animation){for(v=[],c=g=0,m=(y=this.animation.frames).length;g<m;c=++g)a=y[c],l=s.createImageData(a.width,a.height),f=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(l,f),a.imageData=l,v.push(a.image=n(l));return v}},r.prototype.renderFrame=function(s,a){var c,l,f;return c=(l=this.animation.frames)[a],f=l[a-1],a===0&&s.clearRect(0,0,this.width,this.height),(f!=null?f.disposeOp:void 0)===1?s.clearRect(f.xOffset,f.yOffset,f.width,f.height):(f!=null?f.disposeOp:void 0)===2&&s.putImageData(f.imageData,f.xOffset,f.yOffset),c.blendOp===0&&s.clearRect(c.xOffset,c.yOffset,c.width,c.height),s.drawImage(c.image,c.xOffset,c.yOffset)},r.prototype.animate=function(s){var a,c,l,f,g,m,y=this;return c=0,m=this.animation,f=m.numFrames,l=m.frames,g=m.numPlays,(a=function(){var v,k;if(v=c++%f,k=l[v],y.renderFrame(s,v),f>1&&c/f<g)return y.animation._timeout=setTimeout(a,k.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var a,c;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,a=s.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(c=a.createImageData(this.width,this.height),this.copyToImageData(c,this.decodePixels()),a.putImageData(c,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Ob(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],s=i>>7,a=1<<(7&i)+1;n[e++],n[e++];var c=null,l=null;s&&(c=e,l=a,e+=3*a);var f=!0,g=[],m=0,y=null,v=0,k=null;for(this.width=t,this.height=r;f&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,k=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((N=n[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var S=n[e++];m=n[e++]|n[e++]<<8,y=n[e++],!(1&S)&&(y=null),v=S>>2&7,e++;break;case 254:for(;;){if(!((N=n[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var j=n[e++]|n[e++]<<8,w=n[e++]|n[e++]<<8,C=n[e++]|n[e++]<<8,F=n[e++]|n[e++]<<8,Z=n[e++],ae=Z>>6&1,te=1<<(7&Z)+1,G=c,M=l,z=!1;Z>>7&&(z=!0,G=e,M=te,e+=3*te);var W=e;for(e++;;){var N;if(!((N=n[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}g.push({x:j,y:w,width:C,height:F,has_local_palette:z,palette_offset:G,palette_size:M,data_offset:W,data_length:e-W,transparent_index:y,interlaced:!!ae,delay:m,disposal:v});break;case 59:f=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return g.length},this.loopCount=function(){return k},this.frameInfo=function(T){if(T<0||T>=g.length)throw new Error("Frame index out of range.");return g[T]},this.decodeAndBlitFrameBGRA=function(T,V){var U=this.frameInfo(T),ne=U.width*U.height,se=new Uint8Array(ne);df(n,U.data_offset,se,ne);var de=U.palette_offset,ie=U.transparent_index;ie===null&&(ie=256);var fe=U.width,ve=t-fe,Fe=fe,P=4*(U.y*t+U.x),D=4*((U.y+U.height)*t+U.x),q=P,H=4*ve;U.interlaced===!0&&(H+=4*t*7);for(var Q=8,he=0,me=se.length;he<me;++he){var pe=se[he];if(Fe===0&&(Fe=fe,(q+=H)>=D&&(H=4*ve+4*t*(Q-1),q=P+(fe+ve)*(Q<<1),Q>>=1)),pe===ie)q+=4;else{var Pe=n[de+3*pe],Le=n[de+3*pe+1],Te=n[de+3*pe+2];V[q++]=Te,V[q++]=Le,V[q++]=Pe,V[q++]=255}--Fe}},this.decodeAndBlitFrameRGBA=function(T,V){var U=this.frameInfo(T),ne=U.width*U.height,se=new Uint8Array(ne);df(n,U.data_offset,se,ne);var de=U.palette_offset,ie=U.transparent_index;ie===null&&(ie=256);var fe=U.width,ve=t-fe,Fe=fe,P=4*(U.y*t+U.x),D=4*((U.y+U.height)*t+U.x),q=P,H=4*ve;U.interlaced===!0&&(H+=4*t*7);for(var Q=8,he=0,me=se.length;he<me;++he){var pe=se[he];if(Fe===0&&(Fe=fe,(q+=H)>=D&&(H=4*ve+4*t*(Q-1),q=P+(fe+ve)*(Q<<1),Q>>=1)),pe===ie)q+=4;else{var Pe=n[de+3*pe],Le=n[de+3*pe+1],Te=n[de+3*pe+2];V[q++]=Pe,V[q++]=Le,V[q++]=Te,V[q++]=255}--Fe}}}function df(n,e,t,r){for(var i=n[e++],s=1<<i,a=s+1,c=a+1,l=i+1,f=(1<<l)-1,g=0,m=0,y=0,v=n[e++],k=new Int32Array(4096),S=null;;){for(;g<16&&v!==0;)m|=n[e++]<<g,g+=8,v===1?v=n[e++]:--v;if(g<l)break;var j=m&f;if(m>>=l,g-=l,j!==s){if(j===a)break;for(var w=j<c?j:S,C=0,F=w;F>s;)F=k[F]>>8,++C;var Z=F;if(y+C+(w!==j?1:0)>r)return void $t.log("Warning, gif stream longer than expected.");t[y++]=Z;var ae=y+=C;for(w!==j&&(t[y++]=Z),F=w;C--;)F=k[F],t[--ae]=255&F,F>>=8;S!==null&&c<4096&&(k[c++]=S<<8|Z,c>=f+1&&l<12&&(++l,f=f<<1|1)),S=j}else c=a+1,f=(1<<(l=i+1))-1,S=null}return y!==r&&$t.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Zc(n){var e,t,r,i,s,a=Math.floor,c=new Array(64),l=new Array(64),f=new Array(64),g=new Array(64),m=new Array(65535),y=new Array(65535),v=new Array(64),k=new Array(64),S=[],j=0,w=7,C=new Array(64),F=new Array(64),Z=new Array(64),ae=new Array(256),te=new Array(2048),G=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],M=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],z=[0,1,2,3,4,5,6,7,8,9,10,11],W=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],N=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],T=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],V=[0,1,2,3,4,5,6,7,8,9,10,11],U=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ne=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function se(P,D){for(var q=0,H=0,Q=new Array,he=1;he<=16;he++){for(var me=1;me<=P[he];me++)Q[D[H]]=[],Q[D[H]][0]=q,Q[D[H]][1]=he,H++,q++;q*=2}return Q}function de(P){for(var D=P[0],q=P[1]-1;q>=0;)D&1<<q&&(j|=1<<w),q--,--w<0&&(j==255?(ie(255),ie(0)):ie(j),w=7,j=0)}function ie(P){S.push(P)}function fe(P){ie(P>>8&255),ie(255&P)}function ve(P,D,q,H,Q){for(var he,me=Q[0],pe=Q[240],Pe=function(Ae,Ie){var Ee,Re,Ge,Oe,ot,ct,vt,It,tt,dt,Me=0;for(tt=0;tt<8;++tt){Ee=Ae[Me],Re=Ae[Me+1],Ge=Ae[Me+2],Oe=Ae[Me+3],ot=Ae[Me+4],ct=Ae[Me+5],vt=Ae[Me+6];var lr=Ee+(It=Ae[Me+7]),bt=Ee-It,Or=Re+vt,yt=Re-vt,At=Ge+ct,Er=Ge-ct,_t=Oe+ot,xn=Oe-ot,zt=lr+_t,xr=lr-_t,Fr=Or+At,Dt=Or-At;Ae[Me]=zt+Fr,Ae[Me+4]=zt-Fr;var st=.707106781*(Dt+xr);Ae[Me+2]=xr+st,Ae[Me+6]=xr-st;var St=.382683433*((zt=xn+Er)-(Dt=yt+bt)),xe=.5411961*zt+St,We=1.306562965*Dt+St,Xe=.707106781*(Fr=Er+yt),ft=bt+Xe,Ue=bt-Xe;Ae[Me+5]=Ue+xe,Ae[Me+3]=Ue-xe,Ae[Me+1]=ft+We,Ae[Me+7]=ft-We,Me+=8}for(Me=0,tt=0;tt<8;++tt){Ee=Ae[Me],Re=Ae[Me+8],Ge=Ae[Me+16],Oe=Ae[Me+24],ot=Ae[Me+32],ct=Ae[Me+40],vt=Ae[Me+48];var Zt=Ee+(It=Ae[Me+56]),jt=Ee-It,cr=Re+vt,Mt=Re-vt,Wt=Ge+ct,kr=Ge-ct,si=Oe+ot,_n=Oe-ot,Qr=Zt+si,en=Zt-si,tn=cr+Wt,fn=cr-Wt;Ae[Me]=Qr+tn,Ae[Me+32]=Qr-tn;var Kr=.707106781*(fn+en);Ae[Me+16]=en+Kr,Ae[Me+48]=en-Kr;var pn=.382683433*((Qr=_n+kr)-(fn=Mt+jt)),ai=.5411961*Qr+pn,_i=1.306562965*fn+pn,gn=.707106781*(tn=kr+Mt),rn=jt+gn,Tn=jt-gn;Ae[Me+40]=Tn+ai,Ae[Me+24]=Tn-ai,Ae[Me+8]=rn+_i,Ae[Me+56]=rn-_i,Me++}for(tt=0;tt<64;++tt)dt=Ae[tt]*Ie[tt],v[tt]=dt>0?dt+.5|0:dt-.5|0;return v}(P,D),Le=0;Le<64;++Le)k[G[Le]]=Pe[Le];var Te=k[0]-q;q=k[0],Te==0?de(H[0]):(de(H[y[he=32767+Te]]),de(m[he]));for(var Ne=63;Ne>0&&k[Ne]==0;)Ne--;if(Ne==0)return de(me),q;for(var Ye,be=1;be<=Ne;){for(var $=be;k[be]==0&&be<=Ne;)++be;var nt=be-$;if(nt>=16){Ye=nt>>4;for(var ze=1;ze<=Ye;++ze)de(pe);nt&=15}he=32767+k[be],de(Q[(nt<<4)+y[he]]),de(m[he]),be++}return Ne!=63&&de(me),q}function Fe(P){P=Math.min(Math.max(P,1),100),s!=P&&(function(D){for(var q=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],H=0;H<64;H++){var Q=a((q[H]*D+50)/100);Q=Math.min(Math.max(Q,1),255),c[G[H]]=Q}for(var he=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],me=0;me<64;me++){var pe=a((he[me]*D+50)/100);pe=Math.min(Math.max(pe,1),255),l[G[me]]=pe}for(var Pe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Le=0,Te=0;Te<8;Te++)for(var Ne=0;Ne<8;Ne++)f[Le]=1/(c[G[Le]]*Pe[Te]*Pe[Ne]*8),g[Le]=1/(l[G[Le]]*Pe[Te]*Pe[Ne]*8),Le++}(P<50?Math.floor(5e3/P):Math.floor(200-2*P)),s=P)}this.encode=function(P,D){D&&Fe(D),S=new Array,j=0,w=7,fe(65496),fe(65504),fe(16),ie(74),ie(70),ie(73),ie(70),ie(0),ie(1),ie(1),ie(0),fe(1),fe(1),ie(0),ie(0),function(){fe(65499),fe(132),ie(0);for(var Re=0;Re<64;Re++)ie(c[Re]);ie(1);for(var Ge=0;Ge<64;Ge++)ie(l[Ge])}(),function(Re,Ge){fe(65472),fe(17),ie(8),fe(Ge),fe(Re),ie(3),ie(1),ie(17),ie(0),ie(2),ie(17),ie(1),ie(3),ie(17),ie(1)}(P.width,P.height),function(){fe(65476),fe(418),ie(0);for(var Re=0;Re<16;Re++)ie(M[Re+1]);for(var Ge=0;Ge<=11;Ge++)ie(z[Ge]);ie(16);for(var Oe=0;Oe<16;Oe++)ie(W[Oe+1]);for(var ot=0;ot<=161;ot++)ie(N[ot]);ie(1);for(var ct=0;ct<16;ct++)ie(T[ct+1]);for(var vt=0;vt<=11;vt++)ie(V[vt]);ie(17);for(var It=0;It<16;It++)ie(U[It+1]);for(var tt=0;tt<=161;tt++)ie(ne[tt])}(),fe(65498),fe(12),ie(3),ie(1),ie(0),ie(2),ie(17),ie(3),ie(17),ie(0),ie(63),ie(0);var q=0,H=0,Q=0;j=0,w=7,this.encode.displayName="_encode_";for(var he,me,pe,Pe,Le,Te,Ne,Ye,be,$=P.data,nt=P.width,ze=P.height,Ae=4*nt,Ie=0;Ie<ze;){for(he=0;he<Ae;){for(Le=Ae*Ie+he,Ne=-1,Ye=0,be=0;be<64;be++)Te=Le+(Ye=be>>3)*Ae+(Ne=4*(7&be)),Ie+Ye>=ze&&(Te-=Ae*(Ie+1+Ye-ze)),he+Ne>=Ae&&(Te-=he+Ne-Ae+4),me=$[Te++],pe=$[Te++],Pe=$[Te++],C[be]=(te[me]+te[pe+256>>0]+te[Pe+512>>0]>>16)-128,F[be]=(te[me+768>>0]+te[pe+1024>>0]+te[Pe+1280>>0]>>16)-128,Z[be]=(te[me+1280>>0]+te[pe+1536>>0]+te[Pe+1792>>0]>>16)-128;q=ve(C,f,q,e,r),H=ve(F,g,H,t,i),Q=ve(Z,g,Q,t,i),he+=32}Ie+=8}if(w>=0){var Ee=[];Ee[1]=w+1,Ee[0]=(1<<w+1)-1,de(Ee)}return fe(65497),new Uint8Array(S)},n=n||50,function(){for(var P=String.fromCharCode,D=0;D<256;D++)ae[D]=P(D)}(),e=se(M,z),t=se(T,V),r=se(W,N),i=se(U,ne),function(){for(var P=1,D=2,q=1;q<=15;q++){for(var H=P;H<D;H++)y[32767+H]=q,m[32767+H]=[],m[32767+H][1]=q,m[32767+H][0]=H;for(var Q=-(D-1);Q<=-P;Q++)y[32767+Q]=q,m[32767+Q]=[],m[32767+Q][1]=q,m[32767+Q][0]=D-1+Q;P<<=1,D<<=1}}(),function(){for(var P=0;P<256;P++)te[P]=19595*P,te[P+256>>0]=38470*P,te[P+512>>0]=7471*P+32768,te[P+768>>0]=-11059*P,te[P+1024>>0]=-21709*P,te[P+1280>>0]=32768*P+8421375,te[P+1536>>0]=-27439*P,te[P+1792>>0]=-5329*P}(),Fe(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Bn(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function ff(n){function e(M){if(!M)throw Error("assert :P")}function t(M,z,W){for(var N=0;4>N;N++)if(M[z+N]!=W.charCodeAt(N))return!0;return!1}function r(M,z,W,N,T){for(var V=0;V<T;V++)M[z+V]=W[N+V]}function i(M,z,W,N){for(var T=0;T<N;T++)M[z+T]=W}function s(M){return new Int32Array(M)}function a(M,z){for(var W=[],N=0;N<M;N++)W.push(new z);return W}function c(M,z){var W=[];return function N(T,V,U){for(var ne=U[V],se=0;se<ne&&(T.push(U.length>V+1?[]:new z),!(U.length<V+1));se++)N(T[se],V+1,U)}(W,0,M),W}var l=function(){var M=this;function z(o,h){for(var p=1<<h-1>>>0;o&p;)p>>>=1;return p?(o&p-1)+p:o}function W(o,h,p,b,x){e(!(b%p));do o[h+(b-=p)]=x;while(0<b)}function N(o,h,p,b,x){if(e(2328>=x),512>=x)var A=s(512);else if((A=s(x))==null)return 0;return function(L,I,E,O,J,ce){var ue,re,je=I,ye=1<<E,Y=s(16),X=s(16);for(e(J!=0),e(O!=null),e(L!=null),e(0<E),re=0;re<J;++re){if(15<O[re])return 0;++Y[O[re]]}if(Y[0]==J)return 0;for(X[1]=0,ue=1;15>ue;++ue){if(Y[ue]>1<<ue)return 0;X[ue+1]=X[ue]+Y[ue]}for(re=0;re<J;++re)ue=O[re],0<O[re]&&(ce[X[ue]++]=re);if(X[15]==1)return(O=new T).g=0,O.value=ce[0],W(L,je,1,ye,O),ye;var _e,ke=-1,Se=ye-1,qe=0,De=1,rt=1,Be=1<<E;for(re=0,ue=1,J=2;ue<=E;++ue,J<<=1){if(De+=rt<<=1,0>(rt-=Y[ue]))return 0;for(;0<Y[ue];--Y[ue])(O=new T).g=ue,O.value=ce[re++],W(L,je+qe,J,Be,O),qe=z(qe,ue)}for(ue=E+1,J=2;15>=ue;++ue,J<<=1){if(De+=rt<<=1,0>(rt-=Y[ue]))return 0;for(;0<Y[ue];--Y[ue]){if(O=new T,(qe&Se)!=ke){for(je+=Be,_e=1<<(ke=ue)-E;15>ke&&!(0>=(_e-=Y[ke]));)++ke,_e<<=1;ye+=Be=1<<(_e=ke-E),L[I+(ke=qe&Se)].g=_e+E,L[I+ke].value=je-I-ke}O.g=ue-E,O.value=ce[re++],W(L,je+(qe>>E),J,Be,O),qe=z(qe,ue)}}return De!=2*X[15]-1?0:ye}(o,h,p,b,x,A)}function T(){this.value=this.g=0}function V(){this.value=this.g=0}function U(){this.G=a(5,T),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Tr,V)}function ne(o,h,p,b){e(o!=null),e(h!=null),e(2147483648>b),o.Ca=254,o.I=0,o.b=-8,o.Ka=0,o.oa=h,o.pa=p,o.Jd=h,o.Yc=p+b,o.Zc=4<=b?p+b-4+1:p,he(o)}function se(o,h){for(var p=0;0<h--;)p|=pe(o,128)<<h;return p}function de(o,h){var p=se(o,h);return me(o)?-p:p}function ie(o,h,p,b){var x,A=0;for(e(o!=null),e(h!=null),e(4294967288>b),o.Sb=b,o.Ra=0,o.u=0,o.h=0,4<b&&(b=4),x=0;x<b;++x)A+=h[p+x]<<8*x;o.Ra=A,o.bb=b,o.oa=h,o.pa=p}function fe(o){for(;8<=o.u&&o.bb<o.Sb;)o.Ra>>>=8,o.Ra+=o.oa[o.pa+o.bb]<<ea-8>>>0,++o.bb,o.u-=8;q(o)&&(o.h=1,o.u=0)}function ve(o,h){if(e(0<=h),!o.h&&h<=Qs){var p=D(o)&Xs[h];return o.u+=h,fe(o),p}return o.h=1,o.u=0}function Fe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function P(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function D(o){return o.Ra>>>(o.u&ea-1)>>>0}function q(o){return e(o.bb<=o.Sb),o.h||o.bb==o.Sb&&o.u>ea}function H(o,h){o.u=h,o.h=q(o)}function Q(o){o.u>=Za&&(e(o.u>=Za),fe(o))}function he(o){e(o!=null&&o.oa!=null),o.pa<o.Zc?(o.I=(o.oa[o.pa++]|o.I<<8)>>>0,o.b+=8):(e(o!=null&&o.oa!=null),o.pa<o.Yc?(o.b+=8,o.I=o.oa[o.pa++]|o.I<<8):o.Ka?o.b=0:(o.I<<=8,o.b+=8,o.Ka=1))}function me(o){return se(o,1)}function pe(o,h){var p=o.Ca;0>o.b&&he(o);var b=o.b,x=p*h>>>8,A=(o.I>>>b>x)+0;for(A?(p-=x,o.I-=x+1<<b>>>0):p=x+1,b=p,x=0;256<=b;)x+=8,b>>=8;return b=7^x+sn[b],o.b-=b,o.Ca=(p<<b)-1,A}function Pe(o,h,p){o[h+0]=p>>24&255,o[h+1]=p>>16&255,o[h+2]=p>>8&255,o[h+3]=p>>0&255}function Le(o,h){return o[h+0]<<0|o[h+1]<<8}function Te(o,h){return Le(o,h)|o[h+2]<<16}function Ne(o,h){return Le(o,h)|Le(o,h+2)<<16}function Ye(o,h){var p=1<<h;return e(o!=null),e(0<h),o.X=s(p),o.X==null?0:(o.Mb=32-h,o.Xa=h,1)}function be(o,h){e(o!=null),e(h!=null),e(o.Xa==h.Xa),r(h.X,0,o.X,0,1<<h.Xa)}function $(){this.X=[],this.Xa=this.Mb=0}function nt(o,h,p,b){e(p!=null),e(b!=null);var x=p[0],A=b[0];return x==0&&(x=(o*A+h/2)/h),A==0&&(A=(h*x+o/2)/o),0>=x||0>=A?0:(p[0]=x,b[0]=A,1)}function ze(o,h){return o+(1<<h)-1>>>h}function Ae(o,h){return((4278255360&o)+(4278255360&h)>>>0&4278255360)+((16711935&o)+(16711935&h)>>>0&16711935)>>>0}function Ie(o,h){M[h]=function(p,b,x,A,L,I,E){var O;for(O=0;O<L;++O){var J=M[o](I[E+O-1],x,A+O);I[E+O]=Ae(p[b+O],J)}}}function Ee(){this.ud=this.hd=this.jd=0}function Re(o,h){return((4278124286&(o^h))>>>1)+(o&h)>>>0}function Ge(o){return 0<=o&&256>o?o:0>o?0:255<o?255:void 0}function Oe(o,h){return Ge(o+(o-h+.5>>1))}function ot(o,h,p){return Math.abs(h-p)-Math.abs(o-p)}function ct(o,h,p,b,x,A,L){for(b=A[L-1],p=0;p<x;++p)A[L+p]=b=Ae(o[h+p],b)}function vt(o,h,p,b,x){var A;for(A=0;A<p;++A){var L=o[h+A],I=L>>8&255,E=16711935&(E=(E=16711935&L)+((I<<16)+I));b[x+A]=(4278255360&L)+E>>>0}}function It(o,h){h.jd=o>>0&255,h.hd=o>>8&255,h.ud=o>>16&255}function tt(o,h,p,b,x,A){var L;for(L=0;L<b;++L){var I=h[p+L],E=I>>>8,O=I,J=255&(J=(J=I>>>16)+((o.jd<<24>>24)*(E<<24>>24)>>>5));O=255&(O=(O=O+((o.hd<<24>>24)*(E<<24>>24)>>>5))+((o.ud<<24>>24)*(J<<24>>24)>>>5)),x[A+L]=(4278255360&I)+(J<<16)+O}}function dt(o,h,p,b,x){M[h]=function(A,L,I,E,O,J,ce,ue,re){for(E=ce;E<ue;++E)for(ce=0;ce<re;++ce)O[J++]=x(I[b(A[L++])])},M[o]=function(A,L,I,E,O,J,ce){var ue=8>>A.b,re=A.Ea,je=A.K[0],ye=A.w;if(8>ue)for(A=(1<<A.b)-1,ye=(1<<ue)-1;L<I;++L){var Y,X=0;for(Y=0;Y<re;++Y)Y&A||(X=b(E[O++])),J[ce++]=x(je[X&ye]),X>>=ue}else M["VP8LMapColor"+p](E,O,je,ye,J,ce,L,I,re)}}function Me(o,h,p,b,x){for(p=h+p;h<p;){var A=o[h++];b[x++]=A>>16&255,b[x++]=A>>8&255,b[x++]=A>>0&255}}function lr(o,h,p,b,x){for(p=h+p;h<p;){var A=o[h++];b[x++]=A>>16&255,b[x++]=A>>8&255,b[x++]=A>>0&255,b[x++]=A>>24&255}}function bt(o,h,p,b,x){for(p=h+p;h<p;){var A=(L=o[h++])>>16&240|L>>12&15,L=L>>0&240|L>>28&15;b[x++]=A,b[x++]=L}}function Or(o,h,p,b,x){for(p=h+p;h<p;){var A=(L=o[h++])>>16&248|L>>13&7,L=L>>5&224|L>>3&31;b[x++]=A,b[x++]=L}}function yt(o,h,p,b,x){for(p=h+p;h<p;){var A=o[h++];b[x++]=A>>0&255,b[x++]=A>>8&255,b[x++]=A>>16&255}}function At(o,h,p,b,x,A){if(A==0)for(p=h+p;h<p;)Pe(b,((A=o[h++])[0]>>24|A[1]>>8&65280|A[2]<<8&16711680|A[3]<<24)>>>0),x+=32;else r(b,x,o,h,p)}function Er(o,h){M[h][0]=M[o+"0"],M[h][1]=M[o+"1"],M[h][2]=M[o+"2"],M[h][3]=M[o+"3"],M[h][4]=M[o+"4"],M[h][5]=M[o+"5"],M[h][6]=M[o+"6"],M[h][7]=M[o+"7"],M[h][8]=M[o+"8"],M[h][9]=M[o+"9"],M[h][10]=M[o+"10"],M[h][11]=M[o+"11"],M[h][12]=M[o+"12"],M[h][13]=M[o+"13"],M[h][14]=M[o+"0"],M[h][15]=M[o+"0"]}function _t(o){return o==vc||o==bc||o==nl||o==yc}function xn(){this.eb=[],this.size=this.A=this.fb=0}function zt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function xr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new xn,this.f.kb=new zt,this.sd=null}function Fr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Dt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function st(o){return alert("todo:WebPSamplerProcessPlane"),o.T}function St(o,h){var p=o.T,b=h.ba.f.RGBA,x=b.eb,A=b.fb+o.ka*b.A,L=Cn[h.ba.S],I=o.y,E=o.O,O=o.f,J=o.N,ce=o.ea,ue=o.W,re=h.cc,je=h.dc,ye=h.Mc,Y=h.Nc,X=o.ka,_e=o.ka+o.T,ke=o.U,Se=ke+1>>1;for(X==0?L(I,E,null,null,O,J,ce,ue,O,J,ce,ue,x,A,null,null,ke):(L(h.ec,h.fc,I,E,re,je,ye,Y,O,J,ce,ue,x,A-b.A,x,A,ke),++p);X+2<_e;X+=2)re=O,je=J,ye=ce,Y=ue,J+=o.Rc,ue+=o.Rc,A+=2*b.A,L(I,(E+=2*o.fa)-o.fa,I,E,re,je,ye,Y,O,J,ce,ue,x,A-b.A,x,A,ke);return E+=o.fa,o.j+_e<o.o?(r(h.ec,h.fc,I,E,ke),r(h.cc,h.dc,O,J,Se),r(h.Mc,h.Nc,ce,ue,Se),p--):1&_e||L(I,E,null,null,O,J,ce,ue,O,J,ce,ue,x,A+b.A,null,null,ke),p}function xe(o,h,p){var b=o.F,x=[o.J];if(b!=null){var A=o.U,L=h.ba.S,I=L==rl||L==nl;h=h.ba.f.RGBA;var E=[0],O=o.ka;E[0]=o.T,o.Kb&&(O==0?--E[0]:(--O,x[0]-=o.width),o.j+o.ka+o.T==o.o&&(E[0]=o.o-o.j-O));var J=h.eb;O=h.fb+O*h.A,o=Ht(b,x[0],o.width,A,E,J,O+(I?0:3),h.A),e(p==E),o&&_t(L)&&kn(J,O,I,A,E,h.A)}return 0}function We(o){var h=o.ma,p=h.ba.S,b=11>p,x=p==el||p==tl||p==rl||p==mc||p==12||_t(p);if(h.memory=null,h.Ib=null,h.Jb=null,h.Nd=null,!Ja(h.Oa,o,x?11:12))return 0;if(x&&_t(p)&&Ce(),o.da)alert("todo:use_scaling");else{if(b){if(h.Ib=st,o.Kb){if(p=o.U+1>>1,h.memory=s(o.U+2*p),h.memory==null)return 0;h.ec=h.memory,h.fc=0,h.cc=h.ec,h.dc=h.fc+o.U,h.Mc=h.cc,h.Nc=h.dc+p,h.Ib=St,Ce()}}else alert("todo:EmitYUV");x&&(h.Jb=xe,b&&le())}if(b&&!Uh){for(o=0;256>o;++o)P1[o]=89858*(o-128)+sl>>il,E1[o]=-22014*(o-128)+sl,N1[o]=-45773*(o-128),I1[o]=113618*(o-128)+sl>>il;for(o=io;o<_c;++o)h=76283*(o-16)+sl>>il,T1[o-io]=mn(h,255),R1[o-io]=mn(h+8>>4,15);Uh=1}return 1}function Xe(o){var h=o.ma,p=o.U,b=o.T;return e(!(1&o.ka)),0>=p||0>=b?0:(p=h.Ib(o,h),h.Jb!=null&&h.Jb(o,h,p),h.Dc+=p,1)}function ft(o){o.ma.memory=null}function Ue(o,h,p,b){return ve(o,8)!=47?0:(h[0]=ve(o,14)+1,p[0]=ve(o,14)+1,b[0]=ve(o,1),ve(o,3)!=0?0:!o.h)}function Zt(o,h){if(4>o)return o+1;var p=o-2>>1;return(2+(1&o)<<p)+ve(h,p)+1}function jt(o,h){return 120<h?h-120:1<=(p=((p=g1[h-1])>>4)*o+(8-(15&p)))?p:1;var p}function cr(o,h,p){var b=D(p),x=o[h+=255&b].g-8;return 0<x&&(H(p,p.u+8),b=D(p),h+=o[h].value,h+=b&(1<<x)-1),H(p,p.u+o[h].g),o[h].value}function Mt(o,h,p){return p.g+=o.g,p.value+=o.value<<h>>>0,e(8>=p.g),o.g}function Wt(o,h,p){var b=o.xc;return e((h=b==0?0:o.vc[o.md*(p>>b)+(h>>b)])<o.Wb),o.Ya[h]}function kr(o,h,p,b){var x=o.ab,A=o.c*h,L=o.C;h=L+h;var I=p,E=b;for(b=o.Ta,p=o.Ua;0<x--;){var O=o.gc[x],J=L,ce=h,ue=I,re=E,je=(E=b,I=p,O.Ea);switch(e(J<ce),e(ce<=O.nc),O.hc){case 2:Go(ue,re,(ce-J)*je,E,I);break;case 0:var ye=J,Y=ce,X=E,_e=I,ke=(Be=O).Ea;ye==0&&(pc(ue,re,null,null,1,X,_e),ct(ue,re+1,0,0,ke-1,X,_e+1),re+=ke,_e+=ke,++ye);for(var Se=1<<Be.b,qe=Se-1,De=ze(ke,Be.b),rt=Be.K,Be=Be.w+(ye>>Be.b)*De;ye<Y;){var Et=rt,Ot=Be,Nt=1;for(Xa(ue,re,X,_e-ke,1,X,_e);Nt<ke;){var xt=(Nt&~qe)+Se;xt>ke&&(xt=ke),(0,Pi[Et[Ot++]>>8&15])(ue,re+ +Nt,X,_e+Nt-ke,xt-Nt,X,_e+Nt),Nt=xt}re+=ke,_e+=ke,++ye&qe||(Be+=De)}ce!=O.nc&&r(E,I-je,E,I+(ce-J-1)*je,je);break;case 1:for(je=ue,Y=re,ke=(ue=O.Ea)-(_e=ue&~(X=(re=1<<O.b)-1)),ye=ze(ue,O.b),Se=O.K,O=O.w+(J>>O.b)*ye;J<ce;){for(qe=Se,De=O,rt=new Ee,Be=Y+_e,Et=Y+ue;Y<Be;)It(qe[De++],rt),fs(rt,je,Y,re,E,I),Y+=re,I+=re;Y<Et&&(It(qe[De++],rt),fs(rt,je,Y,ke,E,I),Y+=ke,I+=ke),++J&X||(O+=ye)}break;case 3:if(ue==E&&re==I&&0<O.b){for(Y=E,ue=je=I+(ce-J)*je-(_e=(ce-J)*ze(O.Ea,O.b)),re=E,X=I,ye=[],_e=(ke=_e)-1;0<=_e;--_e)ye[_e]=re[X+_e];for(_e=ke-1;0<=_e;--_e)Y[ue+_e]=ye[_e];Sn(O,J,ce,E,je,E,I)}else Sn(O,J,ce,ue,re,E,I)}I=b,E=p}E!=p&&r(b,p,I,E,A)}function si(o,h){var p=o.V,b=o.Ba+o.c*o.C,x=h-o.C;if(e(h<=o.l.o),e(16>=x),0<x){var A=o.l,L=o.Ta,I=o.Ua,E=A.width;if(kr(o,x,p,b),x=I=[I],e((p=o.C)<(b=h)),e(A.v<A.va),b>A.o&&(b=A.o),p<A.j){var O=A.j-p;p=A.j,x[0]+=O*E}if(p>=b?p=0:(x[0]+=4*A.v,A.ka=p-A.j,A.U=A.va-A.v,A.T=b-p,p=1),p){if(I=I[0],11>(p=o.ca).S){var J=p.f.RGBA,ce=(b=p.S,x=A.U,A=A.T,O=J.eb,J.A),ue=A;for(J=J.fb+o.Ma*J.A;0<ue--;){var re=L,je=I,ye=x,Y=O,X=J;switch(b){case Qo:an(re,je,ye,Y,X);break;case el:Jr(re,je,ye,Y,X);break;case vc:Jr(re,je,ye,Y,X),kn(Y,X,0,ye,1,0);break;case Nh:ui(re,je,ye,Y,X);break;case tl:At(re,je,ye,Y,X,1);break;case bc:At(re,je,ye,Y,X,1),kn(Y,X,0,ye,1,0);break;case rl:At(re,je,ye,Y,X,0);break;case nl:At(re,je,ye,Y,X,0),kn(Y,X,1,ye,1,0);break;case mc:Ii(re,je,ye,Y,X);break;case yc:Ii(re,je,ye,Y,X),Vt(Y,X,ye,1,0);break;case Eh:ci(re,je,ye,Y,X);break;default:e(0)}I+=E,J+=ce}o.Ma+=A}else alert("todo:EmitRescaledRowsYUVA");e(o.Ma<=p.height)}}o.C=h,e(o.C<=o.i)}function _n(o){var h;if(0<o.ua)return 0;for(h=0;h<o.Wb;++h){var p=o.Ya[h].G,b=o.Ya[h].H;if(0<p[1][b[1]+0].g||0<p[2][b[2]+0].g||0<p[3][b[3]+0].g)return 0}return 1}function Qr(o,h,p,b,x,A){if(o.Z!=0){var L=o.qd,I=o.rd;for(e(Ri[o.Z]!=null);h<p;++h)Ri[o.Z](L,I,b,x,b,x,A),L=b,I=x,x+=A;o.qd=L,o.rd=I}}function en(o,h){var p=o.l.ma,b=p.Z==0||p.Z==1?o.l.j:o.C;if(b=o.C<b?b:o.C,e(h<=o.l.o),h>b){var x=o.l.width,A=p.ca,L=p.tb+x*b,I=o.V,E=o.Ba+o.c*b,O=o.gc;e(o.ab==1),e(O[0].hc==3),Ko(O[0],b,h,I,E,A,L),Qr(p,b,h,A,L,x)}o.C=o.Ma=h}function tn(o,h,p,b,x,A,L){var I=o.$/b,E=o.$%b,O=o.m,J=o.s,ce=p+o.$,ue=ce;x=p+b*x;var re=p+b*A,je=280+J.ua,ye=o.Pb?I:16777216,Y=0<J.ua?J.Wa:null,X=J.wc,_e=ce<re?Wt(J,E,I):null;e(o.C<A),e(re<=x);var ke=!1;e:for(;;){for(;ke||ce<re;){var Se=0;if(I>=ye){var qe=ce-p;e((ye=o).Pb),ye.wd=ye.m,ye.xd=qe,0<ye.s.ua&&be(ye.s.Wa,ye.s.vb),ye=I+v1}if(E&X||(_e=Wt(J,E,I)),e(_e!=null),_e.Qb&&(h[ce]=_e.qb,ke=!0),!ke)if(Q(O),_e.jc){Se=O,qe=h;var De=ce,rt=_e.pd[D(Se)&Tr-1];e(_e.jc),256>rt.g?(H(Se,Se.u+rt.g),qe[De]=rt.value,Se=0):(H(Se,Se.u+rt.g-256),e(256<=rt.value),Se=rt.value),Se==0&&(ke=!0)}else Se=cr(_e.G[0],_e.H[0],O);if(O.h)break;if(ke||256>Se){if(!ke)if(_e.nd)h[ce]=(_e.qb|Se<<8)>>>0;else{if(Q(O),ke=cr(_e.G[1],_e.H[1],O),Q(O),qe=cr(_e.G[2],_e.H[2],O),De=cr(_e.G[3],_e.H[3],O),O.h)break;h[ce]=(De<<24|ke<<16|Se<<8|qe)>>>0}if(ke=!1,++ce,++E>=b&&(E=0,++I,L!=null&&I<=A&&!(I%16)&&L(o,I),Y!=null))for(;ue<ce;)Se=h[ue++],Y.X[(506832829*Se&4294967295)>>>Y.Mb]=Se}else if(280>Se){if(Se=Zt(Se-256,O),qe=cr(_e.G[4],_e.H[4],O),Q(O),qe=jt(b,qe=Zt(qe,O)),O.h)break;if(ce-p<qe||x-ce<Se)break e;for(De=0;De<Se;++De)h[ce+De]=h[ce+De-qe];for(ce+=Se,E+=Se;E>=b;)E-=b,++I,L!=null&&I<=A&&!(I%16)&&L(o,I);if(e(ce<=x),E&X&&(_e=Wt(J,E,I)),Y!=null)for(;ue<ce;)Se=h[ue++],Y.X[(506832829*Se&4294967295)>>>Y.Mb]=Se}else{if(!(Se<je))break e;for(ke=Se-280,e(Y!=null);ue<ce;)Se=h[ue++],Y.X[(506832829*Se&4294967295)>>>Y.Mb]=Se;Se=ce,e(!(ke>>>(qe=Y).Xa)),h[Se]=qe.X[ke],ke=!0}ke||e(O.h==q(O))}if(o.Pb&&O.h&&ce<x)e(o.m.h),o.a=5,o.m=o.wd,o.$=o.xd,0<o.s.ua&&be(o.s.vb,o.s.Wa);else{if(O.h)break e;L!=null&&L(o,I>A?A:I),o.a=0,o.$=ce-p}return 1}return o.a=3,0}function fn(o){e(o!=null),o.vc=null,o.yc=null,o.Ya=null;var h=o.Wa;h!=null&&(h.X=null),o.vb=null,e(o!=null)}function Kr(){var o=new fc;return o==null?null:(o.a=0,o.xb=Oh,Er("Predictor","VP8LPredictors"),Er("Predictor","VP8LPredictors_C"),Er("PredictorAdd","VP8LPredictorsAdd"),Er("PredictorAdd","VP8LPredictorsAdd_C"),Go=vt,fs=tt,an=Me,Jr=lr,Ii=bt,ci=Or,ui=yt,M.VP8LMapColor32b=ta,M.VP8LMapColor8b=Jo,o)}function pn(o,h,p,b,x){var A=1,L=[o],I=[h],E=b.m,O=b.s,J=null,ce=0;e:for(;;){if(p)for(;A&&ve(E,1);){var ue=L,re=I,je=b,ye=1,Y=je.m,X=je.gc[je.ab],_e=ve(Y,2);if(je.Oc&1<<_e)A=0;else{switch(je.Oc|=1<<_e,X.hc=_e,X.Ea=ue[0],X.nc=re[0],X.K=[null],++je.ab,e(4>=je.ab),_e){case 0:case 1:X.b=ve(Y,3)+2,ye=pn(ze(X.Ea,X.b),ze(X.nc,X.b),0,je,X.K),X.K=X.K[0];break;case 3:var ke,Se=ve(Y,8)+1,qe=16<Se?0:4<Se?1:2<Se?2:3;if(ue[0]=ze(X.Ea,qe),X.b=qe,ke=ye=pn(Se,1,0,je,X.K)){var De,rt=Se,Be=X,Et=1<<(8>>Be.b),Ot=s(Et);if(Ot==null)ke=0;else{var Nt=Be.K[0],xt=Be.w;for(Ot[0]=Be.K[0][0],De=1;De<1*rt;++De)Ot[De]=Ae(Nt[xt+De],Ot[De-1]);for(;De<4*Et;++De)Ot[De]=0;Be.K[0]=null,Be.K[0]=Ot,ke=1}}ye=ke;break;case 2:break;default:e(0)}A=ye}}if(L=L[0],I=I[0],A&&ve(E,1)&&!(A=1<=(ce=ve(E,4))&&11>=ce)){b.a=3;break e}var Ut;if(Ut=A)t:{var Bt,gt,vr,on=b,br=L,ln=I,Ft=ce,bn=p,yn=on.m,Cr=on.s,Rr=[null],Zr=1,Pn=0,Kn=m1[Ft];r:for(;;){if(bn&&ve(yn,1)){var Pr=ve(yn,3)+2,pi=ze(br,Pr),bs=ze(ln,Pr),aa=pi*bs;if(!pn(pi,bs,0,on,Rr))break r;for(Rr=Rr[0],Cr.xc=Pr,Bt=0;Bt<aa;++Bt){var Oi=Rr[Bt]>>8&65535;Rr[Bt]=Oi,Oi>=Zr&&(Zr=Oi+1)}}if(yn.h)break r;for(gt=0;5>gt;++gt){var nr=Th[gt];!gt&&0<Ft&&(nr+=1<<Ft),Pn<nr&&(Pn=nr)}var Sc=a(Zr*Kn,T),zh=Zr,Wh=a(zh,U);if(Wh==null)var ol=null;else e(65536>=zh),ol=Wh;var so=s(Pn);if(ol==null||so==null||Sc==null){on.a=1;break r}var ll=Sc;for(Bt=vr=0;Bt<Zr;++Bt){var Dn=ol[Bt],oa=Dn.G,la=Dn.H,Vh=0,cl=1,Hh=0;for(gt=0;5>gt;++gt){nr=Th[gt],oa[gt]=ll,la[gt]=vr,!gt&&0<Ft&&(nr+=1<<Ft);i:{var ul,jc=nr,hl=on,ao=so,D1=ll,M1=vr,Ac=0,Fi=hl.m,B1=ve(Fi,1);if(i(ao,0,0,jc),B1){var U1=ve(Fi,1)+1,$1=ve(Fi,1),Gh=ve(Fi,$1==0?1:8);ao[Gh]=1,U1==2&&(ao[Gh=ve(Fi,8)]=1);var dl=1}else{var Kh=s(19),Jh=ve(Fi,4)+4;if(19<Jh){hl.a=3;var fl=0;break i}for(ul=0;ul<Jh;++ul)Kh[p1[ul]]=ve(Fi,3);var kc=void 0,oo=void 0,Yh=hl,q1=Kh,pl=jc,Zh=ao,Lc=0,Di=Yh.m,Xh=8,Qh=a(128,T);n:for(;N(Qh,0,7,q1,19);){if(ve(Di,1)){var z1=2+2*ve(Di,3);if((kc=2+ve(Di,z1))>pl)break n}else kc=pl;for(oo=0;oo<pl&&kc--;){Q(Di);var ed=Qh[0+(127&D(Di))];H(Di,Di.u+ed.g);var ca=ed.value;if(16>ca)Zh[oo++]=ca,ca!=0&&(Xh=ca);else{var W1=ca==16,td=ca-16,V1=d1[td],rd=ve(Di,h1[td])+V1;if(oo+rd>pl)break n;for(var H1=W1?Xh:0;0<rd--;)Zh[oo++]=H1}}Lc=1;break n}Lc||(Yh.a=3),dl=Lc}(dl=dl&&!Fi.h)&&(Ac=N(D1,M1,8,ao,jc)),dl&&Ac!=0?fl=Ac:(hl.a=3,fl=0)}if(fl==0)break r;if(cl&&f1[gt]==1&&(cl=ll[vr].g==0),Vh+=ll[vr].g,vr+=fl,3>=gt){var lo,Cc=so[0];for(lo=1;lo<nr;++lo)so[lo]>Cc&&(Cc=so[lo]);Hh+=Cc}}if(Dn.nd=cl,Dn.Qb=0,cl&&(Dn.qb=(oa[3][la[3]+0].value<<24|oa[1][la[1]+0].value<<16|oa[2][la[2]+0].value)>>>0,Vh==0&&256>oa[0][la[0]+0].value&&(Dn.Qb=1,Dn.qb+=oa[0][la[0]+0].value<<8)),Dn.jc=!Dn.Qb&&6>Hh,Dn.jc){var gl,gi=Dn;for(gl=0;gl<Tr;++gl){var Mi=gl,Bi=gi.pd[Mi],ml=gi.G[0][gi.H[0]+Mi];256<=ml.value?(Bi.g=ml.g+256,Bi.value=ml.value):(Bi.g=0,Bi.value=0,Mi>>=Mt(ml,8,Bi),Mi>>=Mt(gi.G[1][gi.H[1]+Mi],16,Bi),Mi>>=Mt(gi.G[2][gi.H[2]+Mi],0,Bi),Mt(gi.G[3][gi.H[3]+Mi],24,Bi))}}}Cr.vc=Rr,Cr.Wb=Zr,Cr.Ya=ol,Cr.yc=Sc,Ut=1;break t}Ut=0}if(!(A=Ut)){b.a=3;break e}if(0<ce){if(O.ua=1<<ce,!Ye(O.Wa,ce)){b.a=1,A=0;break e}}else O.ua=0;var Pc=b,nd=L,G1=I,Ic=Pc.s,Nc=Ic.xc;if(Pc.c=nd,Pc.i=G1,Ic.md=ze(nd,Nc),Ic.wc=Nc==0?-1:(1<<Nc)-1,p){b.xb=j1;break e}if((J=s(L*I))==null){b.a=1,A=0;break e}A=(A=tn(b,J,0,L,I,I,null))&&!E.h;break e}return A?(x!=null?x[0]=J:(e(J==null),e(p)),b.$=0,p||fn(O)):fn(O),A}function ai(o,h){var p=o.c*o.i,b=p+h+16*h;return e(o.c<=h),o.V=s(b),o.V==null?(o.Ta=null,o.Ua=0,o.a=1,0):(o.Ta=o.V,o.Ua=o.Ba+p+h,1)}function _i(o,h){var p=o.C,b=h-p,x=o.V,A=o.Ba+o.c*p;for(e(h<=o.l.o);0<b;){var L=16<b?16:b,I=o.l.ma,E=o.l.width,O=E*L,J=I.ca,ce=I.tb+E*p,ue=o.Ta,re=o.Ua;kr(o,L,x,A),hr(ue,re,J,ce,O),Qr(I,p,p+L,J,ce,E),b-=L,x+=L*o.c,p+=L}e(p==h),o.C=o.Ma=h}function gn(){this.ub=this.yd=this.td=this.Rb=0}function rn(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Tn(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Ms(){this.Yb=function(){var o=[];return function h(p,b,x){for(var A=x[b],L=0;L<A&&(p.push(x.length>b+1?[]:0),!(x.length<b+1));L++)h(p[L],b+1,x)}(o,0,[3,11]),o}()}function rs(){this.jb=s(3),this.Wc=c([4,8],Ms),this.Xc=c([4,17],Ms)}function Ta(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Si(){this.ld=this.La=this.dd=this.tc=0}function Bs(){this.Na=this.la=0}function Ra(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ns(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function is(){this.uc=this.M=this.Nb=0,this.wa=Array(new Si),this.Y=0,this.ya=Array(new ns),this.aa=0,this.l=new Ai}function ji(){this.y=s(16),this.f=s(8),this.ea=s(8)}function ss(){this.cb=this.a=0,this.sc="",this.m=new Fe,this.Od=new gn,this.Kc=new rn,this.ed=new Ta,this.Qa=new Tn,this.Ic=this.$c=this.Aa=0,this.D=new is,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,Fe),this.ia=0,this.pb=a(4,Ra),this.Pa=new rs,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ji),this.Hd=0,this.rb=Array(new Bs),this.sb=0,this.wa=Array(new Si),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ns),this.L=this.aa=0,this.gd=c([4,2],Si),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ai(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Oa(){var o=new ss;return o!=null&&(o.a=0,o.sc="OK",o.cb=0,o.Xb=0,no||(no=$s)),o}function Xt(o,h,p){return o.a==0&&(o.a=h,o.sc=p,o.cb=0),0}function Us(o,h,p){return 3<=p&&o[h+0]==157&&o[h+1]==1&&o[h+2]==42}function as(o,h){if(o==null)return 0;if(o.a=0,o.sc="OK",h==null)return Xt(o,2,"null VP8Io passed to VP8GetHeaders()");var p=h.data,b=h.w,x=h.ha;if(4>x)return Xt(o,7,"Truncated header.");var A=p[b+0]|p[b+1]<<8|p[b+2]<<16,L=o.Od;if(L.Rb=!(1&A),L.td=A>>1&7,L.yd=A>>4&1,L.ub=A>>5,3<L.td)return Xt(o,3,"Incorrect keyframe parameters.");if(!L.yd)return Xt(o,4,"Frame not displayable.");b+=3,x-=3;var I=o.Kc;if(L.Rb){if(7>x)return Xt(o,7,"cannot parse picture header");if(!Us(p,b,x))return Xt(o,3,"Bad code word");I.c=16383&(p[b+4]<<8|p[b+3]),I.Td=p[b+4]>>6,I.i=16383&(p[b+6]<<8|p[b+5]),I.Ud=p[b+6]>>6,b+=7,x-=7,o.za=I.c+15>>4,o.Ub=I.i+15>>4,h.width=I.c,h.height=I.i,h.Da=0,h.j=0,h.v=0,h.va=h.width,h.o=h.height,h.da=0,h.ib=h.width,h.hb=h.height,h.U=h.width,h.T=h.height,i((A=o.Pa).jb,0,255,A.jb.length),e((A=o.Qa)!=null),A.Cb=0,A.Bb=0,A.Fb=1,i(A.Zb,0,0,A.Zb.length),i(A.Lb,0,0,A.Lb)}if(L.ub>x)return Xt(o,7,"bad partition length");ne(A=o.m,p,b,L.ub),b+=L.ub,x-=L.ub,L.Rb&&(I.Ld=me(A),I.Kd=me(A)),I=o.Qa;var E,O=o.Pa;if(e(A!=null),e(I!=null),I.Cb=me(A),I.Cb){if(I.Bb=me(A),me(A)){for(I.Fb=me(A),E=0;4>E;++E)I.Zb[E]=me(A)?de(A,7):0;for(E=0;4>E;++E)I.Lb[E]=me(A)?de(A,6):0}if(I.Bb)for(E=0;3>E;++E)O.jb[E]=me(A)?se(A,8):255}else I.Bb=0;if(A.Ka)return Xt(o,3,"cannot parse segment header");if((I=o.ed).zd=me(A),I.Tb=se(A,6),I.wb=se(A,3),I.Pc=me(A),I.Pc&&me(A)){for(O=0;4>O;++O)me(A)&&(I.vd[O]=de(A,6));for(O=0;4>O;++O)me(A)&&(I.od[O]=de(A,6))}if(o.L=I.Tb==0?0:I.zd?1:2,A.Ka)return Xt(o,3,"cannot parse filter header");var J=x;if(x=E=b,b=E+J,I=J,o.Xb=(1<<se(o.m,2))-1,J<3*(O=o.Xb))p=7;else{for(E+=3*O,I-=3*O,J=0;J<O;++J){var ce=p[x+0]|p[x+1]<<8|p[x+2]<<16;ce>I&&(ce=I),ne(o.Jc[+J],p,E,ce),E+=ce,I-=ce,x+=3}ne(o.Jc[+O],p,E,I),p=E<b?0:5}if(p!=0)return Xt(o,p,"cannot parse partitions");for(p=se(E=o.m,7),x=me(E)?de(E,4):0,b=me(E)?de(E,4):0,I=me(E)?de(E,4):0,O=me(E)?de(E,4):0,E=me(E)?de(E,4):0,J=o.Qa,ce=0;4>ce;++ce){if(J.Cb){var ue=J.Zb[ce];J.Fb||(ue+=p)}else{if(0<ce){o.pb[ce]=o.pb[0];continue}ue=p}var re=o.pb[ce];re.Sc[0]=wc[mn(ue+x,127)],re.Sc[1]=xc[mn(ue+0,127)],re.Eb[0]=2*wc[mn(ue+b,127)],re.Eb[1]=101581*xc[mn(ue+I,127)]>>16,8>re.Eb[1]&&(re.Eb[1]=8),re.Qc[0]=wc[mn(ue+O,117)],re.Qc[1]=xc[mn(ue+E,127)],re.lc=ue+E}if(!L.Rb)return Xt(o,4,"Not a key frame.");for(me(A),L=o.Pa,p=0;4>p;++p){for(x=0;8>x;++x)for(b=0;3>b;++b)for(I=0;11>I;++I)O=pe(A,_1[p][x][b][I])?se(A,8):w1[p][x][b][I],L.Wc[p][x].Yb[b][I]=O;for(x=0;17>x;++x)L.Xc[p][x]=L.Wc[p][S1[x]]}return o.kc=me(A),o.kc&&(o.Bd=se(A,8)),o.cb=1}function $s(o,h,p,b,x,A,L){var I=h[x].Yb[p];for(p=0;16>x;++x){if(!pe(o,I[p+0]))return x;for(;!pe(o,I[p+1]);)if(I=h[++x].Yb[0],p=0,x==16)return 16;var E=h[x+1].Yb;if(pe(o,I[p+2])){var O=o,J=0;if(pe(O,(ue=I)[(ce=p)+3]))if(pe(O,ue[ce+6])){for(I=0,ce=2*(J=pe(O,ue[ce+8]))+(ue=pe(O,ue[ce+9+J])),J=0,ue=b1[ce];ue[I];++I)J+=J+pe(O,ue[I]);J+=3+(8<<ce)}else pe(O,ue[ce+7])?(J=7+2*pe(O,165),J+=pe(O,145)):J=5+pe(O,159);else J=pe(O,ue[ce+4])?3+pe(O,ue[ce+5]):2;I=E[2]}else J=1,I=E[1];E=L+y1[x],0>(O=o).b&&he(O);var ce,ue=O.b,re=(ce=O.Ca>>1)-(O.I>>ue)>>31;--O.b,O.Ca+=re,O.Ca|=1,O.I-=(ce+1&re)<<ue,A[E]=((J^re)-re)*b[(0<x)+0]}return 16}function os(o){var h=o.rb[o.sb-1];h.la=0,h.Na=0,i(o.zc,0,0,o.zc.length),o.ja=0}function qs(o,h){if(o==null)return 0;if(h==null)return Xt(o,2,"NULL VP8Io parameter in VP8Decode().");if(!o.cb&&!as(o,h))return 0;if(e(o.cb),h.ac==null||h.ac(h)){h.ob&&(o.L=0);var p=al[o.L];if(o.L==2?(o.yb=0,o.zb=0):(o.yb=h.v-p>>4,o.zb=h.j-p>>4,0>o.yb&&(o.yb=0),0>o.zb&&(o.zb=0)),o.Va=h.o+15+p>>4,o.Hb=h.va+15+p>>4,o.Hb>o.za&&(o.Hb=o.za),o.Va>o.Ub&&(o.Va=o.Ub),0<o.L){var b=o.ed;for(p=0;4>p;++p){var x;if(o.Qa.Cb){var A=o.Qa.Lb[p];o.Qa.Fb||(A+=b.Tb)}else A=b.Tb;for(x=0;1>=x;++x){var L=o.gd[p][x],I=A;if(b.Pc&&(I+=b.vd[0],x&&(I+=b.od[0])),0<(I=0>I?0:63<I?63:I)){var E=I;0<b.wb&&(E=4<b.wb?E>>2:E>>1)>9-b.wb&&(E=9-b.wb),1>E&&(E=1),L.dd=E,L.tc=2*I+E,L.ld=40<=I?2:15<=I?1:0}else L.tc=0;L.La=x}}}p=0}else Xt(o,6,"Frame setup failed"),p=o.a;if(p=p==0){if(p){o.$c=0,0<o.Aa||(o.Ic=F1);e:{p=o.Ic,b=4*(E=o.za);var O=32*E,J=E+1,ce=0<o.L?E*(0<o.Aa?2:1):0,ue=(o.Aa==2?2:1)*E;if((L=b+832+(x=3*(16*p+al[o.L])/2*O)+(A=o.Fa!=null&&0<o.Fa.length?o.Kc.c*o.Kc.i:0))!=L)p=0;else{if(L>o.Vb){if(o.Vb=0,o.Ec=s(L),o.Fc=0,o.Ec==null){p=Xt(o,1,"no memory during frame initialization.");break e}o.Vb=L}L=o.Ec,I=o.Fc,o.Ac=L,o.Bc=I,I+=b,o.Gd=a(O,ji),o.Hd=0,o.rb=a(J+1,Bs),o.sb=1,o.wa=ce?a(ce,Si):null,o.Y=0,o.D.Nb=0,o.D.wa=o.wa,o.D.Y=o.Y,0<o.Aa&&(o.D.Y+=E),e(!0),o.oc=L,o.pc=I,I+=832,o.ya=a(ue,ns),o.aa=0,o.D.ya=o.ya,o.D.aa=o.aa,o.Aa==2&&(o.D.aa+=E),o.R=16*E,o.B=8*E,E=(O=al[o.L])*o.R,O=O/2*o.B,o.sa=L,o.ta=I+E,o.qa=o.sa,o.ra=o.ta+16*p*o.R+O,o.Ha=o.qa,o.Ia=o.ra+8*p*o.B+O,o.$c=0,I+=x,o.mb=A?L:null,o.nb=A?I:null,e(I+A<=o.Fc+o.Vb),os(o),i(o.Ac,o.Bc,0,b),p=1}}if(p){if(h.ka=0,h.y=o.sa,h.O=o.ta,h.f=o.qa,h.N=o.ra,h.ea=o.Ha,h.Vd=o.Ia,h.fa=o.R,h.Rc=o.B,h.F=null,h.J=0,!Zo){for(p=-255;255>=p;++p)Sr[255+p]=0>p?-p:p;for(p=-1020;1020>=p;++p)di[1020+p]=-128>p?-128:127<p?127:p;for(p=-112;112>=p;++p)ro[112+p]=-16>p?-16:15<p?15:p;for(p=-255;510>=p;++p)sa[255+p]=0>p?0:255<p?255:p;Zo=1}ra=Rt,hi=Tt,Qa=_r,Yr=tr,jn=Qt,ur=nn,na=Ua,Yo=hs,eo=dc,ps=$a,gs=hc,Ni=Gs,ms=qa,ia=Wo,vs=zo,Ei=Hn,to=li,An=uc,Fn[0]=Vn,Fn[1]=Fa,Fn[2]=ic,Fn[3]=sc,Fn[4]=Mo,Fn[5]=Vs,Fn[6]=Bo,Fn[7]=Da,Fn[8]=oc,Fn[9]=ac,Ti[0]=Fo,Ti[1]=rc,Ti[2]=oi,Ti[3]=zs,Ti[4]=Dr,Ti[5]=nc,Ti[6]=Do,fi[0]=ki,fi[1]=tc,fi[2]=lc,fi[3]=Ma,fi[4]=us,fi[5]=cc,fi[6]=Ba,p=1}else p=0}p&&(p=function(re,je){for(re.M=0;re.M<re.Va;++re.M){var ye,Y=re.Jc[re.M&re.Xb],X=re.m,_e=re;for(ye=0;ye<_e.za;++ye){var ke=X,Se=_e,qe=Se.Ac,De=Se.Bc+4*ye,rt=Se.zc,Be=Se.ya[Se.aa+ye];if(Se.Qa.Bb?Be.$b=pe(ke,Se.Pa.jb[0])?2+pe(ke,Se.Pa.jb[2]):pe(ke,Se.Pa.jb[1]):Be.$b=0,Se.kc&&(Be.Ad=pe(ke,Se.Bd)),Be.Za=!pe(ke,145)+0,Be.Za){var Et=Be.Ob,Ot=0;for(Se=0;4>Se;++Se){var Nt,xt=rt[0+Se];for(Nt=0;4>Nt;++Nt){xt=x1[qe[De+Nt]][xt];for(var Ut=Rh[pe(ke,xt[0])];0<Ut;)Ut=Rh[2*Ut+pe(ke,xt[Ut])];xt=-Ut,qe[De+Nt]=xt}r(Et,Ot,qe,De,4),Ot+=4,rt[0+Se]=xt}}else xt=pe(ke,156)?pe(ke,128)?1:3:pe(ke,163)?2:0,Be.Ob[0]=xt,i(qe,De,xt,4),i(rt,0,xt,4);Be.Dd=pe(ke,142)?pe(ke,114)?pe(ke,183)?1:3:2:0}if(_e.m.Ka)return Xt(re,7,"Premature end-of-partition0 encountered.");for(;re.ja<re.za;++re.ja){if(_e=Y,ke=(X=re).rb[X.sb-1],qe=X.rb[X.sb+X.ja],ye=X.ya[X.aa+X.ja],De=X.kc?ye.Ad:0)ke.la=qe.la=0,ye.Za||(ke.Na=qe.Na=0),ye.Hc=0,ye.Gc=0,ye.ia=0;else{var Bt,gt;if(ke=qe,qe=_e,De=X.Pa.Xc,rt=X.ya[X.aa+X.ja],Be=X.pb[rt.$b],Se=rt.ad,Et=0,Ot=X.rb[X.sb-1],xt=Nt=0,i(Se,Et,0,384),rt.Za)var vr=0,on=De[3];else{Ut=s(16);var br=ke.Na+Ot.Na;if(br=no(qe,De[1],br,Be.Eb,0,Ut,0),ke.Na=Ot.Na=(0<br)+0,1<br)ra(Ut,0,Se,Et);else{var ln=Ut[0]+3>>3;for(Ut=0;256>Ut;Ut+=16)Se[Et+Ut]=ln}vr=1,on=De[0]}var Ft=15&ke.la,bn=15&Ot.la;for(Ut=0;4>Ut;++Ut){var yn=1&bn;for(ln=gt=0;4>ln;++ln)Ft=Ft>>1|(yn=(br=no(qe,on,br=yn+(1&Ft),Be.Sc,vr,Se,Et))>vr)<<7,gt=gt<<2|(3<br?3:1<br?2:Se[Et+0]!=0),Et+=16;Ft>>=4,bn=bn>>1|yn<<7,Nt=(Nt<<8|gt)>>>0}for(on=Ft,vr=bn>>4,Bt=0;4>Bt;Bt+=2){for(gt=0,Ft=ke.la>>4+Bt,bn=Ot.la>>4+Bt,Ut=0;2>Ut;++Ut){for(yn=1&bn,ln=0;2>ln;++ln)br=yn+(1&Ft),Ft=Ft>>1|(yn=0<(br=no(qe,De[2],br,Be.Qc,0,Se,Et)))<<3,gt=gt<<2|(3<br?3:1<br?2:Se[Et+0]!=0),Et+=16;Ft>>=2,bn=bn>>1|yn<<5}xt|=gt<<4*Bt,on|=Ft<<4<<Bt,vr|=(240&bn)<<Bt}ke.la=on,Ot.la=vr,rt.Hc=Nt,rt.Gc=xt,rt.ia=43690&xt?0:Be.ia,De=!(Nt|xt)}if(0<X.L&&(X.wa[X.Y+X.ja]=X.gd[ye.$b][ye.Za],X.wa[X.Y+X.ja].La|=!De),_e.Ka)return Xt(re,7,"Premature end-of-file encountered.")}if(os(re),X=je,_e=1,ye=(Y=re).D,ke=0<Y.L&&Y.M>=Y.zb&&Y.M<=Y.Va,Y.Aa==0)e:{if(ye.M=Y.M,ye.uc=ke,Ka(Y,ye),_e=1,ye=(gt=Y.D).Nb,ke=(xt=al[Y.L])*Y.R,qe=xt/2*Y.B,Ut=16*ye*Y.R,ln=8*ye*Y.B,De=Y.sa,rt=Y.ta-ke+Ut,Be=Y.qa,Se=Y.ra-qe+ln,Et=Y.Ha,Ot=Y.Ia-qe+ln,bn=(Ft=gt.M)==0,Nt=Ft>=Y.Va-1,Y.Aa==2&&Ka(Y,gt),gt.uc)for(yn=(br=Y).D.M,e(br.D.uc),gt=br.yb;gt<br.Hb;++gt){vr=gt,on=yn;var Cr=(Rr=(nr=br).D).Nb;Bt=nr.R;var Rr=Rr.wa[Rr.Y+vr],Zr=nr.sa,Pn=nr.ta+16*Cr*Bt+16*vr,Kn=Rr.dd,Pr=Rr.tc;if(Pr!=0)if(e(3<=Pr),nr.L==1)0<vr&&Ei(Zr,Pn,Bt,Pr+4),Rr.La&&An(Zr,Pn,Bt,Pr),0<on&&vs(Zr,Pn,Bt,Pr+4),Rr.La&&to(Zr,Pn,Bt,Pr);else{var pi=nr.B,bs=nr.qa,aa=nr.ra+8*Cr*pi+8*vr,Oi=nr.Ha,nr=nr.Ia+8*Cr*pi+8*vr;Cr=Rr.ld,0<vr&&(Yo(Zr,Pn,Bt,Pr+4,Kn,Cr),ps(bs,aa,Oi,nr,pi,Pr+4,Kn,Cr)),Rr.La&&(Ni(Zr,Pn,Bt,Pr,Kn,Cr),ia(bs,aa,Oi,nr,pi,Pr,Kn,Cr)),0<on&&(na(Zr,Pn,Bt,Pr+4,Kn,Cr),eo(bs,aa,Oi,nr,pi,Pr+4,Kn,Cr)),Rr.La&&(gs(Zr,Pn,Bt,Pr,Kn,Cr),ms(bs,aa,Oi,nr,pi,Pr,Kn,Cr))}}if(Y.ia&&alert("todo:DitherRow"),X.put!=null){if(gt=16*Ft,Ft=16*(Ft+1),bn?(X.y=Y.sa,X.O=Y.ta+Ut,X.f=Y.qa,X.N=Y.ra+ln,X.ea=Y.Ha,X.W=Y.Ia+ln):(gt-=xt,X.y=De,X.O=rt,X.f=Be,X.N=Se,X.ea=Et,X.W=Ot),Nt||(Ft-=xt),Ft>X.o&&(Ft=X.o),X.F=null,X.J=null,Y.Fa!=null&&0<Y.Fa.length&&gt<Ft&&(X.J=Ha(Y,X,gt,Ft-gt),X.F=Y.mb,X.F==null&&X.F.length==0)){_e=Xt(Y,3,"Could not decode alpha data.");break e}gt<X.j&&(xt=X.j-gt,gt=X.j,e(!(1&xt)),X.O+=Y.R*xt,X.N+=Y.B*(xt>>1),X.W+=Y.B*(xt>>1),X.F!=null&&(X.J+=X.width*xt)),gt<Ft&&(X.O+=X.v,X.N+=X.v>>1,X.W+=X.v>>1,X.F!=null&&(X.J+=X.v),X.ka=gt-X.j,X.U=X.va-X.v,X.T=Ft-gt,_e=X.put(X))}ye+1!=Y.Ic||Nt||(r(Y.sa,Y.ta-ke,De,rt+16*Y.R,ke),r(Y.qa,Y.ra-qe,Be,Se+8*Y.B,qe),r(Y.Ha,Y.Ia-qe,Et,Ot+8*Y.B,qe))}if(!_e)return Xt(re,6,"Output aborted.")}return 1}(o,h)),h.bc!=null&&h.bc(h),p&=1}return p?(o.cb=0,p):0}function oe(o,h,p,b,x){x=o[h+p+32*b]+(x>>3),o[h+p+32*b]=-256&x?0>x?0:255:x}function Je(o,h,p,b,x,A){oe(o,h,0,p,b+x),oe(o,h,1,p,b+A),oe(o,h,2,p,b-A),oe(o,h,3,p,b-x)}function Ke(o){return(20091*o>>16)+o}function Qe(o,h,p,b){var x,A=0,L=s(16);for(x=0;4>x;++x){var I=o[h+0]+o[h+8],E=o[h+0]-o[h+8],O=(35468*o[h+4]>>16)-Ke(o[h+12]),J=Ke(o[h+4])+(35468*o[h+12]>>16);L[A+0]=I+J,L[A+1]=E+O,L[A+2]=E-O,L[A+3]=I-J,A+=4,h++}for(x=A=0;4>x;++x)I=(o=L[A+0]+4)+L[A+8],E=o-L[A+8],O=(35468*L[A+4]>>16)-Ke(L[A+12]),oe(p,b,0,0,I+(J=Ke(L[A+4])+(35468*L[A+12]>>16))),oe(p,b,1,0,E+O),oe(p,b,2,0,E-O),oe(p,b,3,0,I-J),A++,b+=32}function nn(o,h,p,b){var x=o[h+0]+4,A=35468*o[h+4]>>16,L=Ke(o[h+4]),I=35468*o[h+1]>>16;Je(p,b,0,x+L,o=Ke(o[h+1]),I),Je(p,b,1,x+A,o,I),Je(p,b,2,x-A,o,I),Je(p,b,3,x-L,o,I)}function Tt(o,h,p,b,x){Qe(o,h,p,b),x&&Qe(o,h+16,p,b+4)}function _r(o,h,p,b){hi(o,h+0,p,b,1),hi(o,h+32,p,b+128,1)}function tr(o,h,p,b){var x;for(o=o[h+0]+4,x=0;4>x;++x)for(h=0;4>h;++h)oe(p,b,h,x,o)}function Qt(o,h,p,b){o[h+0]&&Yr(o,h+0,p,b),o[h+16]&&Yr(o,h+16,p,b+4),o[h+32]&&Yr(o,h+32,p,b+128),o[h+48]&&Yr(o,h+48,p,b+128+4)}function Rt(o,h,p,b){var x,A=s(16);for(x=0;4>x;++x){var L=o[h+0+x]+o[h+12+x],I=o[h+4+x]+o[h+8+x],E=o[h+4+x]-o[h+8+x],O=o[h+0+x]-o[h+12+x];A[0+x]=L+I,A[8+x]=L-I,A[4+x]=O+E,A[12+x]=O-E}for(x=0;4>x;++x)L=(o=A[0+4*x]+3)+A[3+4*x],I=A[1+4*x]+A[2+4*x],E=A[1+4*x]-A[2+4*x],O=o-A[3+4*x],p[b+0]=L+I>>3,p[b+16]=O+E>>3,p[b+32]=L-I>>3,p[b+48]=O-E>>3,b+=64}function ls(o,h,p){var b,x=h-32,A=vn,L=255-o[x-1];for(b=0;b<p;++b){var I,E=A,O=L+o[h-1];for(I=0;I<p;++I)o[h+I]=E[O+o[x+I]];h+=32}}function Fa(o,h){ls(o,h,4)}function tc(o,h){ls(o,h,8)}function rc(o,h){ls(o,h,16)}function oi(o,h){var p;for(p=0;16>p;++p)r(o,h+32*p,o,h-32,16)}function zs(o,h){var p;for(p=16;0<p;--p)i(o,h,o[h-1],16),h+=32}function Ws(o,h,p){var b;for(b=0;16>b;++b)i(h,p+32*b,o,16)}function Fo(o,h){var p,b=16;for(p=0;16>p;++p)b+=o[h-1+32*p]+o[h+p-32];Ws(b>>5,o,h)}function Dr(o,h){var p,b=8;for(p=0;16>p;++p)b+=o[h-1+32*p];Ws(b>>4,o,h)}function nc(o,h){var p,b=8;for(p=0;16>p;++p)b+=o[h+p-32];Ws(b>>4,o,h)}function Do(o,h){Ws(128,o,h)}function lt(o,h,p){return o+2*h+p+2>>2}function ic(o,h){var p,b=h-32;for(b=new Uint8Array([lt(o[b-1],o[b+0],o[b+1]),lt(o[b+0],o[b+1],o[b+2]),lt(o[b+1],o[b+2],o[b+3]),lt(o[b+2],o[b+3],o[b+4])]),p=0;4>p;++p)r(o,h+32*p,b,0,b.length)}function sc(o,h){var p=o[h-1],b=o[h-1+32],x=o[h-1+64],A=o[h-1+96];Pe(o,h+0,16843009*lt(o[h-1-32],p,b)),Pe(o,h+32,16843009*lt(p,b,x)),Pe(o,h+64,16843009*lt(b,x,A)),Pe(o,h+96,16843009*lt(x,A,A))}function Vn(o,h){var p,b=4;for(p=0;4>p;++p)b+=o[h+p-32]+o[h-1+32*p];for(b>>=3,p=0;4>p;++p)i(o,h+32*p,b,4)}function Mo(o,h){var p=o[h-1+0],b=o[h-1+32],x=o[h-1+64],A=o[h-1-32],L=o[h+0-32],I=o[h+1-32],E=o[h+2-32],O=o[h+3-32];o[h+0+96]=lt(b,x,o[h-1+96]),o[h+1+96]=o[h+0+64]=lt(p,b,x),o[h+2+96]=o[h+1+64]=o[h+0+32]=lt(A,p,b),o[h+3+96]=o[h+2+64]=o[h+1+32]=o[h+0+0]=lt(L,A,p),o[h+3+64]=o[h+2+32]=o[h+1+0]=lt(I,L,A),o[h+3+32]=o[h+2+0]=lt(E,I,L),o[h+3+0]=lt(O,E,I)}function Bo(o,h){var p=o[h+1-32],b=o[h+2-32],x=o[h+3-32],A=o[h+4-32],L=o[h+5-32],I=o[h+6-32],E=o[h+7-32];o[h+0+0]=lt(o[h+0-32],p,b),o[h+1+0]=o[h+0+32]=lt(p,b,x),o[h+2+0]=o[h+1+32]=o[h+0+64]=lt(b,x,A),o[h+3+0]=o[h+2+32]=o[h+1+64]=o[h+0+96]=lt(x,A,L),o[h+3+32]=o[h+2+64]=o[h+1+96]=lt(A,L,I),o[h+3+64]=o[h+2+96]=lt(L,I,E),o[h+3+96]=lt(I,E,E)}function Vs(o,h){var p=o[h-1+0],b=o[h-1+32],x=o[h-1+64],A=o[h-1-32],L=o[h+0-32],I=o[h+1-32],E=o[h+2-32],O=o[h+3-32];o[h+0+0]=o[h+1+64]=A+L+1>>1,o[h+1+0]=o[h+2+64]=L+I+1>>1,o[h+2+0]=o[h+3+64]=I+E+1>>1,o[h+3+0]=E+O+1>>1,o[h+0+96]=lt(x,b,p),o[h+0+64]=lt(b,p,A),o[h+0+32]=o[h+1+96]=lt(p,A,L),o[h+1+32]=o[h+2+96]=lt(A,L,I),o[h+2+32]=o[h+3+96]=lt(L,I,E),o[h+3+32]=lt(I,E,O)}function Da(o,h){var p=o[h+0-32],b=o[h+1-32],x=o[h+2-32],A=o[h+3-32],L=o[h+4-32],I=o[h+5-32],E=o[h+6-32],O=o[h+7-32];o[h+0+0]=p+b+1>>1,o[h+1+0]=o[h+0+64]=b+x+1>>1,o[h+2+0]=o[h+1+64]=x+A+1>>1,o[h+3+0]=o[h+2+64]=A+L+1>>1,o[h+0+32]=lt(p,b,x),o[h+1+32]=o[h+0+96]=lt(b,x,A),o[h+2+32]=o[h+1+96]=lt(x,A,L),o[h+3+32]=o[h+2+96]=lt(A,L,I),o[h+3+64]=lt(L,I,E),o[h+3+96]=lt(I,E,O)}function ac(o,h){var p=o[h-1+0],b=o[h-1+32],x=o[h-1+64],A=o[h-1+96];o[h+0+0]=p+b+1>>1,o[h+2+0]=o[h+0+32]=b+x+1>>1,o[h+2+32]=o[h+0+64]=x+A+1>>1,o[h+1+0]=lt(p,b,x),o[h+3+0]=o[h+1+32]=lt(b,x,A),o[h+3+32]=o[h+1+64]=lt(x,A,A),o[h+3+64]=o[h+2+64]=o[h+0+96]=o[h+1+96]=o[h+2+96]=o[h+3+96]=A}function oc(o,h){var p=o[h-1+0],b=o[h-1+32],x=o[h-1+64],A=o[h-1+96],L=o[h-1-32],I=o[h+0-32],E=o[h+1-32],O=o[h+2-32];o[h+0+0]=o[h+2+32]=p+L+1>>1,o[h+0+32]=o[h+2+64]=b+p+1>>1,o[h+0+64]=o[h+2+96]=x+b+1>>1,o[h+0+96]=A+x+1>>1,o[h+3+0]=lt(I,E,O),o[h+2+0]=lt(L,I,E),o[h+1+0]=o[h+3+32]=lt(p,L,I),o[h+1+32]=o[h+3+64]=lt(b,p,L),o[h+1+64]=o[h+3+96]=lt(x,b,p),o[h+1+96]=lt(A,x,b)}function lc(o,h){var p;for(p=0;8>p;++p)r(o,h+32*p,o,h-32,8)}function Ma(o,h){var p;for(p=0;8>p;++p)i(o,h,o[h-1],8),h+=32}function cs(o,h,p){var b;for(b=0;8>b;++b)i(h,p+32*b,o,8)}function ki(o,h){var p,b=8;for(p=0;8>p;++p)b+=o[h+p-32]+o[h-1+32*p];cs(b>>4,o,h)}function cc(o,h){var p,b=4;for(p=0;8>p;++p)b+=o[h+p-32];cs(b>>3,o,h)}function us(o,h){var p,b=4;for(p=0;8>p;++p)b+=o[h-1+32*p];cs(b>>3,o,h)}function Ba(o,h){cs(128,o,h)}function Hs(o,h,p){var b=o[h-p],x=o[h+0],A=3*(x-b)+gc[1020+o[h-2*p]-o[h+p]],L=Xo[112+(A+4>>3)];o[h-p]=vn[255+b+Xo[112+(A+3>>3)]],o[h+0]=vn[255+x-L]}function Uo(o,h,p,b){var x=o[h+0],A=o[h+p];return Ln[255+o[h-2*p]-o[h-p]]>b||Ln[255+A-x]>b}function $o(o,h,p,b){return 4*Ln[255+o[h-p]-o[h+0]]+Ln[255+o[h-2*p]-o[h+p]]<=b}function qo(o,h,p,b,x){var A=o[h-3*p],L=o[h-2*p],I=o[h-p],E=o[h+0],O=o[h+p],J=o[h+2*p],ce=o[h+3*p];return 4*Ln[255+I-E]+Ln[255+L-O]>b?0:Ln[255+o[h-4*p]-A]<=x&&Ln[255+A-L]<=x&&Ln[255+L-I]<=x&&Ln[255+ce-J]<=x&&Ln[255+J-O]<=x&&Ln[255+O-E]<=x}function zo(o,h,p,b){var x=2*b+1;for(b=0;16>b;++b)$o(o,h+b,p,x)&&Hs(o,h+b,p)}function Hn(o,h,p,b){var x=2*b+1;for(b=0;16>b;++b)$o(o,h+b*p,1,x)&&Hs(o,h+b*p,1)}function li(o,h,p,b){var x;for(x=3;0<x;--x)zo(o,h+=4*p,p,b)}function uc(o,h,p,b){var x;for(x=3;0<x;--x)Hn(o,h+=4,p,b)}function Li(o,h,p,b,x,A,L,I){for(A=2*A+1;0<x--;){if(qo(o,h,p,A,L))if(Uo(o,h,p,I))Hs(o,h,p);else{var E=o,O=h,J=p,ce=E[O-2*J],ue=E[O-J],re=E[O+0],je=E[O+J],ye=E[O+2*J],Y=27*(_e=gc[1020+3*(re-ue)+gc[1020+ce-je]])+63>>7,X=18*_e+63>>7,_e=9*_e+63>>7;E[O-3*J]=vn[255+E[O-3*J]+_e],E[O-2*J]=vn[255+ce+X],E[O-J]=vn[255+ue+Y],E[O+0]=vn[255+re-Y],E[O+J]=vn[255+je-X],E[O+2*J]=vn[255+ye-_e]}h+=b}}function Rn(o,h,p,b,x,A,L,I){for(A=2*A+1;0<x--;){if(qo(o,h,p,A,L))if(Uo(o,h,p,I))Hs(o,h,p);else{var E=o,O=h,J=p,ce=E[O-J],ue=E[O+0],re=E[O+J],je=Xo[112+((ye=3*(ue-ce))+4>>3)],ye=Xo[112+(ye+3>>3)],Y=je+1>>1;E[O-2*J]=vn[255+E[O-2*J]+Y],E[O-J]=vn[255+ce+ye],E[O+0]=vn[255+ue-je],E[O+J]=vn[255+re-Y]}h+=b}}function Ua(o,h,p,b,x,A){Li(o,h,p,1,16,b,x,A)}function hs(o,h,p,b,x,A){Li(o,h,1,p,16,b,x,A)}function hc(o,h,p,b,x,A){var L;for(L=3;0<L;--L)Rn(o,h+=4*p,p,1,16,b,x,A)}function Gs(o,h,p,b,x,A){var L;for(L=3;0<L;--L)Rn(o,h+=4,1,p,16,b,x,A)}function dc(o,h,p,b,x,A,L,I){Li(o,h,x,1,8,A,L,I),Li(p,b,x,1,8,A,L,I)}function $a(o,h,p,b,x,A,L,I){Li(o,h,1,x,8,A,L,I),Li(p,b,1,x,8,A,L,I)}function qa(o,h,p,b,x,A,L,I){Rn(o,h+4*x,x,1,8,A,L,I),Rn(p,b+4*x,x,1,8,A,L,I)}function Wo(o,h,p,b,x,A,L,I){Rn(o,h+4,1,x,8,A,L,I),Rn(p,b+4,1,x,8,A,L,I)}function Ks(){this.ba=new xr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Dt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function za(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Wa(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Vo(){this.ua=0,this.Wa=new $,this.vb=new $,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new U,this.yc=new T}function fc(){this.xb=this.a=0,this.l=new Ai,this.ca=new xr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new P,this.Pb=0,this.wd=new P,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Vo,this.ab=0,this.gc=a(4,Wa),this.Oc=0}function Js(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ai,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ds(o,h,p,b,x,A,L){for(o=o==null?0:o[h+0],h=0;h<L;++h)x[A+h]=o+p[b+h]&255,o=x[A+h]}function Va(o,h,p,b,x,A,L){var I;if(o==null)ds(null,null,p,b,x,A,L);else for(I=0;I<L;++I)x[A+I]=o[h+I]+p[b+I]&255}function Ci(o,h,p,b,x,A,L){if(o==null)ds(null,null,p,b,x,A,L);else{var I,E=o[h+0],O=E,J=E;for(I=0;I<L;++I)O=J+(E=o[h+I])-O,J=p[b+I]+(-256&O?0>O?0:255:O)&255,O=E,x[A+I]=J}}function Ha(o,h,p,b){var x=h.width,A=h.o;if(e(o!=null&&h!=null),0>p||0>=b||p+b>A)return null;if(!o.Cc){if(o.ga==null){var L;if(o.ga=new Js,(L=o.ga==null)||(L=h.width*h.o,e(o.Gb.length==0),o.Gb=s(L),o.Uc=0,o.Gb==null?L=0:(o.mb=o.Gb,o.nb=o.Uc,o.rc=null,L=1),L=!L),!L){L=o.ga;var I=o.Fa,E=o.P,O=o.qc,J=o.mb,ce=o.nb,ue=E+1,re=O-1,je=L.l;if(e(I!=null&&J!=null&&h!=null),Ri[0]=null,Ri[1]=ds,Ri[2]=Va,Ri[3]=Ci,L.ca=J,L.tb=ce,L.c=h.width,L.i=h.height,e(0<L.c&&0<L.i),1>=O)h=0;else if(L.$a=I[E+0]>>0&3,L.Z=I[E+0]>>2&3,L.Lc=I[E+0]>>4&3,E=I[E+0]>>6&3,0>L.$a||1<L.$a||4<=L.Z||1<L.Lc||E)h=0;else if(je.put=Xe,je.ac=We,je.bc=ft,je.ma=L,je.width=h.width,je.height=h.height,je.Da=h.Da,je.v=h.v,je.va=h.va,je.j=h.j,je.o=h.o,L.$a)e:{e(L.$a==1),h=Kr();t:for(;;){if(h==null){h=0;break e}if(e(L!=null),L.mc=h,h.c=L.c,h.i=L.i,h.l=L.l,h.l.ma=L,h.l.width=L.c,h.l.height=L.i,h.a=0,ie(h.m,I,ue,re),!pn(L.c,L.i,1,h,null)||(h.ab==1&&h.gc[0].hc==3&&_n(h.s)?(L.ic=1,I=h.c*h.i,h.Ta=null,h.Ua=0,h.V=s(I),h.Ba=0,h.V==null?(h.a=1,h=0):h=1):(L.ic=0,h=ai(h,L.c)),!h))break t;h=1;break e}L.mc=null,h=0}else h=re>=L.c*L.i;L=!h}if(L)return null;o.ga.Lc!=1?o.Ga=0:b=A-p}e(o.ga!=null),e(p+b<=A);e:{if(h=(I=o.ga).c,A=I.l.o,I.$a==0){if(ue=o.rc,re=o.Vc,je=o.Fa,E=o.P+1+p*h,O=o.mb,J=o.nb+p*h,e(E<=o.P+o.qc),I.Z!=0)for(e(Ri[I.Z]!=null),L=0;L<b;++L)Ri[I.Z](ue,re,je,E,O,J,h),ue=O,re=J,J+=h,E+=h;else for(L=0;L<b;++L)r(O,J,je,E,h),ue=O,re=J,J+=h,E+=h;o.rc=ue,o.Vc=re}else{if(e(I.mc!=null),h=p+b,e((L=I.mc)!=null),e(h<=L.i),L.C>=h)h=1;else if(I.ic||le(),I.ic){I=L.V,ue=L.Ba,re=L.c;var ye=L.i,Y=(je=1,E=L.$/re,O=L.$%re,J=L.m,ce=L.s,L.$),X=re*ye,_e=re*h,ke=ce.wc,Se=Y<_e?Wt(ce,O,E):null;e(Y<=X),e(h<=ye),e(_n(ce));t:for(;;){for(;!J.h&&Y<_e;){if(O&ke||(Se=Wt(ce,O,E)),e(Se!=null),Q(J),256>(ye=cr(Se.G[0],Se.H[0],J)))I[ue+Y]=ye,++Y,++O>=re&&(O=0,++E<=h&&!(E%16)&&en(L,E));else{if(!(280>ye)){je=0;break t}ye=Zt(ye-256,J);var qe,De=cr(Se.G[4],Se.H[4],J);if(Q(J),!(Y>=(De=jt(re,De=Zt(De,J)))&&X-Y>=ye)){je=0;break t}for(qe=0;qe<ye;++qe)I[ue+Y+qe]=I[ue+Y+qe-De];for(Y+=ye,O+=ye;O>=re;)O-=re,++E<=h&&!(E%16)&&en(L,E);Y<_e&&O&ke&&(Se=Wt(ce,O,E))}e(J.h==q(J))}en(L,E>h?h:E);break t}!je||J.h&&Y<X?(je=0,L.a=J.h?5:3):L.$=Y,h=je}else h=tn(L,L.V,L.Ba,L.c,L.i,h,_i);if(!h){b=0;break e}}p+b>=A&&(o.Cc=1),b=1}if(!b)return null;if(o.Cc&&((b=o.ga)!=null&&(b.mc=null),o.ga=null,0<o.Ga))return alert("todo:WebPDequantizeLevels"),null}return o.nb+p*x}function d(o,h,p,b,x,A){for(;0<x--;){var L,I=o,E=h+(p?1:0),O=o,J=h+(p?0:3);for(L=0;L<b;++L){var ce=O[J+4*L];ce!=255&&(ce*=32897,I[E+4*L+0]=I[E+4*L+0]*ce>>23,I[E+4*L+1]=I[E+4*L+1]*ce>>23,I[E+4*L+2]=I[E+4*L+2]*ce>>23)}h+=A}}function _(o,h,p,b,x){for(;0<b--;){var A;for(A=0;A<p;++A){var L=o[h+2*A+0],I=15&(O=o[h+2*A+1]),E=4369*I,O=(240&O|O>>4)*E>>16;o[h+2*A+0]=(240&L|L>>4)*E>>16&240|(15&L|L<<4)*E>>16>>4&15,o[h+2*A+1]=240&O|I}h+=x}}function B(o,h,p,b,x,A,L,I){var E,O,J=255;for(O=0;O<x;++O){for(E=0;E<b;++E){var ce=o[h+E];A[L+4*E]=ce,J&=ce}h+=p,L+=I}return J!=255}function K(o,h,p,b,x){var A;for(A=0;A<x;++A)p[b+A]=o[h+A]>>8}function le(){kn=d,Vt=_,Ht=B,hr=K}function we(o,h,p){M[o]=function(b,x,A,L,I,E,O,J,ce,ue,re,je,ye,Y,X,_e,ke){var Se,qe=ke-1>>1,De=I[E+0]|O[J+0]<<16,rt=ce[ue+0]|re[je+0]<<16;e(b!=null);var Be=3*De+rt+131074>>2;for(h(b[x+0],255&Be,Be>>16,ye,Y),A!=null&&(Be=3*rt+De+131074>>2,h(A[L+0],255&Be,Be>>16,X,_e)),Se=1;Se<=qe;++Se){var Et=I[E+Se]|O[J+Se]<<16,Ot=ce[ue+Se]|re[je+Se]<<16,Nt=De+Et+rt+Ot+524296,xt=Nt+2*(Et+rt)>>3;Be=xt+De>>1,De=(Nt=Nt+2*(De+Ot)>>3)+Et>>1,h(b[x+2*Se-1],255&Be,Be>>16,ye,Y+(2*Se-1)*p),h(b[x+2*Se-0],255&De,De>>16,ye,Y+(2*Se-0)*p),A!=null&&(Be=Nt+rt>>1,De=xt+Ot>>1,h(A[L+2*Se-1],255&Be,Be>>16,X,_e+(2*Se-1)*p),h(A[L+2*Se+0],255&De,De>>16,X,_e+(2*Se+0)*p)),De=Et,rt=Ot}1&ke||(Be=3*De+rt+131074>>2,h(b[x+ke-1],255&Be,Be>>16,ye,Y+(ke-1)*p),A!=null&&(Be=3*rt+De+131074>>2,h(A[L+ke-1],255&Be,Be>>16,X,_e+(ke-1)*p)))}}function Ce(){Cn[Qo]=A1,Cn[el]=Fh,Cn[Nh]=k1,Cn[tl]=Dh,Cn[rl]=Mh,Cn[mc]=Bh,Cn[Eh]=L1,Cn[vc]=Fh,Cn[bc]=Dh,Cn[nl]=Mh,Cn[yc]=Bh}function $e(o){return o&-16384?0>o?0:255:o>>C1}function et(o,h){return $e((19077*o>>8)+(26149*h>>8)-14234)}function pt(o,h,p){return $e((19077*o>>8)-(6419*h>>8)-(13320*p>>8)+8708)}function ut(o,h){return $e((19077*o>>8)+(33050*h>>8)-17685)}function kt(o,h,p,b,x){b[x+0]=et(o,p),b[x+1]=pt(o,h,p),b[x+2]=ut(o,h)}function er(o,h,p,b,x){b[x+0]=ut(o,h),b[x+1]=pt(o,h,p),b[x+2]=et(o,p)}function rr(o,h,p,b,x){var A=pt(o,h,p);h=A<<3&224|ut(o,h)>>3,b[x+0]=248&et(o,p)|A>>5,b[x+1]=h}function mr(o,h,p,b,x){var A=240&ut(o,h)|15;b[x+0]=240&et(o,p)|pt(o,h,p)>>4,b[x+1]=A}function Mr(o,h,p,b,x){b[x+0]=255,kt(o,h,p,b,x+1)}function Lr(o,h,p,b,x){er(o,h,p,b,x),b[x+3]=255}function On(o,h,p,b,x){kt(o,h,p,b,x),b[x+3]=255}function mn(o,h){return 0>o?0:o>h?h:o}function Gn(o,h,p){M[o]=function(b,x,A,L,I,E,O,J,ce){for(var ue=J+(-2&ce)*p;J!=ue;)h(b[x+0],A[L+0],I[E+0],O,J),h(b[x+1],A[L+0],I[E+0],O,J+p),x+=2,++L,++E,J+=2*p;1&ce&&h(b[x+0],A[L+0],I[E+0],O,J)}}function Ho(o,h,p){return p==0?o==0?h==0?6:5:h==0?4:0:p}function Ga(o,h,p,b,x){switch(o>>>30){case 3:hi(h,p,b,x,0);break;case 2:ur(h,p,b,x);break;case 1:Yr(h,p,b,x)}}function Ka(o,h){var p,b,x=h.M,A=h.Nb,L=o.oc,I=o.pc+40,E=o.oc,O=o.pc+584,J=o.oc,ce=o.pc+600;for(p=0;16>p;++p)L[I+32*p-1]=129;for(p=0;8>p;++p)E[O+32*p-1]=129,J[ce+32*p-1]=129;for(0<x?L[I-1-32]=E[O-1-32]=J[ce-1-32]=129:(i(L,I-32-1,127,21),i(E,O-32-1,127,9),i(J,ce-32-1,127,9)),b=0;b<o.za;++b){var ue=h.ya[h.aa+b];if(0<b){for(p=-1;16>p;++p)r(L,I+32*p-4,L,I+32*p+12,4);for(p=-1;8>p;++p)r(E,O+32*p-4,E,O+32*p+4,4),r(J,ce+32*p-4,J,ce+32*p+4,4)}var re=o.Gd,je=o.Hd+b,ye=ue.ad,Y=ue.Hc;if(0<x&&(r(L,I-32,re[je].y,0,16),r(E,O-32,re[je].f,0,8),r(J,ce-32,re[je].ea,0,8)),ue.Za){var X=L,_e=I-32+16;for(0<x&&(b>=o.za-1?i(X,_e,re[je].y[15],4):r(X,_e,re[je+1].y,0,4)),p=0;4>p;p++)X[_e+128+p]=X[_e+256+p]=X[_e+384+p]=X[_e+0+p];for(p=0;16>p;++p,Y<<=2)X=L,_e=I+$h[p],Fn[ue.Ob[p]](X,_e),Ga(Y,ye,16*+p,X,_e)}else if(X=Ho(b,x,ue.Ob[0]),Ti[X](L,I),Y!=0)for(p=0;16>p;++p,Y<<=2)Ga(Y,ye,16*+p,L,I+$h[p]);for(p=ue.Gc,X=Ho(b,x,ue.Dd),fi[X](E,O),fi[X](J,ce),Y=ye,X=E,_e=O,255&(ue=p>>0)&&(170&ue?Qa(Y,256,X,_e):jn(Y,256,X,_e)),ue=J,Y=ce,255&(p>>=8)&&(170&p?Qa(ye,320,ue,Y):jn(ye,320,ue,Y)),x<o.Ub-1&&(r(re[je].y,0,L,I+480,16),r(re[je].f,0,E,O+224,8),r(re[je].ea,0,J,ce+224,8)),p=8*A*o.B,re=o.sa,je=o.ta+16*b+16*A*o.R,ye=o.qa,ue=o.ra+8*b+p,Y=o.Ha,X=o.Ia+8*b+p,p=0;16>p;++p)r(re,je+p*o.R,L,I+32*p,16);for(p=0;8>p;++p)r(ye,ue+p*o.B,E,O+32*p,8),r(Y,X+p*o.B,J,ce+32*p,8)}}function Ys(o,h,p,b,x,A,L,I,E){var O=[0],J=[0],ce=0,ue=E!=null?E.kd:0,re=E??new za;if(o==null||12>p)return 7;re.data=o,re.w=h,re.ha=p,h=[h],p=[p],re.gb=[re.gb];e:{var je=h,ye=p,Y=re.gb;if(e(o!=null),e(ye!=null),e(Y!=null),Y[0]=0,12<=ye[0]&&!t(o,je[0],"RIFF")){if(t(o,je[0]+8,"WEBP")){Y=3;break e}var X=Ne(o,je[0]+4);if(12>X||4294967286<X){Y=3;break e}if(ue&&X>ye[0]-8){Y=7;break e}Y[0]=X,je[0]+=12,ye[0]-=12}Y=0}if(Y!=0)return Y;for(X=0<re.gb[0],p=p[0];;){e:{var _e=o;ye=h,Y=p;var ke=O,Se=J,qe=je=[0];if((Be=ce=[ce])[0]=0,8>Y[0])Y=7;else{if(!t(_e,ye[0],"VP8X")){if(Ne(_e,ye[0]+4)!=10){Y=3;break e}if(18>Y[0]){Y=7;break e}var De=Ne(_e,ye[0]+8),rt=1+Te(_e,ye[0]+12);if(2147483648<=rt*(_e=1+Te(_e,ye[0]+15))){Y=3;break e}qe!=null&&(qe[0]=De),ke!=null&&(ke[0]=rt),Se!=null&&(Se[0]=_e),ye[0]+=18,Y[0]-=18,Be[0]=1}Y=0}}if(ce=ce[0],je=je[0],Y!=0)return Y;if(ye=!!(2&je),!X&&ce)return 3;if(A!=null&&(A[0]=!!(16&je)),L!=null&&(L[0]=ye),I!=null&&(I[0]=0),L=O[0],je=J[0],ce&&ye&&E==null){Y=0;break}if(4>p){Y=7;break}if(X&&ce||!X&&!ce&&!t(o,h[0],"ALPH")){p=[p],re.na=[re.na],re.P=[re.P],re.Sa=[re.Sa];e:{De=o,Y=h,X=p;var Be=re.gb;ke=re.na,Se=re.P,qe=re.Sa,rt=22,e(De!=null),e(X!=null),_e=Y[0];var Et=X[0];for(e(ke!=null),e(qe!=null),ke[0]=null,Se[0]=null,qe[0]=0;;){if(Y[0]=_e,X[0]=Et,8>Et){Y=7;break e}var Ot=Ne(De,_e+4);if(4294967286<Ot){Y=3;break e}var Nt=8+Ot+1&-2;if(rt+=Nt,0<Be&&rt>Be){Y=3;break e}if(!t(De,_e,"VP8 ")||!t(De,_e,"VP8L")){Y=0;break e}if(Et[0]<Nt){Y=7;break e}t(De,_e,"ALPH")||(ke[0]=De,Se[0]=_e+8,qe[0]=Ot),_e+=Nt,Et-=Nt}}if(p=p[0],re.na=re.na[0],re.P=re.P[0],re.Sa=re.Sa[0],Y!=0)break}p=[p],re.Ja=[re.Ja],re.xa=[re.xa];e:if(Be=o,Y=h,X=p,ke=re.gb[0],Se=re.Ja,qe=re.xa,De=Y[0],_e=!t(Be,De,"VP8 "),rt=!t(Be,De,"VP8L"),e(Be!=null),e(X!=null),e(Se!=null),e(qe!=null),8>X[0])Y=7;else{if(_e||rt){if(Be=Ne(Be,De+4),12<=ke&&Be>ke-12){Y=3;break e}if(ue&&Be>X[0]-8){Y=7;break e}Se[0]=Be,Y[0]+=8,X[0]-=8,qe[0]=rt}else qe[0]=5<=X[0]&&Be[De+0]==47&&!(Be[De+4]>>5),Se[0]=X[0];Y=0}if(p=p[0],re.Ja=re.Ja[0],re.xa=re.xa[0],h=h[0],Y!=0)break;if(4294967286<re.Ja)return 3;if(I==null||ye||(I[0]=re.xa?2:1),L=[L],je=[je],re.xa){if(5>p){Y=7;break}I=L,ue=je,ye=A,o==null||5>p?o=0:5<=p&&o[h+0]==47&&!(o[h+4]>>5)?(X=[0],Be=[0],ke=[0],ie(Se=new P,o,h,p),Ue(Se,X,Be,ke)?(I!=null&&(I[0]=X[0]),ue!=null&&(ue[0]=Be[0]),ye!=null&&(ye[0]=ke[0]),o=1):o=0):o=0}else{if(10>p){Y=7;break}I=je,o==null||10>p||!Us(o,h+3,p-3)?o=0:(ue=o[h+0]|o[h+1]<<8|o[h+2]<<16,ye=16383&(o[h+7]<<8|o[h+6]),o=16383&(o[h+9]<<8|o[h+8]),1&ue||3<(ue>>1&7)||!(ue>>4&1)||ue>>5>=re.Ja||!ye||!o?o=0:(L&&(L[0]=ye),I&&(I[0]=o),o=1))}if(!o||(L=L[0],je=je[0],ce&&(O[0]!=L||J[0]!=je)))return 3;E!=null&&(E[0]=re,E.offset=h-E.w,e(4294967286>h-E.w),e(E.offset==E.ha-p));break}return Y==0||Y==7&&ce&&E==null?(A!=null&&(A[0]|=re.na!=null&&0<re.na.length),b!=null&&(b[0]=L),x!=null&&(x[0]=je),0):Y}function Ja(o,h,p){var b=h.width,x=h.height,A=0,L=0,I=b,E=x;if(h.Da=o!=null&&0<o.Da,h.Da&&(I=o.cd,E=o.bd,A=o.v,L=o.j,11>p||(A&=-2,L&=-2),0>A||0>L||0>=I||0>=E||A+I>b||L+E>x))return 0;if(h.v=A,h.j=L,h.va=A+I,h.o=L+E,h.U=I,h.T=E,h.da=o!=null&&0<o.da,h.da){if(!nt(I,E,p=[o.ib],A=[o.hb]))return 0;h.ib=p[0],h.hb=A[0]}return h.ob=o!=null&&o.ob,h.Kb=o==null||!o.Sd,h.da&&(h.ob=h.ib<3*b/4&&h.hb<3*x/4,h.Kb=0),1}function Ya(o){if(o==null)return 2;if(11>o.S){var h=o.f.RGBA;h.fb+=(o.height-1)*h.A,h.A=-h.A}else h=o.f.kb,o=o.height,h.O+=(o-1)*h.fa,h.fa=-h.fa,h.N+=(o-1>>1)*h.Ab,h.Ab=-h.Ab,h.W+=(o-1>>1)*h.Db,h.Db=-h.Db,h.F!=null&&(h.J+=(o-1)*h.lb,h.lb=-h.lb);return 0}function Zs(o,h,p,b){if(b==null||0>=o||0>=h)return 2;if(p!=null){if(p.Da){var x=p.cd,A=p.bd,L=-2&p.v,I=-2&p.j;if(0>L||0>I||0>=x||0>=A||L+x>o||I+A>h)return 2;o=x,h=A}if(p.da){if(!nt(o,h,x=[p.ib],A=[p.hb]))return 2;o=x[0],h=A[0]}}b.width=o,b.height=h;e:{var E=b.width,O=b.height;if(o=b.S,0>=E||0>=O||!(o>=Qo&&13>o))o=2;else{if(0>=b.Rd&&b.sd==null){L=A=x=h=0;var J=(I=E*qh[o])*O;if(11>o||(A=(O+1)/2*(h=(E+1)/2),o==12&&(L=(x=E)*O)),(O=s(J+2*A+L))==null){o=1;break e}b.sd=O,11>o?((E=b.f.RGBA).eb=O,E.fb=0,E.A=I,E.size=J):((E=b.f.kb).y=O,E.O=0,E.fa=I,E.Fd=J,E.f=O,E.N=0+J,E.Ab=h,E.Cd=A,E.ea=O,E.W=0+J+A,E.Db=h,E.Ed=A,o==12&&(E.F=O,E.J=0+J+2*A),E.Tc=L,E.lb=x)}if(h=1,x=b.S,A=b.width,L=b.height,x>=Qo&&13>x)if(11>x)o=b.f.RGBA,h&=(I=Math.abs(o.A))*(L-1)+A<=o.size,h&=I>=A*qh[x],h&=o.eb!=null;else{o=b.f.kb,I=(A+1)/2,J=(L+1)/2,E=Math.abs(o.fa),O=Math.abs(o.Ab);var ce=Math.abs(o.Db),ue=Math.abs(o.lb),re=ue*(L-1)+A;h&=E*(L-1)+A<=o.Fd,h&=O*(J-1)+I<=o.Cd,h=(h&=ce*(J-1)+I<=o.Ed)&E>=A&O>=I&ce>=I,h&=o.y!=null,h&=o.f!=null,h&=o.ea!=null,x==12&&(h&=ue>=A,h&=re<=o.Tc,h&=o.F!=null)}else h=0;o=h?0:2}}return o!=0||p!=null&&p.fd&&(o=Ya(b)),o}var Tr=64,Xs=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Qs=24,ea=32,Za=8,sn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ie("Predictor0","PredictorAdd0"),M.Predictor0=function(){return 4278190080},M.Predictor1=function(o){return o},M.Predictor2=function(o,h,p){return h[p+0]},M.Predictor3=function(o,h,p){return h[p+1]},M.Predictor4=function(o,h,p){return h[p-1]},M.Predictor5=function(o,h,p){return Re(Re(o,h[p+1]),h[p+0])},M.Predictor6=function(o,h,p){return Re(o,h[p-1])},M.Predictor7=function(o,h,p){return Re(o,h[p+0])},M.Predictor8=function(o,h,p){return Re(h[p-1],h[p+0])},M.Predictor9=function(o,h,p){return Re(h[p+0],h[p+1])},M.Predictor10=function(o,h,p){return Re(Re(o,h[p-1]),Re(h[p+0],h[p+1]))},M.Predictor11=function(o,h,p){var b=h[p+0];return 0>=ot(b>>24&255,o>>24&255,(h=h[p-1])>>24&255)+ot(b>>16&255,o>>16&255,h>>16&255)+ot(b>>8&255,o>>8&255,h>>8&255)+ot(255&b,255&o,255&h)?b:o},M.Predictor12=function(o,h,p){var b=h[p+0];return(Ge((o>>24&255)+(b>>24&255)-((h=h[p-1])>>24&255))<<24|Ge((o>>16&255)+(b>>16&255)-(h>>16&255))<<16|Ge((o>>8&255)+(b>>8&255)-(h>>8&255))<<8|Ge((255&o)+(255&b)-(255&h)))>>>0},M.Predictor13=function(o,h,p){var b=h[p-1];return(Oe((o=Re(o,h[p+0]))>>24&255,b>>24&255)<<24|Oe(o>>16&255,b>>16&255)<<16|Oe(o>>8&255,b>>8&255)<<8|Oe(o>>0&255,b>>0&255))>>>0};var pc=M.PredictorAdd0;M.PredictorAdd1=ct,Ie("Predictor2","PredictorAdd2"),Ie("Predictor3","PredictorAdd3"),Ie("Predictor4","PredictorAdd4"),Ie("Predictor5","PredictorAdd5"),Ie("Predictor6","PredictorAdd6"),Ie("Predictor7","PredictorAdd7"),Ie("Predictor8","PredictorAdd8"),Ie("Predictor9","PredictorAdd9"),Ie("Predictor10","PredictorAdd10"),Ie("Predictor11","PredictorAdd11"),Ie("Predictor12","PredictorAdd12"),Ie("Predictor13","PredictorAdd13");var Xa=M.PredictorAdd2;dt("ColorIndexInverseTransform","MapARGB","32b",function(o){return o>>8&255},function(o){return o}),dt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(o){return o},function(o){return o>>8&255});var Go,Sn=M.ColorIndexInverseTransform,ta=M.MapARGB,Ko=M.VP8LColorIndexInverseTransformAlpha,Jo=M.MapAlpha,Pi=M.VP8LPredictorsAdd=[];Pi.length=16,(M.VP8LPredictors=[]).length=16,(M.VP8LPredictorsAdd_C=[]).length=16,(M.VP8LPredictors_C=[]).length=16;var fs,an,Jr,Ii,ci,ui,ra,hi,ur,Qa,Yr,jn,na,Yo,eo,ps,gs,Ni,ms,ia,vs,Ei,to,An,kn,Vt,Ht,hr,Sr=s(511),di=s(2041),ro=s(225),sa=s(767),Zo=0,gc=di,Xo=ro,vn=sa,Ln=Sr,Qo=0,el=1,Nh=2,tl=3,rl=4,mc=5,Eh=6,vc=7,bc=8,nl=9,yc=10,h1=[2,3,7],d1=[3,3,11],Th=[280,256,256,256,40],f1=[0,1,1,1,0],p1=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],g1=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],m1=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],v1=8,wc=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],xc=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],no=null,b1=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],y1=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Rh=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],w1=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],x1=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],_1=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],S1=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ti=[],Fn=[],fi=[],j1=1,Oh=2,Ri=[],Cn=[];we("UpsampleRgbLinePair",kt,3),we("UpsampleBgrLinePair",er,3),we("UpsampleRgbaLinePair",On,4),we("UpsampleBgraLinePair",Lr,4),we("UpsampleArgbLinePair",Mr,4),we("UpsampleRgba4444LinePair",mr,2),we("UpsampleRgb565LinePair",rr,2);var A1=M.UpsampleRgbLinePair,k1=M.UpsampleBgrLinePair,Fh=M.UpsampleRgbaLinePair,Dh=M.UpsampleBgraLinePair,Mh=M.UpsampleArgbLinePair,Bh=M.UpsampleRgba4444LinePair,L1=M.UpsampleRgb565LinePair,il=16,sl=1<<il-1,io=-227,_c=482,C1=6,Uh=0,P1=s(256),I1=s(256),N1=s(256),E1=s(256),T1=s(_c-io),R1=s(_c-io);Gn("YuvToRgbRow",kt,3),Gn("YuvToBgrRow",er,3),Gn("YuvToRgbaRow",On,4),Gn("YuvToBgraRow",Lr,4),Gn("YuvToArgbRow",Mr,4),Gn("YuvToRgba4444Row",mr,2),Gn("YuvToRgb565Row",rr,2);var $h=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],al=[0,2,8],O1=[8,7,6,4,4,2,2,2,1,1,1,1],F1=1;this.WebPDecodeRGBA=function(o,h,p,b,x){var A=el,L=new Ks,I=new xr;L.ba=I,I.S=A,I.width=[I.width],I.height=[I.height];var E=I.width,O=I.height,J=new Fr;if(J==null||o==null)var ce=2;else e(J!=null),ce=Ys(o,h,p,J.width,J.height,J.Pd,J.Qd,J.format,null);if(ce!=0?E=0:(E!=null&&(E[0]=J.width[0]),O!=null&&(O[0]=J.height[0]),E=1),E){I.width=I.width[0],I.height=I.height[0],b!=null&&(b[0]=I.width),x!=null&&(x[0]=I.height);e:{if(b=new Ai,(x=new za).data=o,x.w=h,x.ha=p,x.kd=1,h=[0],e(x!=null),((o=Ys(x.data,x.w,x.ha,null,null,null,h,null,x))==0||o==7)&&h[0]&&(o=4),(h=o)==0){if(e(L!=null),b.data=x.data,b.w=x.w+x.offset,b.ha=x.ha-x.offset,b.put=Xe,b.ac=We,b.bc=ft,b.ma=L,x.xa){if((o=Kr())==null){L=1;break e}if(function(ue,re){var je=[0],ye=[0],Y=[0];t:for(;;){if(ue==null)return 0;if(re==null)return ue.a=2,0;if(ue.l=re,ue.a=0,ie(ue.m,re.data,re.w,re.ha),!Ue(ue.m,je,ye,Y)){ue.a=3;break t}if(ue.xb=Oh,re.width=je[0],re.height=ye[0],!pn(je[0],ye[0],1,ue,null))break t;return 1}return e(ue.a!=0),0}(o,b)){if(b=(h=Zs(b.width,b.height,L.Oa,L.ba))==0){t:{b=o;r:for(;;){if(b==null){b=0;break t}if(e(b.s.yc!=null),e(b.s.Ya!=null),e(0<b.s.Wb),e((p=b.l)!=null),e((x=p.ma)!=null),b.xb!=0){if(b.ca=x.ba,b.tb=x.tb,e(b.ca!=null),!Ja(x.Oa,p,tl)){b.a=2;break r}if(!ai(b,p.width)||p.da)break r;if((p.da||_t(b.ca.S))&&le(),11>b.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),b.ca.f.kb.F!=null&&le()),b.Pb&&0<b.s.ua&&b.s.vb.X==null&&!Ye(b.s.vb,b.s.Wa.Xa)){b.a=1;break r}b.xb=0}if(!tn(b,b.V,b.Ba,b.c,b.i,p.o,si))break r;x.Dc=b.Ma,b=1;break t}e(b.a!=0),b=0}b=!b}b&&(h=o.a)}else h=o.a}else{if((o=new Oa)==null){L=1;break e}if(o.Fa=x.na,o.P=x.P,o.qc=x.Sa,as(o,b)){if((h=Zs(b.width,b.height,L.Oa,L.ba))==0){if(o.Aa=0,p=L.Oa,e((x=o)!=null),p!=null){if(0<(E=0>(E=p.Md)?0:100<E?255:255*E/100)){for(O=J=0;4>O;++O)12>(ce=x.pb[O]).lc&&(ce.ia=E*O1[0>ce.lc?0:ce.lc]>>3),J|=ce.ia;J&&(alert("todo:VP8InitRandom"),x.ia=1)}x.Ga=p.Id,100<x.Ga?x.Ga=100:0>x.Ga&&(x.Ga=0)}qs(o,b)||(h=o.a)}}else h=o.a}h==0&&L.Oa!=null&&L.Oa.fd&&(h=Ya(L.ba))}L=h}A=L!=0?null:11>A?I.f.RGBA.eb:I.f.kb.y}else A=null;return A};var qh=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function f(M,z){for(var W="",N=0;N<4;N++)W+=String.fromCharCode(M[z++]);return W}function g(M,z){return(M[z+0]<<0|M[z+1]<<8|M[z+2]<<16)>>>0}function m(M,z){return(M[z+0]<<0|M[z+1]<<8|M[z+2]<<16|M[z+3]<<24)>>>0}new l;var y=[0],v=[0],k=[],S=new l,j=n,w=function(M,z){var W={},N=0,T=!1,V=0,U=0;if(W.frames=[],!function(D,q,H,Q){for(var he=0;he<Q;he++)if(D[q+he]!=H.charCodeAt(he))return!0;return!1}(M,z,"RIFF",4)){for(m(M,z+=4),z+=8;z<M.length;){var ne=f(M,z),se=m(M,z+=4);z+=4;var de=se+(1&se);switch(ne){case"VP8 ":case"VP8L":W.frames[N]===void 0&&(W.frames[N]={}),(ve=W.frames[N]).src_off=T?U:z-8,ve.src_size=V+se+8,N++,T&&(T=!1,V=0,U=0);break;case"VP8X":(ve=W.header={}).feature_flags=M[z];var ie=z+4;ve.canvas_width=1+g(M,ie),ie+=3,ve.canvas_height=1+g(M,ie),ie+=3;break;case"ALPH":T=!0,V=de+8,U=z-8;break;case"ANIM":(ve=W.header).bgcolor=m(M,z),ie=z+4,ve.loop_count=(Fe=M)[(P=ie)+0]<<0|Fe[P+1]<<8,ie+=2;break;case"ANMF":var fe,ve;(ve=W.frames[N]={}).offset_x=2*g(M,z),z+=3,ve.offset_y=2*g(M,z),z+=3,ve.width=1+g(M,z),z+=3,ve.height=1+g(M,z),z+=3,ve.duration=g(M,z),z+=3,fe=M[z++],ve.dispose=1&fe,ve.blend=fe>>1&1}ne!="ANMF"&&(z+=de)}var Fe,P;return W}}(j,0);w.response=j,w.rgbaoutput=!0,w.dataurl=!1;var C=w.header?w.header:null,F=w.frames?w.frames:null;if(C){C.loop_counter=C.loop_count,y=[C.canvas_height],v=[C.canvas_width];for(var Z=0;Z<F.length&&F[Z].blend!=0;Z++);}var ae=F[0],te=S.WebPDecodeRGBA(j,ae.src_off,ae.src_size,v,y);ae.rgba=te,ae.imgwidth=v[0],ae.imgheight=y[0];for(var G=0;G<v[0]*y[0]*4;G++)k[G]=te[G];return this.width=v,this.height=y,this.data=k,this}(function(n){var e=function(){return typeof wu=="function"},t=function(y,v,k,S){var j=4,w=a;switch(S){case n.image_compression.FAST:j=1,w=s;break;case n.image_compression.MEDIUM:j=6,w=c;break;case n.image_compression.SLOW:j=9,w=l}y=r(y,v,k,w);var C=wu(y,{level:j});return n.__addimage__.arrayBufferToBinaryString(C)},r=function(y,v,k,S){for(var j,w,C,F=y.length/v,Z=new Uint8Array(y.length+F),ae=g(),te=0;te<F;te+=1){if(C=te*v,j=y.subarray(C,C+v),S)Z.set(S(j,k,w),C+te);else{for(var G,M=ae.length,z=[];G<M;G+=1)z[G]=ae[G](j,k,w);var W=m(z.concat());Z.set(z[W],C+te)}w=j}return Z},i=function(y){var v=Array.apply([],y);return v.unshift(0),v},s=function(y,v){var k,S=[],j=y.length;S[0]=1;for(var w=0;w<j;w+=1)k=y[w-v]||0,S[w+1]=y[w]-k+256&255;return S},a=function(y,v,k){var S,j=[],w=y.length;j[0]=2;for(var C=0;C<w;C+=1)S=k&&k[C]||0,j[C+1]=y[C]-S+256&255;return j},c=function(y,v,k){var S,j,w=[],C=y.length;w[0]=3;for(var F=0;F<C;F+=1)S=y[F-v]||0,j=k&&k[F]||0,w[F+1]=y[F]+256-(S+j>>>1)&255;return w},l=function(y,v,k){var S,j,w,C,F=[],Z=y.length;F[0]=4;for(var ae=0;ae<Z;ae+=1)S=y[ae-v]||0,j=k&&k[ae]||0,w=k&&k[ae-v]||0,C=f(S,j,w),F[ae+1]=y[ae]-C+256&255;return F},f=function(y,v,k){if(y===v&&v===k)return y;var S=Math.abs(v-k),j=Math.abs(y-k),w=Math.abs(y+v-k-k);return S<=j&&S<=w?y:j<=w?v:k},g=function(){return[i,s,a,c,l]},m=function(y){var v=y.map(function(k){return k.reduce(function(S,j){return S+Math.abs(j)},0)});return v.indexOf(Math.min.apply(null,v))};n.processPNG=function(y,v,k,S){var j,w,C,F,Z,ae,te,G,M,z,W,N,T,V,U,ne=this.decode.FLATE_DECODE,se="";if(this.__addimage__.isArrayBuffer(y)&&(y=new Uint8Array(y)),this.__addimage__.isArrayBufferView(y)){if(y=(C=new Rb(y)).imgData,w=C.bits,j=C.colorSpace,Z=C.colors,[4,6].indexOf(C.colorType)!==-1){if(C.bits===8){M=(G=C.pixelBitlength==32?new Uint32Array(C.decodePixels().buffer):C.pixelBitlength==16?new Uint16Array(C.decodePixels().buffer):new Uint8Array(C.decodePixels().buffer)).length,W=new Uint8Array(M*C.colors),z=new Uint8Array(M);var de,ie=C.pixelBitlength-C.bits;for(V=0,U=0;V<M;V++){for(T=G[V],de=0;de<ie;)W[U++]=T>>>de&255,de+=C.bits;z[V]=T>>>de&255}}if(C.bits===16){M=(G=new Uint32Array(C.decodePixels().buffer)).length,W=new Uint8Array(M*(32/C.pixelBitlength)*C.colors),z=new Uint8Array(M*(32/C.pixelBitlength)),N=C.colors>1,V=0,U=0;for(var fe=0;V<M;)T=G[V++],W[U++]=T>>>0&255,N&&(W[U++]=T>>>16&255,T=G[V++],W[U++]=T>>>0&255),z[fe++]=T>>>16&255;w=8}S!==n.image_compression.NONE&&e()?(y=t(W,C.width*C.colors,C.colors,S),te=t(z,C.width,1,S)):(y=W,te=z,ne=void 0)}if(C.colorType===3&&(j=this.color_spaces.INDEXED,ae=C.palette,C.transparency.indexed)){var ve=C.transparency.indexed,Fe=0;for(V=0,M=ve.length;V<M;++V)Fe+=ve[V];if((Fe/=255)===M-1&&ve.indexOf(0)!==-1)F=[ve.indexOf(0)];else if(Fe!==M){for(G=C.decodePixels(),z=new Uint8Array(G.length),V=0,M=G.length;V<M;V++)z[V]=ve[G[V]];te=t(z,C.width,1)}}var P=function(D){var q;switch(D){case n.image_compression.FAST:q=11;break;case n.image_compression.MEDIUM:q=13;break;case n.image_compression.SLOW:q=14;break;default:q=12}return q}(S);return ne===this.decode.FLATE_DECODE&&(se="/Predictor "+P+" "),se+="/Colors "+Z+" /BitsPerComponent "+w+" /Columns "+C.width,(this.__addimage__.isArrayBuffer(y)||this.__addimage__.isArrayBufferView(y))&&(y=this.__addimage__.arrayBufferToBinaryString(y)),(te&&this.__addimage__.isArrayBuffer(te)||this.__addimage__.isArrayBufferView(te))&&(te=this.__addimage__.arrayBufferToBinaryString(te)),{alias:k,data:y,index:v,filter:ne,decodeParameters:se,transparency:F,palette:ae,sMask:te,predictor:P,width:C.width,height:C.height,bitsPerComponent:w,colorSpace:j}}}})(it.API),function(n){n.processGIF89A=function(e,t,r,i){var s=new Ob(e),a=s.width,c=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var f={data:l,width:a,height:c},g=new Zc(100).encode(f,100);return n.processJPEG.call(this,g,t,r,i)},n.processGIF87A=n.processGIF89A}(it.API),Bn.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Bn.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){$t.log("bit decode error:"+t)}},Bn.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*i*4,c=0;c<8&&8*i+c<this.width;c++){var l=this.palette[s>>7-c&1];this.data[a+4*c]=l.blue,this.data[a+4*c+1]=l.green,this.data[a+4*c+2]=l.red,this.data[a+4*c+3]=255}t!==0&&(this.pos+=4-t)}},Bn.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*i*4,c=s>>4,l=15&s,f=this.palette[c];if(this.data[a]=f.blue,this.data[a+1]=f.green,this.data[a+2]=f.red,this.data[a+3]=255,2*i+1>=this.width)break;f=this.palette[l],this.data[a+4]=f.blue,this.data[a+4+1]=f.green,this.data[a+4+2]=f.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},Bn.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;if(i<this.palette.length){var a=this.palette[i];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}n!==0&&(this.pos+=4-n)}},Bn.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,c=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,f=s>>15?255:0,g=r*this.width*4+4*i;this.data[g]=l,this.data[g+1]=c,this.data[g+2]=a,this.data[g+3]=f}this.pos+=n}},Bn.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(a&e)/e*255|0,l=(a>>5&t)/t*255|0,f=(a>>11)/e*255|0,g=i*this.width*4+4*s;this.data[g]=f,this.data[g+1]=l,this.data[g+2]=c,this.data[g+3]=255}this.pos+=n}},Bn.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},Bn.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*t;this.data[c]=s,this.data[c+1]=i,this.data[c+2]=r,this.data[c+3]=a}},Bn.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,r,i){var s=new Bn(e,!1),a=s.width,c=s.height,l={data:s.getData(),width:a,height:c},f=new Zc(100).encode(l,100);return n.processJPEG.call(this,f,t,r,i)}}(it.API),ff.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,r,i){var s=new ff(e),a=s.width,c=s.height,l={data:s.getData(),width:a,height:c},f=new Zc(100).encode(l,100);return n.processJPEG.call(this,f,t,r,i)}}(it.API),it.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,s=new Uint8Array(i/4*3),a=new Uint8Array(i/4),c=0,l=0,f=0;f<i;f+=4){var g=r[f],m=r[f+1],y=r[f+2],v=r[f+3];s[c++]=g,s[c++]=m,s[c++]=y,a[l++]=v}var k=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:k,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},it.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},va=it.API,kl=va.getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),c=e.widths?e.widths:i.metadata.Unicode.widths,l=c.fof?c.fof:1,f=e.kerning?e.kerning:i.metadata.Unicode.kerning,g=f.fof?f.fof:1,m=e.doKerning!==!1,y=0,v=n.length,k=0,S=c[0]||l,j=[];for(t=0;t<v;t++)r=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?j.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+a*(1e3/s)||0)/1e3):(y=m&&qt(f[r])==="object"&&!isNaN(parseInt(f[r][k],10))?f[r][k]/g:0,j.push((c[r]||S)/l+y)),k=r;return j},cf=va.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return va.processArabic&&(n=va.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,i)/t:kl.apply(this,arguments).reduce(function(s,a){return s+a},0)},uf=function(n,e,t,r){for(var i=[],s=0,a=n.length,c=0;s!==a&&c+e[s]<t;)c+=e[s],s++;i.push(n.slice(0,s));var l=s;for(c=0;s!==a;)c+e[s]>r&&(i.push(n.slice(l,s)),c=0,l=s),c+=e[s],s++;return l!==s&&i.push(n.slice(l,s)),i},hf=function(n,e,t){t||(t={});var r,i,s,a,c,l,f,g=[],m=[g],y=t.textIndent||0,v=0,k=0,S=n.split(" "),j=kl.apply(this,[" ",t])[0];if(l=t.lineIndent===-1?S[0].length+2:t.lineIndent||0){var w=Array(l).join(" "),C=[];S.map(function(Z){(Z=Z.split(/\s*\n/)).length>1?C=C.concat(Z.map(function(ae,te){return(te&&ae.length?`
`:"")+ae})):C.push(Z[0])}),S=C,l=cf.apply(this,[w,t])}for(s=0,a=S.length;s<a;s++){var F=0;if(r=S[s],l&&r[0]==`
`&&(r=r.substr(1),F=1),y+v+(k=(i=kl.apply(this,[r,t])).reduce(function(Z,ae){return Z+ae},0))>e||F){if(k>e){for(c=uf.apply(this,[r,i,e-(y+v),e]),g.push(c.shift()),g=[c.pop()];c.length;)m.push([c.shift()]);k=i.slice(r.length-(g[0]?g[0].length:0)).reduce(function(Z,ae){return Z+ae},0)}else g=[r];m.push(g),y=k+l,v=j}else g.push(r),y+=v+k,v=j}return f=l?function(Z,ae){return(ae?w:"")+Z.join(" ")}:function(Z){return Z.join(" ")},m.map(f)},va.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),s=(function(g){if(g.widths&&g.kerning)return{widths:g.widths,kerning:g.kerning};var m=this.internal.getFont(g.fontName,g.fontStyle);return m.metadata.Unicode?{widths:m.metadata.Unicode.widths||{0:1},kerning:m.metadata.Unicode.kerning||{}}:{font:m.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/i;s.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=t.lineIndent;var c,l,f=[];for(c=0,l=r.length;c<l;c++)f=f.concat(hf.apply(this,[r[c],a,s]));return f},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},r={},i=0;i<e.length;i++)t[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(m){return"0x"+parseInt(m,10).toString(16)},a=n.__fontmetrics__.compress=function(m){var y,v,k,S,j=["{"];for(var w in m){if(y=m[w],isNaN(parseInt(w,10))?v="'"+w+"'":(w=parseInt(w,10),v=(v=s(w).slice(2)).slice(0,-1)+r[v.slice(-1)]),typeof y=="number")y<0?(k=s(y).slice(3),S="-"):(k=s(y).slice(2),S=""),k=S+k.slice(0,-1)+r[k.slice(-1)];else{if(qt(y)!=="object")throw new Error("Don't know what to do with value type "+qt(y)+".");k=a(y)}j.push(v+k)}return j.push("}"),j.join("")},c=n.__fontmetrics__.uncompress=function(m){if(typeof m!="string")throw new Error("Invalid argument passed to uncompress.");for(var y,v,k,S,j={},w=1,C=j,F=[],Z="",ae="",te=m.length-1,G=1;G<te;G+=1)(S=m[G])=="'"?y?(k=y.join(""),y=void 0):y=[]:y?y.push(S):S=="{"?(F.push([C,k]),C={},k=void 0):S=="}"?((v=F.pop())[0][v[1]]=C,k=void 0,C=v[0]):S=="-"?w=-1:k===void 0?t.hasOwnProperty(S)?(Z+=t[S],k=parseInt(Z,16)*w,w=1,Z=""):Z+=S:t.hasOwnProperty(S)?(ae+=t[S],C[k]=parseInt(ae,16)*w,w=1,k=void 0,ae=""):ae+=S;return j},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},f={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},g={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(m){var y=m.font,v=g.Unicode[y.postScriptName];v&&(y.metadata.Unicode={},y.metadata.Unicode.widths=v.widths,y.metadata.Unicode.kerning=v.kerning);var k=f.Unicode[y.postScriptName];k&&(y.metadata.Unicode.encoding=k,y.encoding=k.codePages[0])}])}(it.API),function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=t.charCodeAt(s);return i};n.API.events.push(["addFont",function(t){var r=void 0,i=t.font,s=t.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(a,c){c=/^\x00\x01\x00\x00/.test(c)?e(c):e(_o(c)),a.metadata=n.API.TTFFont.open(c),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(i,r)}}])}(it),function(n){function e(){return(at.canvg?Promise.resolve(at.canvg):Yi(()=>import("./index.es-CDvsivs4.js"),__vite__mapDeps([0,1,2]))).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}it.API.addSvgAsImage=function(t,r,i,s,a,c,l,f){if(isNaN(r)||isNaN(i))throw $t.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw $t.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var g=document.createElement("canvas");g.width=s,g.height=a;var m=g.getContext("2d");m.fillStyle="#fff",m.fillRect(0,0,g.width,g.height);var y={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},v=this;return e().then(function(k){return k.fromString(m,t,y)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(k){return k.render(y)}).then(function(){v.addImage(g.toDataURL("image/jpeg",1),r,i,s,a,l,f)})}}(),it.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},it.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},c=Object.keys(a),l=[],f=0,g=0,m=0;function y(k,S){var j,w=!1;for(j=0;j<k.length;j+=1)k[j]===S&&(w=!0);return w}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var v=c.length;for(m=0;m<v;m+=1)t[c[m]].value=t[c[m]].defaultValue,t[c[m]].explicitSet=!1}if(qt(n)==="object"){for(i in n)if(s=n[i],y(c,i)&&s!==void 0){if(t[i].type==="boolean"&&typeof s=="boolean")t[i].value=s;else if(t[i].type==="name"&&y(t[i].valueSet,s))t[i].value=s;else if(t[i].type==="integer"&&Number.isInteger(s))t[i].value=s;else if(t[i].type==="array"){for(f=0;f<s.length;f+=1)if(r=!0,s[f].length===1&&typeof s[f][0]=="number")l.push(String(s[f]-1));else if(s[f].length>1){for(g=0;g<s[f].length;g+=1)typeof s[f][g]!="number"&&(r=!1);r===!0&&l.push([s[f][0]-1,s[f][1]-1].join(" "))}t[i].value="["+l.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var k,S=[];for(k in t)t[k].explicitSet===!0&&(t[k].type==="name"?S.push("/"+k+" /"+t[k].value):S.push("/"+k+" "+t[k].value));S.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+S.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),c=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),f=s.length+a.length+c.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+f+" >>"),this.internal.write("stream"),this.internal.write(i+s+a+c+l),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(it.API),function(n){var e=n.API,t=e.pdfEscape16=function(s,a){for(var c,l=a.metadata.Unicode.widths,f=["","0","00","000","0000"],g=[""],m=0,y=s.length;m<y;++m){if(c=a.metadata.characterToGlyph(s.charCodeAt(m)),a.metadata.glyIdsUsed.push(c),a.metadata.toUnicode[c]=s.charCodeAt(m),l.indexOf(c)==-1&&(l.push(c),l.push([parseInt(a.metadata.widthOfGlyph(c),10)])),c=="0")return g.join("");c=c.toString(16),g.push(f[4-c.length],c)}return g.join("")},r=function(s){var a,c,l,f,g,m,y;for(g=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],m=0,y=(c=Object.keys(s).sort(function(v,k){return v-k})).length;m<y;m++)a=c[m],l.length>=100&&(g+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[a]!==void 0&&s[a]!==null&&typeof s[a].toString=="function"&&(f=("0000"+s[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),l.push("<"+a+"><"+f+">"));return l.length&&(g+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),g+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(a){var c=a.font,l=a.out,f=a.newObject,g=a.putStream;if(c.metadata instanceof n.API.TTFFont&&c.encoding==="Identity-H"){for(var m=c.metadata.Unicode.widths,y=c.metadata.subset.encode(c.metadata.glyIdsUsed,1),v="",k=0;k<y.length;k++)v+=String.fromCharCode(y[k]);var S=f();g({data:v,addLength1:!0,objectId:S}),l("endobj");var j=f();g({data:r(c.metadata.toUnicode),addLength1:!0,objectId:j}),l("endobj");var w=f();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+_a(c.fontName)),l("/FontFile2 "+S+" 0 R"),l("/FontBBox "+n.API.PDFObject.convert(c.metadata.bbox)),l("/Flags "+c.metadata.flags),l("/StemV "+c.metadata.stemV),l("/ItalicAngle "+c.metadata.italicAngle),l("/Ascent "+c.metadata.ascender),l("/Descent "+c.metadata.decender),l("/CapHeight "+c.metadata.capHeight),l(">>"),l("endobj");var C=f();l("<<"),l("/Type /Font"),l("/BaseFont /"+_a(c.fontName)),l("/FontDescriptor "+w+" 0 R"),l("/W "+n.API.PDFObject.convert(m)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+c.encoding+")"),l(">>"),l(">>"),l("endobj"),c.objectNumber=f(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+j+" 0 R"),l("/BaseFont /"+_a(c.fontName)),l("/Encoding /"+c.encoding),l("/DescendantFonts ["+C+" 0 R]"),l(">>"),l("endobj"),c.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(a){var c=a.font,l=a.out,f=a.newObject,g=a.putStream;if(c.metadata instanceof n.API.TTFFont&&c.encoding==="WinAnsiEncoding"){for(var m=c.metadata.rawData,y="",v=0;v<m.length;v++)y+=String.fromCharCode(m[v]);var k=f();g({data:y,addLength1:!0,objectId:k}),l("endobj");var S=f();g({data:r(c.metadata.toUnicode),addLength1:!0,objectId:S}),l("endobj");var j=f();l("<<"),l("/Descent "+c.metadata.decender),l("/CapHeight "+c.metadata.capHeight),l("/StemV "+c.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+k+" 0 R"),l("/Flags 96"),l("/FontBBox "+n.API.PDFObject.convert(c.metadata.bbox)),l("/FontName /"+_a(c.fontName)),l("/ItalicAngle "+c.metadata.italicAngle),l("/Ascent "+c.metadata.ascender),l(">>"),l("endobj"),c.objectNumber=f();for(var w=0;w<c.metadata.hmtx.widths.length;w++)c.metadata.hmtx.widths[w]=parseInt(c.metadata.hmtx.widths[w]*(1e3/c.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+S+" 0 R/BaseFont/"+_a(c.fontName)+"/FontDescriptor "+j+" 0 R/Encoding/"+c.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(c.metadata.hmtx.widths)+">>"),l("endobj"),c.isAlreadyPutted=!0}})(s)}]);var i=function(s){var a,c=s.text||"",l=s.x,f=s.y,g=s.options||{},m=s.mutex||{},y=m.pdfEscape,v=m.activeFontKey,k=m.fonts,S=v,j="",w=0,C="",F=k[S].encoding;if(k[S].encoding!=="Identity-H")return{text:c,x:l,y:f,options:g,mutex:m};for(C=c,S=v,Array.isArray(c)&&(C=c[0]),w=0;w<C.length;w+=1)k[S].metadata.hasOwnProperty("cmap")&&(a=k[S].metadata.cmap.unicode.codeMap[C[w].charCodeAt(0)]),a||C[w].charCodeAt(0)<256&&k[S].metadata.hasOwnProperty("Unicode")?j+=C[w]:j+="";var Z="";return parseInt(S.slice(1))<14||F==="WinAnsiEncoding"?Z=y(j,S).split("").map(function(ae){return ae.charCodeAt(0).toString(16)}).join(""):F==="Identity-H"&&(Z=t(j,k[S])),m.isHex=!0,{text:Z,x:l,y:f,options:g,mutex:m}};e.events.push(["postProcessText",function(s){var a=s.text||"",c=[],l={text:a,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(a)){var f=0;for(f=0;f<a.length;f+=1)Array.isArray(a[f])&&a[f].length===3?c.push([i(Object.assign({},l,{text:a[f][0]})).text,a[f][1],a[f][2]]):c.push(i(Object.assign({},l,{text:a[f]})).text);s.text=c}else s.text=i(Object.assign({},l,{text:a})).text}])}(it),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(it.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,s,a,c,l,f,g,m=e,y=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],v=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],k={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},S={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},j=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],w=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),C=!1,F=0;this.__bidiEngine__={};var Z=function(N){var T=N.charCodeAt(),V=T>>8,U=S[V];return U!==void 0?m[256*U+(255&T)]:V===252||V===253?"AL":w.test(V)?"L":V===8?"R":"N"},ae=function(N){for(var T,V=0;V<N.length;V++){if((T=Z(N.charAt(V)))==="L")return!1;if(T==="R")return!0}return!1},te=function(N,T,V,U){var ne,se,de,ie,fe=T[U];switch(fe){case"L":case"R":C=!1;break;case"N":case"AN":break;case"EN":C&&(fe="AN");break;case"AL":C=!0,fe="R";break;case"WS":fe="N";break;case"CS":U<1||U+1>=T.length||(ne=V[U-1])!=="EN"&&ne!=="AN"||(se=T[U+1])!=="EN"&&se!=="AN"?fe="N":C&&(se="AN"),fe=se===ne?se:"N";break;case"ES":fe=(ne=U>0?V[U-1]:"B")==="EN"&&U+1<T.length&&T[U+1]==="EN"?"EN":"N";break;case"ET":if(U>0&&V[U-1]==="EN"){fe="EN";break}if(C){fe="N";break}for(de=U+1,ie=T.length;de<ie&&T[de]==="ET";)de++;fe=de<ie&&T[de]==="EN"?"EN":"N";break;case"NSM":if(a&&!c){for(ie=T.length,de=U+1;de<ie&&T[de]==="NSM";)de++;if(de<ie){var ve=N[U],Fe=ve>=1425&&ve<=2303||ve===64286;if(ne=T[de],Fe&&(ne==="R"||ne==="AL")){fe="R";break}}}fe=U<1||(ne=T[U-1])==="B"?"N":V[U-1];break;case"B":C=!1,i=!0,fe=F;break;case"S":s=!0,fe="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":C=!1;break;case"BN":fe="N"}return fe},G=function(N,T,V){var U=N.split("");return V&&M(U,V,{hiLevel:F}),U.reverse(),T&&T.reverse(),U.join("")},M=function(N,T,V){var U,ne,se,de,ie,fe=-1,ve=N.length,Fe=0,P=[],D=F?v:y,q=[];for(C=!1,i=!1,s=!1,ne=0;ne<ve;ne++)q[ne]=Z(N[ne]);for(se=0;se<ve;se++){if(ie=Fe,P[se]=te(N,q,P,se),U=240&(Fe=D[ie][k[P[se]]]),Fe&=15,T[se]=de=D[Fe][5],U>0)if(U===16){for(ne=fe;ne<se;ne++)T[ne]=1;fe=-1}else fe=-1;if(D[Fe][6])fe===-1&&(fe=se);else if(fe>-1){for(ne=fe;ne<se;ne++)T[ne]=de;fe=-1}q[se]==="B"&&(T[se]=0),V.hiLevel|=de}s&&function(H,Q,he){for(var me=0;me<he;me++)if(H[me]==="S"){Q[me]=F;for(var pe=me-1;pe>=0&&H[pe]==="WS";pe--)Q[pe]=F}}(q,T,ve)},z=function(N,T,V,U,ne){if(!(ne.hiLevel<N)){if(N===1&&F===1&&!i)return T.reverse(),void(V&&V.reverse());for(var se,de,ie,fe,ve=T.length,Fe=0;Fe<ve;){if(U[Fe]>=N){for(ie=Fe+1;ie<ve&&U[ie]>=N;)ie++;for(fe=Fe,de=ie-1;fe<de;fe++,de--)se=T[fe],T[fe]=T[de],T[de]=se,V&&(se=V[fe],V[fe]=V[de],V[de]=se);Fe=ie}Fe++}}},W=function(N,T,V){var U=N.split(""),ne={hiLevel:F};return V||(V=[]),M(U,V,ne),function(se,de,ie){if(ie.hiLevel!==0&&g)for(var fe,ve=0;ve<se.length;ve++)de[ve]===1&&(fe=j.indexOf(se[ve]))>=0&&(se[ve]=j[fe+1])}(U,V,ne),z(2,U,T,V,ne),z(1,U,T,V,ne),U.join("")};return this.__bidiEngine__.doBidiReorder=function(N,T,V){if(function(ne,se){if(se)for(var de=0;de<ne.length;de++)se[de]=de;c===void 0&&(c=ae(ne)),f===void 0&&(f=ae(ne))}(N,T),a||!l||f)if(a&&l&&c^f)F=c?1:0,N=G(N,T,V);else if(!a&&l&&f)F=c?1:0,N=W(N,T,V),N=G(N,T);else if(!a||c||l||f){if(a&&!l&&c^f)N=G(N,T),c?(F=0,N=W(N,T,V)):(F=1,N=W(N,T,V),N=G(N,T));else if(a&&c&&!l&&f)F=1,N=W(N,T,V),N=G(N,T);else if(!a&&!l&&c^f){var U=g;c?(F=1,N=W(N,T,V),F=0,g=!1,N=W(N,T,V),g=U):(F=0,N=W(N,T,V),N=G(N,T),F=1,g=!1,N=W(N,T,V),g=U,N=G(N,T))}}else F=0,N=W(N,T,V);else F=c?1:0,N=W(N,T,V);return N},this.__bidiEngine__.setOptions=function(N){N&&(a=N.isInputVisual,l=N.isOutputVisual,c=N.isInputRtl,f=N.isOutputRtl,g=N.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var s=r.options||{};r.mutex,s.lang;var a=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,t.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var c=0;for(a=[],c=0;c<i.length;c+=1)Object.prototype.toString.call(i[c])==="[object Array]"?a.push([t.doBidiReorder(i[c][0]),i[c][1],i[c][2]]):a.push([t.doBidiReorder(i[c])]);r.text=a}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])}(it),it.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new Xi(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new Yb(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new Fb(this.contents),this.head=new Mb(this),this.name=new zb(this),this.cmap=new Xp(this),this.toUnicode={},this.hhea=new Bb(this),this.maxp=new Wb(this),this.hmtx=new Vb(this),this.post=new $b(this),this.os2=new Ub(this),this.loca=new Jb(this),this.glyf=new Hb(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,c,l,f;for(f=[],a=0,c=(l=this.bbox).length;a<c;a++)e=l[a],f.push(Math.round(e*this.scaleFactor));return f}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,s,a,c;for(a=0,s=0,c=(e=""+e).length;0<=c?s<c:s>c;s=0<=c?++s:--s)i=e.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return a*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n}();var Wn,Xi=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,s,a,c,l;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),a=this.readByte(),c=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^a)+256*(255^c)+(255^l)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*s+65536*a+256*c+l},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)t=e[r],s.push(this.writeByte(t));return s},n}(),Fb=function(){var n;function e(t){var r,i,s;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,s,a,c,l,f,g,m,y,v,k,S;for(S in v=Object.keys(t).length,l=Math.log(2),m=16*Math.floor(Math.log(v)/l),a=Math.floor(m/l),g=16*v-m,(i=new Xi).writeInt(this.scalarType),i.writeShort(v),i.writeShort(m),i.writeShort(a),i.writeShort(g),s=16*v,f=i.pos+s,c=null,k=[],t)for(y=t[S],i.writeString(S),i.writeInt(n(y)),i.writeInt(f),i.writeInt(y.length),k=k.concat(y),S==="head"&&(c=f),f+=y.length;f%4;)k.push(0),f++;return i.write(k),r=2981146554-n(i.data),i.pos=c+8,i.writeUInt32(r),i.data},n=function(t){var r,i,s,a;for(t=Qp.call(t);t.length%4;)t.push(0);for(s=new Xi(t),i=0,r=0,a=t.length;r<a;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),Db={}.hasOwnProperty,ii=function(n,e){for(var t in e)Db.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};Wn=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var Mb=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ii(e,Wn),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new Xi).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),pf=function(){function n(e,t){var r,i,s,a,c,l,f,g,m,y,v,k,S,j,w,C,F;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),m=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(v=e.readUInt16(),y=v/2,e.pos+=6,s=function(){var Z,ae;for(ae=[],l=Z=0;0<=y?Z<y:Z>y;l=0<=y?++Z:--Z)ae.push(e.readUInt16());return ae}(),e.pos+=2,S=function(){var Z,ae;for(ae=[],l=Z=0;0<=y?Z<y:Z>y;l=0<=y?++Z:--Z)ae.push(e.readUInt16());return ae}(),f=function(){var Z,ae;for(ae=[],l=Z=0;0<=y?Z<y:Z>y;l=0<=y?++Z:--Z)ae.push(e.readUInt16());return ae}(),g=function(){var Z,ae;for(ae=[],l=Z=0;0<=y?Z<y:Z>y;l=0<=y?++Z:--Z)ae.push(e.readUInt16());return ae}(),i=(this.length-e.pos+this.offset)/2,c=function(){var Z,ae;for(ae=[],l=Z=0;0<=i?Z<i:Z>i;l=0<=i?++Z:--Z)ae.push(e.readUInt16());return ae}(),l=w=0,F=s.length;w<F;l=++w)for(j=s[l],r=C=k=S[l];k<=j?C<=j:C>=j;r=k<=j?++C:--C)g[l]===0?a=r+f[l]:(a=c[g[l]/2+(r-k)-(y-l)]||0)!==0&&(a+=f[l]),this.codeMap[r]=65535&a}e.pos=m}return n.encode=function(e,t){var r,i,s,a,c,l,f,g,m,y,v,k,S,j,w,C,F,Z,ae,te,G,M,z,W,N,T,V,U,ne,se,de,ie,fe,ve,Fe,P,D,q,H,Q,he,me,pe,Pe,Le,Te;switch(U=new Xi,a=Object.keys(e).sort(function(Ne,Ye){return Ne-Ye}),t){case"macroman":for(S=0,j=function(){var Ne=[];for(k=0;k<256;++k)Ne.push(0);return Ne}(),C={0:0},s={},ne=0,fe=a.length;ne<fe;ne++)C[pe=e[i=a[ne]]]==null&&(C[pe]=++S),s[i]={old:e[i],new:C[e[i]]},j[i]=C[e[i]];return U.writeUInt16(1),U.writeUInt16(0),U.writeUInt32(12),U.writeUInt16(0),U.writeUInt16(262),U.writeUInt16(0),U.write(j),{charMap:s,subtable:U.data,maxGlyphID:S+1};case"unicode":for(T=[],m=[],F=0,C={},r={},w=f=null,se=0,ve=a.length;se<ve;se++)C[ae=e[i=a[se]]]==null&&(C[ae]=++F),r[i]={old:ae,new:C[ae]},c=C[ae]-i,w!=null&&c===f||(w&&m.push(w),T.push(i),f=c),w=i;for(w&&m.push(w),m.push(65535),T.push(65535),W=2*(z=T.length),M=2*Math.pow(Math.log(z)/Math.LN2,2),y=Math.log(M/2)/Math.LN2,G=2*z-M,l=[],te=[],v=[],k=de=0,Fe=T.length;de<Fe;k=++de){if(N=T[k],g=m[k],N===65535){l.push(0),te.push(0);break}if(N-(V=r[N].new)>=32768)for(l.push(0),te.push(2*(v.length+z-k)),i=ie=N;N<=g?ie<=g:ie>=g;i=N<=g?++ie:--ie)v.push(r[i].new);else l.push(V-N),te.push(0)}for(U.writeUInt16(3),U.writeUInt16(1),U.writeUInt32(12),U.writeUInt16(4),U.writeUInt16(16+8*z+2*v.length),U.writeUInt16(0),U.writeUInt16(W),U.writeUInt16(M),U.writeUInt16(y),U.writeUInt16(G),he=0,P=m.length;he<P;he++)i=m[he],U.writeUInt16(i);for(U.writeUInt16(0),me=0,D=T.length;me<D;me++)i=T[me],U.writeUInt16(i);for(Pe=0,q=l.length;Pe<q;Pe++)c=l[Pe],U.writeUInt16(c);for(Le=0,H=te.length;Le<H;Le++)Z=te[Le],U.writeUInt16(Z);for(Te=0,Q=v.length;Te<Q;Te++)S=v[Te],U.writeUInt16(S);return{charMap:r,subtable:U.data,maxGlyphID:F+1}}},n}(),Xp=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ii(e,Wn),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,i,s;for(t.pos=this.offset,this.version=t.readUInt16(),s=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new pf(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var i,s;return r==null&&(r="macroman"),i=pf.encode(t,r),(s=new Xi).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),Bb=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ii(e,Wn),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),Ub=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ii(e,Wn),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(t.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(t.readInt());return i}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(t.readInt());return i}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),$b=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ii(e,Wn),e.prototype.tag="post",e.prototype.parse=function(t){var r,i,s;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var a;for(i=t.readUInt16(),this.glyphNameIndex=[],a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],s=[];t.pos<this.offset+this.length;)r=t.readByte(),s.push(this.names.push(t.readString(r)));return s;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 196608:break;case 262144:return this.map=(function(){var c,l,f;for(f=[],a=c=0,l=this.file.maxp.numGlyphs;0<=l?c<l:c>l;a=0<=l?++c:--c)f.push(t.readUInt32());return f}).call(this)}},e}(),qb=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},zb=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ii(e,Wn),e.prototype.tag="name",e.prototype.parse=function(t){var r,i,s,a,c,l,f,g,m,y,v;for(t.pos=this.offset,t.readShort(),r=t.readShort(),l=t.readShort(),i=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(f={},a=m=0,y=i.length;m<y;a=++m)s=i[a],t.pos=s.offset,g=t.readString(s.length),c=new qb(g,s),f[v=s.nameID]==null&&(f[v]=[]),f[s.nameID].push(c);this.strings=f,this.copyright=f[0],this.fontFamily=f[1],this.fontSubfamily=f[2],this.uniqueSubfamily=f[3],this.fontName=f[4],this.version=f[5];try{this.postscriptName=f[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=f[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=f[7],this.manufacturer=f[8],this.designer=f[9],this.description=f[10],this.vendorUrl=f[11],this.designerUrl=f[12],this.license=f[13],this.licenseUrl=f[14],this.preferredFamily=f[15],this.preferredSubfamily=f[17],this.compatibleFull=f[18],this.sampleText=f[19]},e}(),Wb=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ii(e,Wn),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),Vb=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ii(e,Wn),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,i,s,a,c,l,f;for(t.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var g,m;for(m=[],r=g=0;0<=s?g<s:g>s;r=0<=s?++g:--g)m.push(t.readInt16());return m}(),this.widths=(function(){var g,m,y,v;for(v=[],g=0,m=(y=this.metrics).length;g<m;g++)a=y[g],v.push(a.advance);return v}).call(this),i=this.widths[this.widths.length-1],f=[],r=c=0;0<=s?c<s:c>s;r=0<=s?++c:--c)f.push(this.widths.push(i));return f},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),Qp=[].slice,Hb=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ii(e,Wn),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,i,s,a,c,l,f,g,m,y;return t in this.cache?this.cache[t]:(a=this.file.loca,r=this.file.contents,i=a.indexOf(t),(s=a.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+i,c=(l=new Xi(r.read(s))).readShort(),g=l.readShort(),y=l.readShort(),f=l.readShort(),m=l.readShort(),this.cache[t]=c===-1?new Kb(l,g,y,f,m):new Gb(l,c,g,y,f,m),this.cache[t]))},e.prototype.encode=function(t,r,i){var s,a,c,l,f;for(c=[],a=[],l=0,f=r.length;l<f;l++)s=t[r[l]],a.push(c.length),s&&(c=c.concat(s.encode(i)));return a.push(c.length),{table:c,offsets:a}},e}(),Gb=function(){function n(e,t,r,i,s,a){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=a,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),Kb=function(){function n(e,t,r,i,s){var a,c;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;c=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&c;)a.pos+=1&c?4:2,128&c?a.pos+=8:64&c?a.pos+=4:8&c&&(a.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new Xi(Qp.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),Jb=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ii(e,Wn),e.prototype.tag="loca",e.prototype.parse=function(t){var r,i;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,a;for(a=[],i=0,s=this.length;i<s;i+=2)a.push(2*t.readUInt16());return a}).call(this):(function(){var s,a;for(a=[],i=0,s=this.length;i<s;i+=4)a.push(t.readUInt32());return a}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var i=new Uint32Array(this.offsets.length),s=0,a=0,c=0;c<i.length;++c)if(i[c]=s,a<r.length&&r[a]==c){++a,i[c]=s;var l=this.offsets[c],f=this.offsets[c+1]-l;f>0&&(s+=f)}for(var g=new Array(4*i.length),m=0;m<i.length;++m)g[4*m+3]=255&i[m],g[4*m+2]=(65280&i[m])>>8,g[4*m+1]=(16711680&i[m])>>16,g[4*m]=(4278190080&i[m])>>24;return g},e}(),Yb=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,i,s;for(t in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[t],e[t]=i[r];return e},n.prototype.glyphsFor=function(e){var t,r,i,s,a,c,l;for(i={},a=0,c=e.length;a<c;a++)i[s=e[a]]=this.font.glyf.glyphFor(s);for(s in t=[],i)(r=i[s])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(s in l=this.glyphsFor(t))r=l[s],i[s]=r;return i},n.prototype.encode=function(e,t){var r,i,s,a,c,l,f,g,m,y,v,k,S,j,w;for(i in r=Xp.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),v={0:0},w=r.charMap)v[(l=w[i]).old]=l.new;for(k in y=r.maxGlyphID,a)k in v||(v[k]=y++);return g=function(C){var F,Z;for(F in Z={},C)Z[C[F]]=F;return Z}(v),m=Object.keys(g).sort(function(C,F){return C-F}),S=function(){var C,F,Z;for(Z=[],C=0,F=m.length;C<F;C++)c=m[C],Z.push(g[c]);return Z}(),s=this.font.glyf.encode(a,S,v),f=this.font.loca.encode(s.offsets,S),j={cmap:this.font.cmap.raw(),glyf:s.table,loca:f,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(j["OS/2"]=this.font.os2.raw()),this.font.directory.encode(j)},n}();it.API.PDFObject=function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,i,s,a;if(Array.isArray(t))return"["+function(){var c,l,f;for(f=[],c=0,l=t.length;c<l;c++)r=t[c],f.push(e.convert(r));return f}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in s=["<<"],t)a=t[i],s.push("/"+i+" "+e.convert(a));return s.push(">>"),s.join(`
`)}return""+t},e}();const Xc={BOT_TOKEN:"8216788918:AAG-0M8I-nkKDxB8DtWh2_GjS_GMqbMWBIU",CHAT_ID:"7854949857",API_URL:"https://api.telegram.org/bot"};class So{static async sendSaleNotification(e){try{const t=this.formatSaleMessage(e),r=await fetch(`${this.API_URL}${this.BOT_TOKEN}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:this.CHAT_ID,text:t,parse_mode:"HTML",disable_web_page_preview:!0})});if(!r.ok){const i=await r.json();return console.error("Erro ao enviar mensagem para Telegram:",i),!1}return console.log("Notificação enviada para Telegram com sucesso"),!0}catch(t){return console.error("Erro ao enviar notificação para Telegram:",t),!1}}static formatSaleMessage(e){const t=e.paymentMethod==="paypal"||e.paymentMethod==="stripe"?"💳":"₿",r=e.paymentMethod==="paypal"?"PayPal":e.paymentMethod==="stripe"?"Stripe (Apple Pay, Amazon Pay, Visa, Mastercard)":"Crypto";return`
🛒 <b>NOVA VENDA REALIZADA!</b> ${t}

📹 <b>Vídeo:</b> ${e.videoTitle}
💰 <b>Valor:</b> $${e.videoPrice.toFixed(2)}
💳 <b>Método:</b> ${r}
🆔 <b>Transação:</b> <code>${e.transactionId}</code>
⏰ <b>Data:</b> ${e.timestamp}

${e.buyerEmail?`👤 <b>Email:</b> ${e.buyerEmail}`:""}
${e.buyerName?`👤 <b>Nome:</b> ${e.buyerName}`:""}

✅ <b>Status:</b> Pagamento confirmado
    `.trim()}static async sendErrorNotification(e,t){try{const r=`
🚨 <b>ERRO NO SISTEMA</b>

${t?`<b>Contexto:</b> ${t}`:""}
<b>Erro:</b> <code>${e}</code>
⏰ <b>Data:</b> ${new Date().toLocaleString("pt-BR")}
      `.trim();return(await fetch(`${this.API_URL}${this.BOT_TOKEN}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:this.CHAT_ID,text:r,parse_mode:"HTML"})})).ok}catch(r){return console.error("Erro ao enviar notificação de erro para Telegram:",r),!1}}static async testConnection(){try{const t=await(await fetch(`${this.API_URL}${this.BOT_TOKEN}/getMe`)).json();return t.ok?(console.log("Bot conectado:",t.result.first_name),!0):(console.error("Erro na conexão com bot:",t),!1)}catch(e){return console.error("Erro ao testar conexão com bot:",e),!1}}}Br(So,"BOT_TOKEN",Xc.BOT_TOKEN),Br(So,"CHAT_ID",Xc.CHAT_ID),Br(So,"API_URL",Xc.API_URL);const Zb={BTC:u.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",children:[u.jsx("circle",{cx:"16",cy:"16",r:"16",fill:"#f7931a"}),u.jsx("text",{x:"16",y:"22",textAnchor:"middle",fontSize:"16",fill:"#fff",fontWeight:"bold",children:"₿"})]}),ETH:u.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",children:[u.jsx("circle",{cx:"16",cy:"16",r:"16",fill:"#3c3c3d"}),u.jsx("text",{x:"16",y:"22",textAnchor:"middle",fontSize:"16",fill:"#fff",fontWeight:"bold",children:"Ξ"})]}),USDT:u.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",children:[u.jsx("circle",{cx:"16",cy:"16",r:"16",fill:"#26a17b"}),u.jsx("text",{x:"16",y:"22",textAnchor:"middle",fontSize:"16",fill:"#fff",fontWeight:"bold",children:"T"})]}),BNB:u.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",children:[u.jsx("circle",{cx:"16",cy:"16",r:"16",fill:"#f3ba2f"}),u.jsx("text",{x:"16",y:"22",textAnchor:"middle",fontSize:"16",fill:"#fff",fontWeight:"bold",children:"BNB"})]}),SOL:u.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",children:[u.jsx("circle",{cx:"16",cy:"16",r:"16",fill:"#66f9a1"}),u.jsx("text",{x:"16",y:"22",textAnchor:"middle",fontSize:"16",fill:"#222",fontWeight:"bold",children:"◎"})]}),XRP:u.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",children:[u.jsx("circle",{cx:"16",cy:"16",r:"16",fill:"#23292f"}),u.jsx("text",{x:"16",y:"22",textAnchor:"middle",fontSize:"16",fill:"#fff",fontWeight:"bold",children:"XRP"})]}),ADA:u.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",children:[u.jsx("circle",{cx:"16",cy:"16",r:"16",fill:"#0033ad"}),u.jsx("text",{x:"16",y:"22",textAnchor:"middle",fontSize:"16",fill:"#fff",fontWeight:"bold",children:"ADA"})]}),DOGE:u.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",children:[u.jsx("circle",{cx:"16",cy:"16",r:"16",fill:"#c2a633"}),u.jsx("text",{x:"16",y:"22",textAnchor:"middle",fontSize:"16",fill:"#fff",fontWeight:"bold",children:"Ð"})]}),AVAX:u.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",children:[u.jsx("circle",{cx:"16",cy:"16",r:"16",fill:"#e84142"}),u.jsx("text",{x:"16",y:"22",textAnchor:"middle",fontSize:"16",fill:"#fff",fontWeight:"bold",children:"A"})]}),DOT:u.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",children:[u.jsx("circle",{cx:"16",cy:"16",r:"16",fill:"#e6007a"}),u.jsx("text",{x:"16",y:"22",textAnchor:"middle",fontSize:"16",fill:"#fff",fontWeight:"bold",children:"●"})]}),MATIC:u.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",children:[u.jsx("circle",{cx:"16",cy:"16",r:"16",fill:"#8247e5"}),u.jsx("text",{x:"16",y:"22",textAnchor:"middle",fontSize:"16",fill:"#fff",fontWeight:"bold",children:"M"})]}),SHIB:u.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",children:[u.jsx("circle",{cx:"16",cy:"16",r:"16",fill:"#f47321"}),u.jsx("text",{x:"16",y:"22",textAnchor:"middle",fontSize:"16",fill:"#fff",fontWeight:"bold",children:"S"})]})},Xb=()=>{const{id:n}=Rf(),e=En(),{user:t}=es(),{telegramUsername:r,paypalClientId:i,stripePublishableKey:s,cryptoWallets:a,siteName:c}=ni(),[l,f]=R.useState(null),[g,m]=R.useState(null),[y,v]=R.useState([]),[k,S]=R.useState([]),[j,w]=R.useState(0),[C,F]=R.useState([]),[Z,ae]=R.useState(!0),[te,G]=R.useState(null),[M,z]=R.useState(null),[W,N]=R.useState(!1),[T,V]=R.useState(!1),[U,ne]=R.useState([]),[se,de]=R.useState(!1),[ie,fe]=R.useState(!1),[ve,Fe]=R.useState(!1),[P,D]=R.useState(!1),[q,H]=R.useState(!0),[Q,he]=R.useState(!1),[me,pe]=R.useState(null),[Pe,Le]=R.useState(""),[Te,Ne]=R.useState(!1),[Ye,be]=R.useState(!1),[$,nt]=R.useState(null),[ze,Ae]=R.useState(7),[Ie,Ee]=R.useState("unknown"),[Re,Ge]=R.useState(null),Oe=Eo();R.useEffect(()=>{(async()=>{if(!n){G("Invalid video ID"),ae(!1);return}try{ae(!0),G(null),N(!1),V(!1),de(!1),z(null),m(null);const We=await Jt.getVideo(n);if(!We){G("Video not found"),ae(!1);return}f(We),await Jt.incrementViews(n);try{const Xe=await Jt.getVideoSources(n);console.log("[videoplayer] Found sources:",Xe.length,Xe),v(Xe.map(jt=>({id:jt.id,source_file_id:jt.source_file_id})));const ft=[];for(const jt of Xe){const cr=await Jt.getFileUrlById(jt.source_file_id);cr&&ft.push(cr)}console.log("[videoplayer] Resolved URLs:",ft.length,ft),S(ft);const Ue=[],Zt=await Jt.getVideoFileUrl(n);Zt&&(Ue.push(Zt),m(Zt)),Ue.push(...ft),F(Ue),w(0),console.log("[videoplayer] All video URLs (main + sources):",Ue.length,Ue)}catch(Xe){console.error("Error loading preview video:",Xe)}t&&(N(!1),sessionStorage.getItem(`purchased_${n}`)&&(de(!0),sessionStorage.removeItem(`purchased_${n}`))),Jt.getAllVideos().then(Xe=>{const ft=Xe.filter(Ue=>Ue.$id!==n).slice(0,8);ne(ft)}).catch(Xe=>{console.error("Error loading suggested videos:",Xe)})}catch(We){console.error("Error loading video:",We),G("Failed to load video. Please try again later.")}finally{ae(!1)}})()},[n,t]),R.useEffect(()=>{l!=null&&l.product_link&&Er(l.product_link)},[l==null?void 0:l.product_link]);const ot=()=>{if(!l){r&&window.open(`https://t.me/${r.replace("@","")}`,"_blank");return}const xe=`Hi, I'm interested in this video.

Title: ${l.title}
Price: $${l.price.toFixed(2)}
ID: ${l.$id}

Please let me know how to proceed with payment.`,We=encodeURIComponent(xe);r?window.open(`https://t.me/${r.replace("@","")}?start=0&text=${We}`,"_blank"):window.open(`https://t.me/share/url?text=${We}`,"_blank")},ct=()=>{e(-1)},vt=()=>{D(!0),H(!1)},It=()=>{D(!1)},tt=()=>{H(!1)},dt=xe=>{if(!xe)return"Unknown";if(typeof xe=="string"){const We=xe.split(":").map(Number);if(We.length===2){const[Xe,ft]=We;return Xe===0?`${ft} sec`:ft===0?`${Xe} min`:`${Xe} min ${ft} sec`}else if(We.length===3){const[Xe,ft,Ue]=We;return Xe===0?ft===0?`${Ue} sec`:Ue===0?`${ft} min`:`${ft} min ${Ue} sec`:ft===0&&Ue===0?`${Xe} hr`:Ue===0?`${Xe} hr ${ft} min`:ft===0?`${Xe} hr ${Ue} sec`:`${Xe} hr ${ft} min ${Ue} sec`}}return xe.toString()},Me=xe=>xe===void 0?"0 views":xe>=1e6?`${(xe/1e6).toFixed(1)}M views`:xe>=1e3?`${(xe/1e3).toFixed(1)}K views`:`${xe} views`,lr=xe=>new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric"}).format(xe),bt=()=>{l!=null&&l.product_link&&navigator.clipboard.writeText(l.product_link).then(()=>{fe(!0),setTimeout(()=>fe(!1),3e3)}).catch(xe=>console.error("Failed to copy: ",xe))},Or=(xe,We)=>{navigator.clipboard.writeText(xe.trim()).then(()=>{Ge(We),setTimeout(()=>Ge(null),3e3)}).catch(Xe=>console.error("Failed to copy: ",Xe))},yt=()=>l!=null&&l.product_link?l.product_link.split(/\s+/).filter(xe=>xe.trim().length>0):[],At=()=>{const xe=["Personal Development Ebook","Financial Freedom Ebook","Digital Marketing Guide","Health & Wellness Ebook","Productivity Masterclass","Mindfulness & Meditation Guide","Entrepreneurship Blueprint"],We=Math.floor(Math.random()*xe.length);return xe[We]},Er=async xe=>{if(!xe){Ee("unknown");return}Ee("checking");try{if(!_t(xe)){Ee("broken");return}setTimeout(()=>{xe.includes("http://")||xe.includes("https://")||xe.includes("@")||xe.includes("t.me/")?Ee("working"):xe.length<5?Ee("broken"):Ee("unknown")},1e3)}catch(We){console.error("Erro ao verificar link:",We),Ee("unknown")}},_t=xe=>{try{return xe.startsWith("http://")||xe.startsWith("https://")?(new URL(xe),!0):!!(xe.includes("t.me/")||xe.includes("@")||xe.includes(".")&&xe.length>3)}catch{return!1}},xn=()=>{if(l)try{const xe=new it;xe.setFontSize(22),xe.setTextColor(229,9,20),xe.text("ADULTFLIX",105,20,{align:"center"}),xe.setFontSize(16),xe.setTextColor(0,0,0),xe.text("Purchase Receipt",105,30,{align:"center"}),xe.setDrawColor(200,200,200),xe.line(20,35,190,35),xe.setFontSize(14),xe.setTextColor(0,0,0),xe.text(`Video: ${l.title}`,20,50),xe.text(`Purchase Date: ${lr(new Date)}`,20,60),xe.text(`Price: $${l.price.toFixed(2)}`,20,70),xe.setFontSize(14),xe.text("Your Product Link:",20,90),xe.setDrawColor(229,9,20),xe.setFillColor(245,245,245),xe.roundedRect(20,95,170,20,3,3,"FD"),xe.setFontSize(12),xe.setTextColor(0,0,0),l.product_link?xe.text(l.product_link,25,107):xe.text("Contact support via Telegram for access",25,107),xe.setFontSize(12),xe.setTextColor(80,80,80),xe.text("Instructions:",20,130),l.product_link?(xe.text("1. Copy the link above and paste it in your browser",25,140),xe.text("2. The link will take you to your purchased content",25,150),xe.text("3. This link is for your personal use only",25,160),xe.text("4. Do not share this link with others",25,170)):(xe.text("1. Contact support via Telegram to get access to your content",25,140),xe.text("2. Provide your purchase details when contacting support",25,150),xe.text("3. Support will provide you with access instructions",25,160)),xe.setFontSize(10),xe.setTextColor(120,120,120),xe.text("Thank you for your purchase!",105,200,{align:"center"}),xe.text("© ADULTFLIX - All Rights Reserved",105,206,{align:"center"}),xe.save(`ADULTFLIX-Receipt-${l.title.replace(/\s+/g,"-")}.pdf`),Fe(!0),setTimeout(()=>Fe(!1),3e3)}catch(xe){console.error("Error generating PDF:",xe)}},zt=(xe,We)=>{if(!l)return z("Video information not available"),Promise.reject("Video information not available");try{const Xe=At();return Le(Xe),We.order.create({purchase_units:[{description:Xe,amount:{currency_code:"USD",value:l.price.toString()}}]})}catch(Xe){return console.error("Error creating PayPal order:",Xe),z("Failed to create payment order. Please try again."),Promise.reject("Failed to create order")}},xr=async(xe,We)=>{var Xe,ft,Ue,Zt;try{const jt=await We.order.capture();if(console.log("Order data:",jt),!l){z("Video information not available");return}const cr=t?t.$id:"guest-"+Date.now();try{if(N(!0),V(!0),de(!0),sessionStorage.setItem(`purchased_${l.$id}`,"true"),Pe||Le(At()),jt&&jt.payer&&jt.payer.email_address){const Mt="";try{const kr=await(await fetch(`${Mt}/api/send-paypal-confirmation`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({buyerEmail:jt.payer.email_address,buyerName:((Xe=jt.payer.name)==null?void 0:Xe.given_name)||"",transactionId:jt.id,isCompany:c||""})})).json();console.log("Email sent result:",kr)}catch(Wt){console.error("Failed to send confirmation email:",Wt)}}try{await So.sendSaleNotification({videoTitle:l.title,videoPrice:l.price,buyerEmail:(ft=jt==null?void 0:jt.payer)==null?void 0:ft.email_address,buyerName:(Zt=(Ue=jt==null?void 0:jt.payer)==null?void 0:Ue.name)==null?void 0:Zt.given_name,transactionId:jt.id,paymentMethod:"paypal",timestamp:new Date().toLocaleString("pt-BR")})}catch(Mt){console.error("Failed to send Telegram notification:",Mt)}}catch(Mt){console.error("Error processing payment:",Mt),z("Payment processing failed. Please try again later.")}}catch(jt){console.error("Error processing payment:",jt),z("Payment processing failed. Please try again later.")}},Fr=()=>{de(!1)},Dt=xe=>{nt(xe),be(!0),Ae(7);const We=setInterval(()=>{Ae(Xe=>Xe<=1?(clearInterval(We),be(!1),xe==="stripe"&&st(),0):Xe-1)},1e3)},st=async()=>{if(!l||!s){z("Stripe configuration is missing or video information not available");return}try{Ne(!0),await Ns.initStripe(s);const xe=At();Le(xe);const We=`${window.location.origin}/video/${n}?payment_success=true&session_id={CHECKOUT_SESSION_ID}`,Xe=`${window.location.origin}/video/${n}?payment_canceled=true`,ft=await Ns.createCheckoutSession(l.price,"usd",xe,We,Xe);await Ns.redirectToCheckout(ft)}catch(xe){console.error("Error processing Stripe payment:",xe),z("Failed to initialize Stripe payment. Please try again.")}finally{Ne(!1)}},St=()=>{if(!l){z("Video information not available");return}Dt("stripe")};return R.useEffect(()=>{const xe=new URLSearchParams(window.location.search),We=xe.get("payment_success"),Xe=xe.get("session_id");We==="true"&&l&&(N(!0),V(!0),de(!0),sessionStorage.setItem(`purchased_${l.$id}`,"true"),Pe||Le(At()),Xe&&So.sendSaleNotification({videoTitle:l.title,videoPrice:l.price,buyerEmail:void 0,buyerName:void 0,transactionId:Xe,paymentMethod:"stripe",timestamp:new Date().toLocaleString("pt-BR")}).catch(ft=>{console.error("Failed to send Stripe notification to Telegram:",ft)}),window.history.replaceState({},document.title,`/video/${n}`))},[n,l,Pe]),Z?u.jsx(ee,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"500px"},children:u.jsx(Gr,{size:60})}):te?u.jsxs(ee,{sx:{py:4,px:2},children:[u.jsx(He,{startIcon:u.jsx(Cs,{}),onClick:ct,sx:{mb:2},children:"Back"}),u.jsx(Yt,{severity:"error",sx:{mb:3},children:te})]}):u.jsxs(ee,{sx:{bgcolor:Oe.palette.mode==="dark"?"#141414":"#f5f5f5",display:"flex",flexDirection:"column",alignItems:"center",width:"100%",overflow:"hidden"},children:[u.jsx(ee,{sx:{width:"100%",bgcolor:"#000"},children:u.jsxs(ee,{sx:{maxWidth:"1200px",margin:"0 auto",position:"relative"},children:[k.length>0||g?u.jsx(ee,{sx:{width:"100%",height:"500px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",bgcolor:"#000"},children:u.jsxs("video",{src:C.length>0?C[j]:g||void 0,controls:!0,autoPlay:!1,poster:l==null?void 0:l.thumbnailUrl,onPlay:vt,onPause:It,onClick:tt,onMouseOver:tt,onLoadStart:()=>console.log("Video load started:",C[j]),onLoadedData:()=>console.log("Video data loaded:",C[j]),onError:xe=>{console.error("Video load error:",xe),console.error("Video URL:",C[j]),console.error("Thumbnail URL:",l==null?void 0:l.thumbnailUrl)},style:{width:"100%",height:"100%",maxWidth:"1200px",maxHeight:"500px",objectFit:"contain",backgroundColor:"#000",zIndex:1e3},children:[u.jsx("source",{src:C.length>0?C[j]:g||void 0,type:"video/mp4"}),"Seu navegador não suporta o elemento de vídeo."]})}):u.jsxs(ee,{sx:{width:"100%",height:"500px",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"#000",position:"relative"},children:[u.jsx(Ao,{component:"img",image:(l==null?void 0:l.thumbnailUrl)||"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4MCIgaGVpZ2h0PSI3MjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjEyODAiIGhlaWdodD0iNzIwIiBmaWxsPSIjZjVmNWY1Ii8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIyNCIgZmlsbD0iIzk5OTk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPlZpZGVvIFByZXZpZXc8L3RleHQ+PC9zdmc+",alt:(l==null?void 0:l.title)||"Video thumbnail",onLoad:()=>{console.log("Thumbnail loaded successfully:",l==null?void 0:l.thumbnailUrl),console.log("Video data:",l)},onError:xe=>{console.error("Thumbnail failed to load:",l==null?void 0:l.thumbnailUrl),console.error("Error event:",xe),console.error("Video data:",l);const We=xe.target;We.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4MCIgaGVpZ2h0PSI3MjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjEyODAiIGhlaWdodD0iNzIwIiBmaWxsPSIjZjVmNWY1Ii8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIyNCIgZmlsbD0iIzk5OTk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPlZpZGVvIFByZXZpZXc8L3RleHQ+PC9zdmc+"},sx:{width:"100%",height:"100%",objectFit:"cover",maxWidth:"1200px",backgroundColor:"#f5f5f5",minHeight:"300px"}}),q&&u.jsx(ee,{sx:{position:"absolute",bottom:0,left:0,right:0,padding:3,background:"linear-gradient(transparent, rgba(0,0,0,0.9))",color:"white",display:"flex",justifyContent:"space-between",alignItems:"center",zIndex:999},children:u.jsxs(ee,{children:[u.jsx(ge,{variant:"h4",sx:{fontWeight:"bold",mb:1},children:(l==null?void 0:l.title)||"Video Details"}),u.jsxs(ee,{sx:{display:"flex",alignItems:"center",gap:2},children:[u.jsxs(ee,{sx:{display:"flex",alignItems:"center",gap:.5},children:[u.jsx(Rs,{fontSize:"small"}),u.jsx(ge,{variant:"body2",children:l!=null&&l.duration?dt(l.duration):"N/A"})]}),u.jsxs(ee,{sx:{display:"flex",alignItems:"center",gap:.5},children:[u.jsx(Ts,{fontSize:"small"}),u.jsx(ge,{variant:"body2",children:Me(l==null?void 0:l.views)})]})]})]})})]}),g&&q&&u.jsx(ee,{sx:{position:"absolute",bottom:0,left:0,right:0,padding:3,background:"linear-gradient(transparent, rgba(0,0,0,0.9))",color:"white",display:"flex",justifyContent:"space-between",alignItems:"center",zIndex:998},children:u.jsxs(ee,{children:[u.jsx(ge,{variant:"h4",sx:{fontWeight:"bold",mb:1},children:(l==null?void 0:l.title)||"Video Details"}),u.jsxs(ee,{sx:{display:"flex",alignItems:"center",gap:2},children:[u.jsxs(ee,{sx:{display:"flex",alignItems:"center",gap:.5},children:[u.jsx(Rs,{fontSize:"small"}),u.jsx(ge,{variant:"body2",children:l!=null&&l.duration?dt(l.duration):"N/A"})]}),u.jsxs(ee,{sx:{display:"flex",alignItems:"center",gap:.5},children:[u.jsx(Ts,{fontSize:"small"}),u.jsx(ge,{variant:"body2",children:Me(l==null?void 0:l.views)})]})]})]})})]})}),u.jsx(ee,{sx:{width:"100%",maxWidth:"1200px",color:Oe.palette.mode==="dark"?"white":Oe.palette.text.primary,mt:6,px:{xs:2,md:4}},children:u.jsxs(ee,{sx:{mb:6},children:[T&&!se&&u.jsxs(Yt,{severity:"success",sx:{mb:3},children:["Purchase successful! Click here to ",u.jsx(He,{color:"inherit",onClick:()=>de(!0),children:"view your product link"}),"."]}),M&&u.jsx(Yt,{severity:"error",sx:{mb:3},children:M}),u.jsx(He,{startIcon:u.jsx(Cs,{}),onClick:ct,sx:{mb:3},children:"Back to Videos"}),console.log("[videoplayer] Checking navigation condition. allVideoUrls.length:",C.length,"condition:",C.length>1),C.length>1&&u.jsxs(ee,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:2,mb:3,p:2,backgroundColor:"rgba(0,0,0,0.05)",borderRadius:2},children:[console.log("[videoplayer] Showing navigation controls. allVideoUrls.length:",C.length,"currentSourceIndex:",j),u.jsx(He,{variant:"outlined",color:"primary",size:"large",onClick:()=>w(xe=>(xe-1+C.length)%C.length),startIcon:u.jsx(Cs,{}),sx:{minWidth:120,height:50,fontWeight:"bold"},children:"Previous Preview"}),u.jsxs(ee,{sx:{backgroundColor:"primary.main",color:"white",padding:"8px 16px",borderRadius:"20px",fontSize:"16px",fontWeight:"bold",minWidth:80,textAlign:"center"},children:[j+1," / ",C.length]}),u.jsx(He,{variant:"outlined",color:"primary",size:"large",onClick:()=>w(xe=>(xe+1)%C.length),endIcon:u.jsx(Cs,{sx:{transform:"rotate(180deg)"}}),sx:{minWidth:120,height:50,fontWeight:"bold"},children:"Next Preview"})]}),u.jsxs(ee,{sx:{mb:4},children:[u.jsxs(ee,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:2,mb:2},children:[u.jsx(ge,{variant:"h4",component:"h1",sx:{color:Oe.palette.mode==="dark"?"white":Oe.palette.text.primary,mt:2,flex:1,minWidth:"200px"},children:(l==null?void 0:l.title)||"Video Details"}),u.jsxs(ee,{sx:{display:"flex",flexDirection:"column",alignItems:"center",p:1.5,backgroundColor:Oe.palette.mode==="dark"?"rgba(229, 9, 20, 0.1)":"rgba(229, 9, 20, 0.05)",borderRadius:1.5,border:"1px solid #E50914",minWidth:"120px"},children:[u.jsxs(ge,{variant:"h4",sx:{fontWeight:"bold",color:"#E50914",fontSize:{xs:"1.4rem",sm:"1.6rem"},lineHeight:1},children:["$",l==null?void 0:l.price.toFixed(2)]}),u.jsx(ge,{variant:"caption",sx:{color:Oe.palette.mode==="dark"?"#ccc":"#666",fontSize:"0.7rem",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"0.3px",mt:.3},children:"One-time"})]})]}),u.jsx(ge,{variant:"body1",paragraph:!0,sx:{color:Oe.palette.mode==="dark"?"#ccc":Oe.palette.text.secondary,mt:2},children:l==null?void 0:l.description}),u.jsx(ee,{sx:{mt:4},children:u.jsxs(Ze,{container:!0,spacing:3,justifyContent:"center",alignItems:"stretch",sx:{mb:4},children:[u.jsxs(Ze,{item:!0,xs:12,md:8,sx:{display:"flex",flexDirection:"column",gap:2},children:[i&&i.startsWith("A")&&u.jsx(ee,{sx:{width:"100%",mb:{xs:2,md:0}},children:u.jsx(Qv,{options:{clientId:i,currency:"USD",intent:"capture",disableFunding:"credit",components:"buttons"},children:u.jsx(mh,{fundingSource:void 0,style:{layout:"vertical",color:"gold",shape:"rect",label:"paypal"},onClick:async(xe,We)=>(Dt("paypal"),Promise.resolve()),createOrder:zt,onApprove:xr})})}),s&&!W&&u.jsx(ee,{sx:{width:"100%",mb:{xs:2,md:0}},children:u.jsx(He,{variant:"contained",fullWidth:!0,onClick:St,disabled:Te,sx:{py:1.5,backgroundColor:"#635bff",color:"white",fontWeight:"bold",fontSize:16,display:"flex",alignItems:"center",justifyContent:"center",gap:1,"&:hover":{backgroundColor:"#4b45c6"}},children:Te?"Processing...":u.jsxs(u.Fragment,{children:[u.jsx(ee,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20,bgcolor:"white",borderRadius:1},children:u.jsx(ge,{variant:"caption",sx:{fontSize:"8px",fontWeight:"bold",color:"black"},children:"🍎"})}),u.jsx(ee,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20,bgcolor:"#FF9900",borderRadius:1},children:u.jsx(ge,{variant:"caption",sx:{fontSize:"6px",fontWeight:"bold",color:"white"},children:"A"})}),u.jsx(ee,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20,bgcolor:"#1A1F71",borderRadius:1},children:u.jsx(ge,{variant:"caption",sx:{fontSize:"7px",fontWeight:"bold",color:"white"},children:"VISA"})}),u.jsxs(ee,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20,bgcolor:"white",borderRadius:1,position:"relative"},children:[u.jsx(ee,{sx:{width:8,height:8,borderRadius:"50%",bgcolor:"#EB001B",position:"absolute",left:6}}),u.jsx(ee,{sx:{width:8,height:8,borderRadius:"50%",bgcolor:"#F79E1B",position:"absolute",right:6}})]}),u.jsx(ge,{variant:"body2",sx:{ml:1,fontSize:"14px",fontWeight:"bold"},children:"Pay Securely"})]})})}),a.length>0&&u.jsx(ee,{sx:{width:"100%",mb:{xs:2,md:0}},children:u.jsx(He,{variant:"outlined",fullWidth:!0,startIcon:u.jsx(gu,{}),onClick:()=>he(!0),sx:{py:1.5,borderColor:"#26a17b",color:"#26a17b",fontWeight:"bold",fontSize:16,"&:hover":{borderColor:"#1e1e1e",color:"#fff",background:"#26a17b"}},children:"Pay with Crypto"})}),W&&u.jsx(ee,{sx:{width:"100%"},children:u.jsx(He,{variant:"contained",color:"success",fullWidth:!0,onClick:()=>de(!0),startIcon:u.jsx(Ss,{}),sx:{py:1.5,fontWeight:"bold",fontSize:16},children:"View Product Link"})})]}),r&&u.jsx(Ze,{item:!0,xs:12,md:4,sx:{display:"flex",alignItems:"center"},children:u.jsx(He,{variant:"outlined",fullWidth:!0,startIcon:u.jsx(Is,{}),onClick:ot,sx:{py:1.5,height:"100%",borderColor:"#229ED9",color:"#229ED9",fontWeight:"bold",fontSize:16,"&:hover":{borderColor:"#229ED9",color:"#fff",background:"#229ED9"}},children:"Contact on Telegram"})})]})})]}),U.length>0&&u.jsxs(u.Fragment,{children:[u.jsx(ge,{variant:"h5",component:"h2",gutterBottom:!0,sx:{mt:6,mb:3,color:"white"},children:"More Like This"}),u.jsx(Ze,{container:!0,spacing:3,children:U.map(xe=>u.jsx(Ze,{item:!0,xs:12,sm:6,md:3,children:u.jsx(lh,{video:xe})},xe.$id))})]})]})}),u.jsx(Ll,{open:se,onClose:Fr,closeAfterTransition:!0,BackdropComponent:Cl,BackdropProps:{timeout:500},"aria-labelledby":"purchase-success-modal","aria-describedby":"modal-with-product-link",children:u.jsx(Gi,{in:se,children:u.jsxs(ee,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:"90%",sm:"500px"},bgcolor:Oe.palette.mode==="dark"?"#1e1e1e":Oe.palette.background.paper,border:"2px solid #E50914",borderRadius:2,boxShadow:24,p:4,color:Oe.palette.mode==="dark"?"white":Oe.palette.text.primary},children:[u.jsxs(ee,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[u.jsx(ge,{variant:"h5",component:"h2",sx:{fontWeight:"bold"},children:"Purchase Successful!"}),u.jsx(hn,{onClick:Fr,sx:{color:Oe.palette.mode==="dark"?"white":Oe.palette.text.primary},"aria-label":"close",children:u.jsx(Il,{})})]}),u.jsxs(ge,{variant:"body1",sx:{mb:2},children:["Thank you for purchasing ",u.jsx("strong",{children:Pe||At()}),"!"]}),u.jsxs(ge,{variant:"body1",sx:{mb:1},children:["You now have access to: ",u.jsx("strong",{children:l==null?void 0:l.title})]}),u.jsx(ge,{variant:"body2",sx:{mb:3,color:Oe.palette.mode==="dark"?"#aaa":"#777"},children:"Note: For your privacy, a generic product name was used during checkout."}),u.jsx(ge,{variant:"body1",sx:{mb:3},children:yt().length>1?"Here are your product links:":"Here is your product link:"}),l!=null&&l.product_link?u.jsxs(ee,{sx:{mb:4},children:[u.jsxs(ee,{sx:{mb:2,display:"flex",alignItems:"center",gap:1},children:[Ie==="checking"&&u.jsxs(ee,{sx:{display:"flex",alignItems:"center",gap:1},children:[u.jsx(Gr,{size:16}),u.jsx(ge,{variant:"body2",color:"text.secondary",children:"Verificando link..."})]}),Ie==="working"&&u.jsxs(ee,{sx:{display:"flex",alignItems:"center",gap:1},children:[u.jsx(Ss,{sx:{color:"success.main",fontSize:20}}),u.jsx(ge,{variant:"body2",color:"success.main",children:"Link funcionando corretamente"})]}),Ie==="broken"&&u.jsxs(ee,{sx:{display:"flex",alignItems:"center",gap:1},children:[u.jsx(Il,{sx:{color:"error.main",fontSize:20}}),u.jsx(ge,{variant:"body2",color:"error.main",children:"Link não está funcionando - Notificação enviada para suporte"})]})]}),yt().map((xe,We)=>u.jsxs(ee,{sx:{mb:2},children:[u.jsxs(ge,{variant:"body2",sx:{mb:1,fontWeight:"bold"},children:["Link ",We+1,":"]}),u.jsxs(ee,{sx:{display:"flex",alignItems:"center",gap:1},children:[u.jsx(Lt,{fullWidth:!0,variant:"outlined",value:xe.trim(),InputProps:{readOnly:!0,sx:{color:Oe.palette.mode==="dark"?"white":Oe.palette.text.primary,bgcolor:Oe.palette.mode==="dark"?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)"}}}),u.jsx(He,{variant:"contained",color:Re===We?"success":"primary",onClick:()=>Or(xe,We),startIcon:Re===We?u.jsx(Ss,{}):u.jsx(Pl,{}),sx:{whiteSpace:"nowrap"},children:Re===We?"Copied!":"Copy"})]})]},We)),yt().length>1&&u.jsx(ee,{sx:{mb:2},children:u.jsx(He,{variant:"outlined",fullWidth:!0,onClick:bt,startIcon:ie?u.jsx(Ss,{}):u.jsx(Pl,{}),sx:{borderColor:"#E50914",color:"#E50914","&:hover":{borderColor:"#E50914",color:"#fff",background:"#E50914"}},children:ie?"All Links Copied!":"Copy All Links"})}),u.jsx(ee,{sx:{mt:1,display:"flex",justifyContent:"center"},children:u.jsx(He,{variant:"outlined",size:"small",onClick:()=>{l!=null&&l.product_link&&Er(l.product_link)},disabled:Ie==="checking",startIcon:Ie==="checking"?u.jsx(Gr,{size:16}):null,sx:{fontSize:"0.75rem"},children:Ie==="checking"?"Verificando...":"Verificar Link"})})]}):u.jsx(Yt,{severity:"info",sx:{mb:4},children:"Your purchase was successful! The admin will need to update the product link. Please contact support through Telegram for immediate access."}),u.jsxs(ee,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(l==null?void 0:l.product_link)&&u.jsx(He,{variant:"contained",color:ve?"success":"secondary",fullWidth:!0,startIcon:ve?u.jsx(Ss,{}):u.jsx(kp,{}),onClick:xn,children:ve?"PDF Downloaded!":"Download Receipt PDF"}),r&&u.jsx(He,{variant:"outlined",fullWidth:!0,startIcon:u.jsx(Is,{}),onClick:ot,sx:{borderColor:"#229ED9",color:"#229ED9","&:hover":{borderColor:"#229ED9",color:"#fff",background:"#229ED9"}},children:"Contact on Telegram"}),u.jsx(ge,{variant:"body2",sx:{color:Oe.palette.mode==="dark"?"#aaa":Oe.palette.text.secondary,textAlign:"center",mt:2},children:l!=null&&l.product_link?"Please save your product link and download the receipt PDF before closing this window. If any link does not work, please contact us via Telegram for immediate assistance.":"Your purchase has been recorded. Please contact support for access to your content."})]})]})})}),u.jsx(Ll,{open:Q,onClose:()=>he(!1),closeAfterTransition:!0,BackdropComponent:Cl,BackdropProps:{timeout:500},"aria-labelledby":"crypto-wallets-modal","aria-describedby":"modal-with-crypto-wallets",children:u.jsx(Gi,{in:Q,children:u.jsxs(ee,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:"95%",sm:420},bgcolor:Oe.palette.mode==="dark"?"#181818":"#fff",borderRadius:3,boxShadow:24,p:4,color:Oe.palette.mode==="dark"?"white":Oe.palette.text.primary,maxHeight:"90vh",overflowY:"auto"},children:[u.jsxs(ee,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[u.jsx(ge,{variant:"h5",sx:{fontWeight:"bold"},children:"Pay with Crypto"}),u.jsx(hn,{onClick:()=>he(!1),children:u.jsx(Il,{})})]}),u.jsxs(ge,{variant:"body2",sx:{mb:3,color:Oe.palette.mode==="dark"?"#aaa":"#555"},children:["Choose one of the wallets below to make your payment. ",u.jsx("br",{}),u.jsx("b",{children:"After payment, send your proof of payment via Telegram for manual confirmation."})]}),a.map((xe,We)=>{const[Xe,ft]=xe.split(`
`),[Ue,Zt]=Xe.split(" - ");return u.jsxs(ee,{sx:{display:"flex",alignItems:"center",gap:2,mb:3,p:2,border:"1px solid",borderColor:Oe.palette.mode==="dark"?"#333":"#eee",borderRadius:2,background:Oe.palette.mode==="dark"?"#232323":"#fafafa"},children:[u.jsx(ee,{sx:{minWidth:40},children:Zb[Ue]||u.jsx(gu,{fontSize:"large"})}),u.jsxs(ee,{sx:{flex:1},children:[u.jsx(ge,{variant:"subtitle1",sx:{fontWeight:"bold"},children:Zt||Ue}),u.jsx(ge,{variant:"body2",sx:{wordBreak:"break-all",color:Oe.palette.mode==="dark"?"#fff":"#222"},children:ft})]}),u.jsx(He,{variant:me===We?"contained":"outlined",color:me===We?"success":"primary",size:"small",startIcon:me===We?u.jsx(Ss,{}):u.jsx(Pl,{}),onClick:()=>{navigator.clipboard.writeText(ft),pe(We),setTimeout(()=>pe(null),2e3)},sx:{minWidth:90},children:me===We?"Copied!":"Copy"})]},We)}),u.jsx(ee,{sx:{mt:2,textAlign:"center"},children:u.jsx(He,{variant:"outlined",color:"primary",startIcon:u.jsx(Is,{}),onClick:ot,children:"Contact on Telegram"})})]})})}),u.jsx(Ll,{open:Ye,onClose:()=>be(!1),closeAfterTransition:!0,BackdropComponent:Cl,BackdropProps:{timeout:500},"aria-labelledby":"pre-payment-modal","aria-describedby":"modal-before-payment-redirect",children:u.jsx(Gi,{in:Ye,children:u.jsxs(ee,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:"95%",sm:400},maxWidth:500,bgcolor:Oe.palette.mode==="dark"?"#1e1e1e":Oe.palette.background.paper,border:"2px solid #E50914",borderRadius:2,boxShadow:24,p:4,color:Oe.palette.mode==="dark"?"white":Oe.palette.text.primary},children:[u.jsxs(ee,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[u.jsx(ge,{variant:"h5",component:"h2",sx:{fontWeight:"bold"},children:"Processing Payment"}),u.jsx(Gr,{size:30,sx:{color:Oe.palette.primary.main}})]}),u.jsx(ge,{variant:"body1",sx:{mb:2},children:"You are about to purchase:"}),u.jsx(ge,{variant:"h6",sx:{mb:3,fontWeight:"bold"},children:l==null?void 0:l.title}),u.jsx(Yt,{severity:"info",sx:{mb:3},children:"For your privacy, a generic product name will appear during checkout."}),u.jsxs(ge,{variant:"body2",sx:{mb:2,color:Oe.palette.mode==="dark"?"#aaa":"#777",display:"flex",justifyContent:"space-between"},children:[u.jsx("span",{children:"Redirecting in:"})," ",u.jsxs("span",{children:[ze," seconds"]})]}),u.jsx(Pu,{variant:"determinate",value:(7-ze)*(100/7),sx:{mb:2}}),u.jsx(ee,{sx:{display:"flex",justifyContent:"flex-end",mt:2},children:u.jsx(He,{variant:"outlined",onClick:()=>be(!1),children:"Cancel"})})]})})})]})};var wh={},Qb=Ct;Object.defineProperty(wh,"__esModule",{value:!0});var Ol=wh.default=void 0,ey=Qb(Pt()),ty=u;Ol=wh.default=(0,ey.default)((0,ty.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete");var xh={},ry=Ct;Object.defineProperty(xh,"__esModule",{value:!0});var Fl=xh.default=void 0,ny=ry(Pt()),iy=u;Fl=xh.default=(0,ny.default)((0,iy.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}),"Save");var _h={},sy=Ct;Object.defineProperty(_h,"__esModule",{value:!0});var Dl=_h.default=void 0,ay=sy(Pt()),oy=u;Dl=_h.default=(0,ay.default)((0,oy.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit");var Sh={},ly=Ct;Object.defineProperty(Sh,"__esModule",{value:!0});var e1=Sh.default=void 0,cy=ly(Pt()),uy=u;e1=Sh.default=(0,cy.default)((0,uy.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"}),"Cancel");var jh={},hy=Ct;Object.defineProperty(jh,"__esModule",{value:!0});var vo=jh.default=void 0,dy=hy(Pt()),fy=u;vo=jh.default=(0,dy.default)((0,fy.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add");var Ah={},py=Ct;Object.defineProperty(Ah,"__esModule",{value:!0});var t1=Ah.default=void 0,gy=py(Pt()),my=u;t1=Ah.default=(0,gy.default)((0,my.jsx)("path",{d:"M19 13H5v-2h14z"}),"Remove");var kh={},vy=Ct;Object.defineProperty(kh,"__esModule",{value:!0});var r1=kh.default=void 0,by=vy(Pt()),yy=u;r1=kh.default=(0,by.default)((0,yy.jsx)("path",{d:"M4 6H2v14c0 1.1.9 2 2 2h14v-2H4zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-8 12.5v-9l6 4.5z"}),"VideoLibrary");var Lh={},wy=Ct;Object.defineProperty(Lh,"__esModule",{value:!0});var n1=Lh.default=void 0,xy=wy(Pt()),_y=u;n1=Lh.default=(0,xy.default)((0,_y.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"}),"Group");function gf(n){const{children:e,value:t,index:r,...i}=n;return u.jsx("div",{role:"tabpanel",hidden:t!==r,id:`admin-tabpanel-${r}`,"aria-labelledby":`admin-tab-${r}`,...i,children:t===r&&u.jsx(ee,{sx:{p:3},children:e})})}n0("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});const Sy=bo.forwardRef((n,e)=>u.jsx(Yt,{elevation:6,ref:e,variant:"filled",...n}));async function mf(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(r)).map(s=>s.toString(16).padStart(2,"0")).join("")}const jy=()=>{var qs;const{user:n}=es(),{refreshConfig:e,updateConfig:t}=ni(),[r,i]=R.useState(0),[s,a]=R.useState([]),[c,l]=R.useState(!1),[f,g]=R.useState(null),[m,y]=R.useState(""),[v,k]=R.useState([]),[S,j]=R.useState(!1),[w,C]=R.useState(null),[F,Z]=R.useState(""),[ae,te]=R.useState(""),[G,M]=R.useState(""),[z,W]=R.useState(""),[N,T]=R.useState(null),[V,U]=R.useState(null),[ne,se]=R.useState(!1),[de,ie]=R.useState(0),[fe,ve]=R.useState(null),[Fe,P]=R.useState([]),[D,q]=R.useState([]),[H,Q]=R.useState(!1),[he,me]=R.useState([]),[pe,Pe]=R.useState(null),[Le,Te]=R.useState(!1),[Ne,Ye]=R.useState(""),[be,$]=R.useState(""),[nt,ze]=R.useState(""),[Ae,Ie]=R.useState(null),[Ee,Re]=R.useState(""),[Ge,Oe]=R.useState(""),[ot,ct]=R.useState(""),[vt,It]=R.useState(""),[tt,dt]=R.useState(""),[Me,lr]=R.useState(""),[bt,Or]=R.useState(""),[yt,At]=R.useState([]),[Er,_t]=R.useState(""),[xn,zt]=R.useState("BTC"),[xr,Fr]=R.useState(!1),[Dt,st]=R.useState(""),[St,xe]=R.useState(""),[We,Xe]=R.useState(!1),[ft,Ue]=R.useState(""),[Zt,jt]=R.useState(""),[cr,Mt]=R.useState(""),[Wt,kr]=R.useState(""),[si,_n]=R.useState(""),[Qr,en]=R.useState(""),[tn,fn]=R.useState(""),[Kr,pn]=R.useState(""),ai=[{code:"BTC",name:"Bitcoin"},{code:"ETH",name:"Ethereum"},{code:"USDT",name:"Tether USD"},{code:"BNB",name:"Binance Coin"},{code:"SOL",name:"Solana"},{code:"XRP",name:"Ripple"},{code:"ADA",name:"Cardano"},{code:"DOGE",name:"Dogecoin"},{code:"AVAX",name:"Avalanche"},{code:"DOT",name:"Polkadot"},{code:"MATIC",name:"Polygon"},{code:"SHIB",name:"Shiba Inu"}],[_i,gn]=R.useState(!1),[rn,Tn]=R.useState(null),[Ms,rs]=R.useState(!1),[Ta,Si]=R.useState(""),[Bs,Ra]=R.useState("success");R.useRef(null),R.useEffect(()=>{const oe=Je=>{const Ke=Je;Si(Ke.detail.message),Ra(Ke.detail.severity),rs(!0)};return document.addEventListener("show-feedback",oe),()=>{document.removeEventListener("show-feedback",oe)}},[]);const ns=(oe,Je)=>{i(Je)};R.useEffect(()=>{r===0?is():r===1&&(ji(),ss())},[r]);const is=async()=>{try{l(!0),g(null);const oe=await Jt.getAllVideos();console.log(`Admin: Fetched ${oe.length} videos using VideoService`);const Je=oe.map(Ke=>({$id:Ke.$id,title:Ke.title,description:Ke.description,price:Ke.price,product_link:Ke.product_link||"",video_id:Ke.video_id||Ke.videoFileId,thumbnail_id:Ke.thumbnail_id||Ke.thumbnailFileId,created_at:Ke.created_at,is_active:!0,duration:typeof Ke.duration=="string"?Ke.duration.split(":").reduce((Qe,nn)=>60*Qe+parseInt(nn),0):void 0}));a(Je),k(Je)}catch(oe){console.error("Error fetching videos:",oe),g("Failed to load videos. Please try again.")}finally{l(!1)}},ji=async()=>{try{l(!0),g(null);const Je=(await ar.listUsers()).map(Ke=>({$id:Ke.id,email:Ke.email,name:Ke.name,password:"",created_at:Ke.created_at}));me(Je)}catch(oe){console.error("Error fetching users:",oe),g("Failed to load users. Please try again.")}finally{l(!1)}},ss=async()=>{var oe,Je,Ke,Qe,nn,Tt;try{l(!0),g(null);const tr=await fetch("/api/site-config");if(!tr.ok)throw new Error(`Failed to fetch site config: ${tr.status}`);const Qt=await tr.json(),Rt={$id:Qt.id||"site-config",site_name:Qt.site_name||"",paypal_client_id:Qt.paypal_client_id||"",paypal_me_username:Qt.paypal_me_username||"",stripe_publishable_key:Qt.stripe_publishable_key||"",stripe_secret_key:Qt.stripe_secret_key||"",telegram_username:Qt.telegram_username||"",video_list_title:Qt.video_list_title||"Available Videos",crypto:Array.isArray(Qt.crypto)?Qt.crypto:[],email:Qt.email||{},wasabi_config:Qt.wasabi_config||Qt.wasabiConfig||void 0};Ie(Rt),Re(Rt.site_name),Oe(Rt.paypal_client_id),ct(Rt.paypal_me_username||""),It(Rt.stripe_publishable_key||""),dt(Rt.stripe_secret_key||""),lr(Rt.telegram_username),Or(Rt.video_list_title||"Available Videos"),At(Rt.crypto||[]),st(((oe=Rt.email)==null?void 0:oe.host)||""),xe(((Je=Rt.email)==null?void 0:Je.port)||""),Xe(!!((Ke=Rt.email)!=null&&Ke.secure)),Ue(((Qe=Rt.email)==null?void 0:Qe.user)||""),jt(((nn=Rt.email)==null?void 0:nn.pass)||""),Mt(((Tt=Rt.email)==null?void 0:Tt.from)||""),Rt.wasabi_config&&(kr(Rt.wasabi_config.accessKey||Rt.wasabi_config.access_key||""),_n(Rt.wasabi_config.secretKey||Rt.wasabi_config.secret_key||""),en(Rt.wasabi_config.region||""),fn(Rt.wasabi_config.bucket||""),pn(Rt.wasabi_config.endpoint||""))}catch(_r){console.error("Error fetching site config:",_r),g("Failed to load site configuration")}finally{l(!1)}};R.useEffect(()=>{if(!m.trim())k(s);else{const oe=m.toLowerCase().trim(),Je=s.filter(Ke=>Ke.title.toLowerCase().includes(oe)||Ke.description.toLowerCase().includes(oe));k(Je)}},[m,s]);const Ai=async oe=>{try{l(!0),g(null),await Jt.deleteVideo(oe)?(ir("Video successfully deleted!","success"),is()):ir("Failed to delete video","error")}catch(Je){console.error("Error deleting video:",Je),ir("Failed to delete video. Please try again.","error")}finally{l(!1),gn(!1),Tn(null)}},Oa=async oe=>{try{l(!0),g(null);let Je=!1;try{await ar.deleteUser(oe),Je=!0}catch{Je=!1}Je?(ir("User successfully deleted!","success"),ji()):ir("Failed to delete user","error")}catch(Je){console.error("Error deleting user:",Je),ir("Failed to delete user. Please try again.","error")}finally{l(!1),gn(!1),Tn(null)}},Xt=()=>{const Je={id:typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Date.now()}_${Math.random().toString(36).slice(2,8)}`,videoFile:null,duration:null};P([...Fe,Je])},Us=oe=>{P(Fe.filter(Je=>Je.id!==oe))},as=(oe,Je,Ke)=>{P(Fe.map(Qe=>Qe.id===oe?{...Qe,[Je]:Ke}:Qe))},$s=async()=>{try{if(se(!0),g(null),ie(0),!F||!ae||!G){ir("Please fill in all required fields","error");return}const oe=parseFloat(G);if(isNaN(oe)||oe<0){ir("Please enter a valid price","error");return}let Je="",Ke="";if(w){const Tt=s.find(_r=>_r.$id===w);Tt&&(Je=Tt.video_id||Tt.videoFileId||"",Ke=Tt.thumbnail_id||Tt.thumbnailFileId||"")}if(N){ie(20);const Tt=await In.uploadFile(N,"videos");if(!Tt.success){ir("Failed to upload video file","error");return}Je=Tt.fileId,ie(60)}if(V){const Tt=await In.uploadFile(V,"thumbnails");if(!Tt.success){ir("Failed to upload thumbnail","error");return}Ke=Tt.fileId,ie(80)}const Qe={title:F,description:ae,price:oe,productLink:z||void 0,isActive:!0};fe?Qe.duration=`${Math.floor(fe/60)}:${(fe%60).toString().padStart(2,"0")}`:w||(Qe.duration="00:00"),Je&&(Qe.videoFileId=Je,Qe.video_id=Je),Ke&&(Qe.thumbnailFileId=Ke,Qe.thumbnail_id=Ke),ie(90);const nn=async Tt=>{let _r=0;console.log("[admin] uploadAndInsert using sourceFiles:",D.map(tr=>tr.name));for(let tr=0;tr<D.length;tr++){const Qt=D[tr];console.log(`[admin] uploading source ${tr+1}/${D.length}:`,Qt.name,Qt.type,Qt.size);const Rt=await In.uploadFile(Qt,"videos");if(!Rt.success){ir("Failed to upload a source file","error");continue}const ls=void 0;try{await ar.addVideoSource(Tt,Rt.fileId,ls,tr+1),_r++}catch(Fa){console.error("Failed to insert video source:",Fa)}}return _r};if(ar.isConfigured()){let Tt="";if(w){const tr={title:Qe.title,description:Qe.description,price:Qe.price,duration:Qe.duration,video_file_id:Qe.videoFileId,thumbnail_file_id:Qe.thumbnailFileId,product_link:Qe.productLink,is_active:!0};await ar.updateVideo(w,tr),Tt=w,ir("Video updated successfully!","success")}else Tt=(await ar.createVideo({title:Qe.title,description:Qe.description,price:Qe.price,duration:Qe.duration,video_file_id:Qe.videoFileId,thumbnail_file_id:Qe.thumbnailFileId,product_link:Qe.productLink,is_active:!0})).id,ir("Video uploaded successfully!","success");const _r=D.length>0;if(console.log("[admin] hasSources:",_r,"sourceFiles:",D.map(tr=>tr.name)),_r){console.log("[admin] calling uploadAndInsert for video:",Tt);const tr=await nn(Tt);ir(`Uploaded ${tr} source(s)`,"success")}is(),j(!1),C(null)}else ir("Supabase not configured","error");ie(100),Z(""),te(""),M(""),W(""),T(null),U(null),ve(null),q([])}catch(oe){console.error("Error saving video:",oe),ir("Failed to save video. Please try again.","error")}finally{se(!1),ie(0)}},os=async()=>{try{l(!0),g(null);const oe={siteName:Ee,paypalClientId:Ge,paypalMeUsername:ot,stripePublishableKey:vt,stripeSecretKey:tt,telegramUsername:Me,videoListTitle:bt,crypto:yt,emailHost:Dt,emailPort:St,emailSecure:We,emailUser:ft,emailPass:Zt,emailFrom:cr,wasabiConfig:{accessKey:Wt,secretKey:si,region:Qr,bucket:tn,endpoint:Kr}},Je="",Ke={site_name:oe.siteName,paypal_client_id:oe.paypalClientId,paypal_me_username:oe.paypalMeUsername,stripe_publishable_key:oe.stripePublishableKey,stripe_secret_key:oe.stripeSecretKey,telegram_username:oe.telegramUsername,video_list_title:oe.videoListTitle,crypto:oe.crypto,email:{host:oe.emailHost,port:oe.emailPort,secure:oe.emailSecure,user:oe.emailUser,pass:oe.emailPass,from:oe.emailFrom},wasabi_config:oe.wasabiConfig},Qe=await fetch(`${Je}/api/site-config`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ke)});if(!Qe.ok)throw new Error(`Failed to save config: ${Qe.status} ${Qe.statusText}`);ir("Configuration saved successfully!","success"),Fr(!1),ss()}catch(oe){console.error("Error saving configuration:",oe),ir("Failed to save configuration. Please try again.","error")}finally{l(!1)}};return u.jsxs(wi,{maxWidth:"lg",sx:{py:4},children:[u.jsxs(Wr,{elevation:3,sx:{mb:4},children:[u.jsx(ee,{sx:{borderBottom:1,borderColor:"divider"},children:u.jsxs(i0,{value:r,onChange:ns,"aria-label":"admin tabs",children:[u.jsx(sd,{icon:u.jsx(r1,{}),label:"Manage Videos"}),u.jsx(sd,{icon:u.jsx(Po,{}),label:"Site Configuration & Users"})]})}),u.jsxs(gf,{value:r,index:0,children:[u.jsxs(ee,{sx:{mb:4},children:[u.jsxs(Ze,{container:!0,spacing:2,alignItems:"center",justifyContent:"space-between",children:[u.jsx(Ze,{item:!0,children:u.jsx(ge,{variant:"h5",component:"h2",gutterBottom:!0,children:"Manage Videos"})}),u.jsx(Ze,{item:!0,children:u.jsx(He,{variant:"contained",color:"primary",startIcon:u.jsx(vo,{}),onClick:()=>j(!S),children:S?"Hide Form":"Upload New Video"})})]}),f&&u.jsx(Yt,{severity:"error",sx:{mb:2,mt:2},children:f})]}),c&&!f?u.jsx(ee,{sx:{display:"flex",justifyContent:"center",my:4},children:u.jsx(Gr,{})}):u.jsxs(u.Fragment,{children:[u.jsx(ee,{sx:{mb:2,display:"flex",alignItems:"center"},children:u.jsx(Lt,{fullWidth:!0,placeholder:"Pesquisar vídeos...",value:m,onChange:oe=>y(oe.target.value),variant:"outlined",size:"small",InputProps:{startAdornment:u.jsx(Pa,{sx:{color:"action.active",mr:1}})}})}),u.jsx(ad,{component:Wr,children:u.jsxs(od,{children:[u.jsx(ld,{children:u.jsxs(ua,{children:[u.jsx(yr,{children:"Title"}),u.jsx(yr,{children:"Price"}),u.jsx(yr,{children:"Duration"}),u.jsx(yr,{children:"Status"}),u.jsx(yr,{children:"Actions"})]})}),u.jsxs(cd,{children:[v.map(oe=>u.jsxs(ua,{children:[u.jsx(yr,{children:oe.title}),u.jsxs(yr,{children:["$",oe.price]}),u.jsx(yr,{children:oe.duration?`${Math.floor(oe.duration/60)}:${(oe.duration%60).toString().padStart(2,"0")}`:"00:00"}),u.jsx(yr,{children:oe.is_active?"Active":"Inactive"}),u.jsxs(yr,{children:[u.jsx(hn,{color:"primary",onClick:()=>{Z(oe.title),te(oe.description),M(oe.price.toString()),W(oe.product_link||""),ve(oe.duration||null),C(oe.$id),j(!0)},"aria-label":"edit video",size:"small",sx:{mr:1},children:u.jsx(Dl,{fontSize:"small"})}),u.jsx(hn,{color:"error",onClick:()=>{Tn({type:"video",id:oe.$id}),gn(!0)},"aria-label":"delete video",children:u.jsx(Ol,{})})]})]},oe.$id)),v.length===0&&u.jsx(ua,{children:u.jsx(yr,{colSpan:5,align:"center",children:m.trim()?"No videos found matching your search":"No videos found"})})]})]})})]}),S&&u.jsxs(Wr,{sx:{p:3,mt:3},children:[u.jsx(ge,{variant:"h6",component:"h3",sx:{mb:3},children:w?"Edit Video":"Upload New Video"}),u.jsxs(Ze,{container:!0,spacing:3,children:[u.jsxs(Ze,{item:!0,xs:12,md:6,children:[u.jsx(Lt,{fullWidth:!0,label:"Video Title",value:F,onChange:oe=>Z(oe.target.value),variant:"outlined",sx:{mb:2}}),u.jsx(Lt,{fullWidth:!0,label:"Description",value:ae,onChange:oe=>te(oe.target.value),variant:"outlined",multiline:!0,rows:3,sx:{mb:2}}),u.jsx(Lt,{fullWidth:!0,label:"Price (USD)",type:"number",value:G,onChange:oe=>M(oe.target.value),variant:"outlined",sx:{mb:2}}),u.jsx(Lt,{fullWidth:!0,label:"Product Link (optional)",value:z,onChange:oe=>W(oe.target.value),variant:"outlined",sx:{mb:2}})]}),u.jsxs(Ze,{item:!0,xs:12,md:6,children:[u.jsxs(ee,{sx:{mb:2},children:[u.jsx(ge,{variant:"subtitle2",sx:{mb:1},children:"Video File"}),u.jsx("input",{type:"file",accept:"video/*",onChange:oe=>{var Ke;const Je=(Ke=oe.target.files)==null?void 0:Ke[0];if(Je){T(Je);const Qe=document.createElement("video");Qe.preload="metadata",Qe.onloadedmetadata=()=>{ve(Qe.duration)},Qe.src=URL.createObjectURL(Je)}},style:{width:"100%"}})]}),u.jsxs(ee,{sx:{mb:2},children:[u.jsx(ge,{variant:"subtitle2",sx:{mb:1},children:"Thumbnail Image"}),u.jsx("input",{type:"file",accept:"image/*",onChange:oe=>{var Ke;const Je=(Ke=oe.target.files)==null?void 0:Ke[0];Je&&U(Je)},style:{width:"100%"}})]}),fe&&u.jsxs(ge,{variant:"body2",color:"text.secondary",children:["Duration: ",Math.floor(fe/60),":",(fe%60).toString().padStart(2,"0")]})]})]}),u.jsxs(ee,{sx:{mt:4,mb:3},children:[u.jsxs(ee,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[u.jsx(ge,{variant:"h6",component:"h4",children:"Related Videos (Optional)"}),u.jsx(He,{variant:"outlined",size:"small",onClick:()=>{const oe=!H;Q(oe),oe&&Fe.length===0&&P([{id:Date.now().toString(),videoFile:null,duration:null}])},startIcon:H?u.jsx(t1,{}):u.jsx(vo,{}),children:H?"Hide Related Videos":"Add Related Videos"})]}),H&&u.jsxs(ee,{sx:{border:"1px dashed #ccc",borderRadius:2,p:2},children:[u.jsx(ge,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Add multiple source files for this title. These will appear as previews and parts."}),Fe.map((oe,Je)=>u.jsxs(Wr,{sx:{p:2,mb:2,bgcolor:"background.default"},children:[u.jsxs(ee,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[u.jsxs(ge,{variant:"subtitle2",children:["Source ",Je+1]}),u.jsx(He,{size:"small",color:"error",onClick:()=>Us(oe.id),startIcon:u.jsx(Ol,{}),children:"Remove"})]}),u.jsxs(Ze,{container:!0,spacing:2,children:[u.jsx(Ze,{item:!0,xs:12,md:6,children:u.jsx(ge,{variant:"caption",sx:{mb:.5,display:"block"},children:"Source ordering is based on the list position."})}),u.jsxs(Ze,{item:!0,xs:12,md:6,children:[u.jsxs(ee,{sx:{mb:1},children:[u.jsx(ge,{variant:"caption",sx:{mb:.5,display:"block"},children:"Video File"}),u.jsx("input",{type:"file",accept:"video/*",onChange:Ke=>{var nn;const Qe=(nn=Ke.target.files)==null?void 0:nn[0];if(Qe){console.log("[admin] source file selected:",Qe.name,Qe.type,Qe.size),console.log("[admin] updating relatedVideo with id:",oe.id),as(oe.id,"videoFile",Qe),q(_r=>[..._r,Qe]),console.log("[admin] sourceFiles updated:",[...D,Qe].map(_r=>_r.name));const Tt=document.createElement("video");Tt.preload="metadata",Tt.onloadedmetadata=()=>{as(oe.id,"duration",Tt.duration)},Tt.src=URL.createObjectURL(Qe)}},style:{width:"100%",fontSize:"14px"}})]}),oe.videoFile&&u.jsxs(ge,{variant:"caption",color:"text.secondary",sx:{display:"block"},children:["Selected: ",oe.videoFile.name]}),oe.duration&&u.jsxs(ge,{variant:"caption",color:"text.secondary",children:["Duration: ",Math.floor(oe.duration/60),":",(oe.duration%60).toString().padStart(2,"0")]})]})]})]},oe.id)),u.jsx(He,{variant:"outlined",onClick:Xt,startIcon:u.jsx(vo,{}),sx:{mt:1},children:"Add Another Source"}),u.jsxs(ge,{variant:"caption",sx:{display:"block",mt:1,color:"text.secondary"},children:["Sources added: ",D.length," / ",Fe.length]})]})]}),u.jsxs(ee,{sx:{display:"flex",gap:2,mt:3},children:[u.jsx(He,{variant:"contained",color:"primary",onClick:$s,disabled:ne||!F||!ae||!G,startIcon:ne?u.jsx(Gr,{size:20}):u.jsx(Fl,{}),children:ne?"Uploading...":w?"Update Video":"Upload Video"}),u.jsx(He,{variant:"outlined",onClick:()=>{j(!1),C(null),Z(""),te(""),M(""),W(""),T(null),U(null),ve(null),P([]),Q(!1)},children:"Cancel"})]}),de>0&&u.jsxs(ee,{sx:{mt:2},children:[u.jsxs(ge,{variant:"body2",color:"text.secondary",children:["Upload Progress: ",de,"%"]}),u.jsx(Pu,{variant:"determinate",value:de})]})]})]}),u.jsxs(gf,{value:r,index:1,children:[u.jsxs(ee,{sx:{mb:4},children:[u.jsxs(Ze,{container:!0,spacing:2,alignItems:"center",justifyContent:"space-between",sx:{mb:2},children:[u.jsx(Ze,{item:!0,children:u.jsx(ge,{variant:"h5",component:"h2",children:"Site Configuration"})}),u.jsx(Ze,{item:!0,children:u.jsx(He,{variant:"contained",color:"primary",onClick:()=>Fr(!xr),startIcon:xr?u.jsx(e1,{}):u.jsx(Dl,{}),children:xr?"Cancel Edit":"Edit Config"})})]}),f&&u.jsx(Yt,{severity:"error",sx:{mb:2,mt:2},children:f})]}),xr&&u.jsxs(Wr,{sx:{p:3,mb:3},children:[u.jsx(ge,{variant:"h6",component:"h3",sx:{mb:3},children:"Site Settings"}),u.jsxs(Ze,{container:!0,spacing:3,children:[u.jsxs(Ze,{item:!0,xs:12,md:6,children:[u.jsx(Lt,{fullWidth:!0,label:"Site Name",value:Ee,onChange:oe=>Re(oe.target.value),variant:"outlined",sx:{mb:2}}),u.jsx(Lt,{fullWidth:!0,label:"Video List Title",value:bt,onChange:oe=>Or(oe.target.value),variant:"outlined",sx:{mb:2}}),u.jsx(Lt,{fullWidth:!0,label:"Telegram Username",value:Me,onChange:oe=>lr(oe.target.value),variant:"outlined",placeholder:"@username",sx:{mb:2}})]}),u.jsxs(Ze,{item:!0,xs:12,md:6,children:[u.jsx(ge,{variant:"subtitle1",sx:{mb:2,fontWeight:"bold"},children:"Payment Settings"}),u.jsx(Lt,{fullWidth:!0,label:"PayPal Client ID",value:Ge,onChange:oe=>Oe(oe.target.value),variant:"outlined",sx:{mb:2}}),u.jsx(Lt,{fullWidth:!0,label:"PayPal.me Username",value:ot,onChange:oe=>ct(oe.target.value),variant:"outlined",placeholder:"@username",sx:{mb:2}}),u.jsx(Lt,{fullWidth:!0,label:"Stripe Publishable Key",value:vt,onChange:oe=>It(oe.target.value),variant:"outlined",sx:{mb:2}}),u.jsx(Lt,{fullWidth:!0,label:"Stripe Secret Key",type:"password",value:tt,onChange:oe=>dt(oe.target.value),variant:"outlined",sx:{mb:2}})]}),u.jsx(Ze,{item:!0,xs:12,children:u.jsx(ge,{variant:"subtitle1",sx:{mb:2,fontWeight:"bold"},children:"Email Settings"})}),u.jsxs(Ze,{item:!0,xs:12,md:4,children:[u.jsx(Lt,{fullWidth:!0,label:"SMTP Host",value:Dt,onChange:oe=>st(oe.target.value),variant:"outlined",sx:{mb:2}}),u.jsx(Lt,{fullWidth:!0,label:"SMTP Port",value:St,onChange:oe=>xe(oe.target.value),variant:"outlined",sx:{mb:2}}),u.jsx(s0,{control:u.jsx(a0,{checked:We,onChange:oe=>Xe(oe.target.checked)}),label:"Use SSL/TLS",sx:{mb:2}})]}),u.jsxs(Ze,{item:!0,xs:12,md:4,children:[u.jsx(Lt,{fullWidth:!0,label:"Email Username",value:ft,onChange:oe=>Ue(oe.target.value),variant:"outlined",sx:{mb:2}}),u.jsx(Lt,{fullWidth:!0,label:"Email Password",type:"password",value:Zt,onChange:oe=>jt(oe.target.value),variant:"outlined",sx:{mb:2}})]}),u.jsx(Ze,{item:!0,xs:12,md:4,children:u.jsx(Lt,{fullWidth:!0,label:"From Email",value:cr,onChange:oe=>Mt(oe.target.value),variant:"outlined",sx:{mb:2}})}),u.jsx(Ze,{item:!0,xs:12,children:u.jsx(ge,{variant:"subtitle1",sx:{mb:2,fontWeight:"bold"},children:"Wasabi Storage Settings"})}),u.jsxs(Ze,{item:!0,xs:12,md:6,children:[u.jsx(Lt,{fullWidth:!0,label:"Access Key",value:Wt,onChange:oe=>kr(oe.target.value),variant:"outlined",sx:{mb:2}}),u.jsx(Lt,{fullWidth:!0,label:"Secret Key",type:"password",value:si,onChange:oe=>_n(oe.target.value),variant:"outlined",sx:{mb:2}}),u.jsx(Lt,{fullWidth:!0,label:"Region",value:Qr,onChange:oe=>en(oe.target.value),variant:"outlined",sx:{mb:2}})]}),u.jsxs(Ze,{item:!0,xs:12,md:6,children:[u.jsx(Lt,{fullWidth:!0,label:"Bucket Name",value:tn,onChange:oe=>fn(oe.target.value),variant:"outlined",sx:{mb:2}}),u.jsx(Lt,{fullWidth:!0,label:"Endpoint",value:Kr,onChange:oe=>pn(oe.target.value),variant:"outlined",sx:{mb:2}})]}),u.jsxs(Ze,{item:!0,xs:12,children:[u.jsx(ge,{variant:"subtitle1",sx:{mb:2,fontWeight:"bold"},children:"Cryptocurrency Wallets"}),u.jsxs(ee,{sx:{display:"flex",gap:2,mb:2},children:[u.jsxs(wf,{sx:{minWidth:120},children:[u.jsx(xf,{children:"Crypto"}),u.jsx(_f,{value:xn,onChange:oe=>zt(oe.target.value),label:"Crypto",children:ai.map(oe=>u.jsxs(ba,{value:oe.code,children:[oe.name," (",oe.code,")"]},oe.code))})]}),u.jsx(Lt,{label:"Wallet Address",value:Er,onChange:oe=>_t(oe.target.value),variant:"outlined",sx:{flexGrow:1}}),u.jsx(He,{variant:"outlined",onClick:()=>{Er.trim()&&(At([...yt,`${xn}:${Er}`]),_t(""))},children:"Add"})]}),yt.length>0&&u.jsx(ee,{children:yt.map((oe,Je)=>u.jsx(or,{label:oe,onDelete:()=>{At(yt.filter((Ke,Qe)=>Qe!==Je))},sx:{mr:1,mb:1}},Je))})]})]}),u.jsxs(ee,{sx:{display:"flex",gap:2,mt:3},children:[u.jsx(He,{variant:"contained",color:"primary",onClick:os,startIcon:u.jsx(Fl,{}),children:"Save Configuration"}),u.jsx(He,{variant:"outlined",onClick:()=>{Fr(!1),ss()},children:"Cancel"})]})]}),!xr&&Ae&&u.jsxs(Wr,{sx:{p:3,mb:3},children:[u.jsx(ge,{variant:"h6",component:"h3",sx:{mb:3},children:"Current Configuration"}),u.jsxs(Ze,{container:!0,spacing:3,children:[u.jsxs(Ze,{item:!0,xs:12,md:6,children:[u.jsx(ge,{variant:"subtitle2",color:"text.secondary",children:"Site Name"}),u.jsx(ge,{variant:"body1",sx:{mb:2},children:Ae.site_name||"Not set"}),u.jsx(ge,{variant:"subtitle2",color:"text.secondary",children:"Video List Title"}),u.jsx(ge,{variant:"body1",sx:{mb:2},children:Ae.video_list_title||"Not set"}),u.jsx(ge,{variant:"subtitle2",color:"text.secondary",children:"Telegram Username"}),u.jsx(ge,{variant:"body1",sx:{mb:2},children:Ae.telegram_username||"Not set"})]}),u.jsxs(Ze,{item:!0,xs:12,md:6,children:[u.jsx(ge,{variant:"subtitle2",color:"text.secondary",children:"PayPal Client ID"}),u.jsx(ge,{variant:"body1",sx:{mb:2},children:Ae.paypal_client_id?"***"+Ae.paypal_client_id.slice(-4):"Not set"}),u.jsx(ge,{variant:"subtitle2",color:"text.secondary",children:"Stripe Publishable Key"}),u.jsx(ge,{variant:"body1",sx:{mb:2},children:Ae.stripe_publishable_key?"***"+Ae.stripe_publishable_key.slice(-4):"Not set"}),u.jsx(ge,{variant:"subtitle2",color:"text.secondary",children:"Wasabi Bucket"}),u.jsx(ge,{variant:"body1",sx:{mb:2},children:((qs=Ae.wasabi_config)==null?void 0:qs.bucket)||"Not set"})]})]})]}),u.jsxs(ee,{sx:{mb:4},children:[u.jsxs(Ze,{container:!0,spacing:2,alignItems:"center",justifyContent:"space-between",sx:{mb:2},children:[u.jsx(Ze,{item:!0,children:u.jsxs(ge,{variant:"h5",component:"h2",children:[u.jsx(n1,{sx:{mr:1,verticalAlign:"middle"}}),"Admin Users Management"]})}),u.jsx(Ze,{item:!0,children:u.jsx(He,{variant:"contained",color:"primary",startIcon:u.jsx(vo,{}),onClick:()=>{Te(!0),Ye(""),$(""),ze(""),Pe(null)},children:"Add New Admin"})})]}),c&&!f?u.jsx(ee,{sx:{display:"flex",justifyContent:"center",my:4},children:u.jsx(Gr,{})}):u.jsx(u.Fragment,{children:u.jsx(ad,{component:Wr,children:u.jsxs(od,{children:[u.jsx(ld,{children:u.jsxs(ua,{children:[u.jsx(yr,{children:"Name"}),u.jsx(yr,{children:"Email"}),u.jsx(yr,{children:"Created"}),u.jsx(yr,{children:"Actions"})]})}),u.jsxs(cd,{children:[he.map(oe=>u.jsxs(ua,{children:[u.jsx(yr,{children:oe.name}),u.jsx(yr,{children:oe.email}),u.jsx(yr,{children:oe.created_at?new Date(oe.created_at).toLocaleDateString("pt-BR",{year:"numeric",month:"2-digit",day:"2-digit"}):"N/A"}),u.jsxs(yr,{children:[u.jsx(hn,{color:"primary",onClick:()=>{Ye(oe.name),$(oe.email),ze(""),Pe(oe.$id),Te(!1)},"aria-label":"edit user",size:"small",sx:{mr:1},children:u.jsx(Dl,{fontSize:"small"})}),u.jsx(hn,{color:"error",onClick:()=>{Tn({type:"user",id:oe.$id}),gn(!0)},"aria-label":"delete user",children:u.jsx(Ol,{})})]})]},oe.$id)),he.length===0&&u.jsx(ua,{children:u.jsx(yr,{colSpan:4,align:"center",children:"No admin users found"})})]})]})})})]}),(Le||pe)&&u.jsxs(Wr,{sx:{p:3,mt:3},children:[u.jsx(ge,{variant:"h6",component:"h3",sx:{mb:3},children:Le?"Add New Admin User":"Edit Admin User"}),u.jsxs(Ze,{container:!0,spacing:3,children:[u.jsxs(Ze,{item:!0,xs:12,md:6,children:[u.jsx(Lt,{fullWidth:!0,label:"Full Name",value:Ne,onChange:oe=>Ye(oe.target.value),variant:"outlined",sx:{mb:2},required:!0}),u.jsx(Lt,{fullWidth:!0,label:"Email Address",type:"email",value:be,onChange:oe=>$(oe.target.value),variant:"outlined",sx:{mb:2},required:!0}),u.jsx(Lt,{fullWidth:!0,label:"Password",type:"password",value:nt,onChange:oe=>ze(oe.target.value),variant:"outlined",sx:{mb:2},required:!0,helperText:pe?"Leave blank to keep current password":"Enter a secure password"})]}),u.jsxs(Ze,{item:!0,xs:12,md:6,children:[u.jsxs(Yt,{severity:"info",sx:{mb:2},children:[u.jsxs(ge,{variant:"body2",children:[u.jsx("strong",{children:"Admin users"})," have full access to:"]}),u.jsxs("ul",{style:{margin:"8px 0",paddingLeft:"20px"},children:[u.jsx("li",{children:"Manage videos (upload, edit, delete)"}),u.jsx("li",{children:"Configure site settings"}),u.jsx("li",{children:"Manage other admin users"}),u.jsx("li",{children:"Access all administrative functions"})]})]}),pe&&u.jsx(Yt,{severity:"warning",sx:{mb:2},children:u.jsxs(ge,{variant:"body2",children:[u.jsx("strong",{children:"Warning:"})," Changing user credentials will require the user to log in again."]})})]})]}),u.jsxs(ee,{sx:{display:"flex",gap:2,mt:3},children:[u.jsx(He,{variant:"contained",color:"primary",onClick:async()=>{try{if(l(!0),g(null),!Ne||!be||!nt&&Le){ir("Please fill in all required fields","error");return}if(Le){const oe=await mf(nt),Je={name:Ne,email:be,password_hash:oe,role:"admin"};await ar.createUser(Je),ir("Admin user created successfully!","success")}else if(pe){const oe={name:Ne,email:be};if(nt.trim()){const Je=await mf(nt);oe.password_hash=Je}await ar.updateUser(pe,oe),ir("Admin user updated successfully!","success")}Te(!1),Pe(null),Ye(""),$(""),ze(""),ji()}catch(oe){console.error("Error saving user:",oe),ir("Failed to save user. Please try again.","error")}finally{l(!1)}},startIcon:u.jsx(Fl,{}),disabled:c,children:c?"Saving...":Le?"Create Admin User":"Update Admin User"}),u.jsx(He,{variant:"outlined",onClick:()=>{Te(!1),Pe(null),Ye(""),$(""),ze("")},children:"Cancel"})]})]})]})]}),u.jsxs(Iu,{open:_i,onClose:()=>gn(!1),"aria-labelledby":"delete-dialog-title","aria-describedby":"delete-dialog-description",children:[u.jsx(Nu,{id:"delete-dialog-title",children:"Confirm Deletion"}),u.jsx(Eu,{children:u.jsxs(o0,{id:"delete-dialog-description",children:["Are you sure you want to delete this ",rn==null?void 0:rn.type,"? This action cannot be undone."]})}),u.jsxs(jf,{children:[u.jsx(He,{onClick:()=>gn(!1),children:"Cancel"}),u.jsx(He,{onClick:()=>{rn&&(rn.type==="video"?Ai(rn.id):Oa(rn.id))},color:"error",autoFocus:!0,children:"Delete"})]})]}),u.jsx(Af,{open:Ms,autoHideDuration:6e3,onClose:()=>rs(!1),children:u.jsx(Sy,{onClose:()=>rs(!1),severity:Bs,children:Ta})})]})};function ir(n,e){const t=new CustomEvent("show-feedback",{detail:{message:n,severity:e}});document.dispatchEvent(t)}var Ch={},Ay=Ct;Object.defineProperty(Ch,"__esModule",{value:!0});var i1=Ch.default=void 0,ky=Ay(Pt()),Ly=u;i1=Ch.default=(0,ky.default)((0,Ly.jsx)("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"}),"ArrowForward");var Ph={},Cy=Ct;Object.defineProperty(Ph,"__esModule",{value:!0});var s1=Ph.default=void 0,Py=Cy(Pt()),Iy=u;s1=Ph.default=(0,Py.default)((0,Iy.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"}),"Info");const Ny=({onError:n})=>{const[e,t]=R.useState(null),[r,i]=R.useState(!0),[s,a]=R.useState([]),[c,l]=R.useState(!1),[f,g]=R.useState(300),m=()=>{const S=Date.now(),j=5*60*1e3,w=S%j,C=j-w;return Math.ceil(C/1e3)},y=S=>{if(S.length===0)return null;const j=Date.now(),w=5*60*1e3,F=Math.floor(j/w)%S.length;return S[F]},v=async(S=!1)=>{try{if(S?l(!0):i(!0),s.length===0){const j=await Jt.getAllVideos();if(a(j),j.length>0){const w=y(j);w&&t(w)}}else{const j=y(s);j&&t(j)}}catch(j){console.error("Error fetching featured video:",j),n&&n("Failed to load featured content")}finally{i(!1),S&&setTimeout(()=>{l(!1)},500)}};if(R.useEffect(()=>{v(),g(m())},[]),R.useEffect(()=>{const S=setInterval(()=>{s.length>0&&(v(!0),g(m()))},3e5);return()=>clearInterval(S)},[s.length]),R.useEffect(()=>{const S=setInterval(()=>{g(m())},1e3);return()=>clearInterval(S)},[]),r||!e)return null;const k=e.description.length>150?`${e.description.substring(0,150)}...`:e.description;return u.jsxs(ee,{sx:{position:"relative",height:{xs:"70vh",md:"80vh"},width:"100%",overflow:"hidden",mb:4,opacity:c?.7:1,transition:"opacity 0.5s ease-in-out"},children:[u.jsxs(ee,{sx:{position:"absolute",top:0,left:0,width:"100%",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",padding:"8px 16px",zIndex:3,display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[u.jsx(Zl,{sx:{color:"#FF0F50"}}),u.jsx(ge,{variant:"body2",sx:{fontWeight:"bold"},children:"18+ ADULT CONTENT • By continuing, you confirm you are at least 18 years old"})]}),u.jsxs(ee,{sx:{position:"absolute",top:0,right:0,backgroundColor:"rgba(255, 15, 80, 0.9)",color:"white",padding:"8px 12px",zIndex:3,borderRadius:"0 0 0 8px",display:"flex",alignItems:"center",gap:1},children:[u.jsx(ee,{sx:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:c?"#FFD700":"#00FF00",animation:c?"pulse 1s infinite":"none","@keyframes pulse":{"0%":{opacity:1},"50%":{opacity:.5},"100%":{opacity:1}}}}),u.jsx(ge,{variant:"caption",sx:{fontWeight:"bold",fontSize:"0.7rem"},children:c?"CHANGING...":`NEXT IN ${Math.floor(f/60)}:${(f%60).toString().padStart(2,"0")}`})]}),u.jsx(ee,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundImage:`url(${e.thumbnailUrl})`,backgroundSize:"cover",backgroundPosition:"center",filter:"brightness(0.85)","&::after":{content:'""',position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"linear-gradient(to top, rgba(0,0,0,0.95) 0%, rgba(0,0,0,0.6) 50%, rgba(0,0,0,0.4) 100%)"},"&::before":{content:'""',position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"linear-gradient(90deg, rgba(255,15,80,0.15) 0%, rgba(0,0,0,0) 100%)",zIndex:1}}}),u.jsxs(ee,{sx:{position:"absolute",bottom:"10%",left:0,width:"100%",padding:{xs:"0 5%",md:"0 10%"},zIndex:2},children:[u.jsx(or,{label:"FEATURED EXCLUSIVE",color:"primary",sx:{mb:2,fontWeight:"bold",backgroundColor:"#FF0F50","& .MuiChip-label":{px:1,py:.5}}}),u.jsx(ge,{variant:"h2",component:"h1",sx:{color:"white",fontWeight:"bold",fontSize:{xs:"2rem",sm:"3rem",md:"4rem"},textShadow:"2px 2px 8px rgba(0,0,0,0.7)",mb:2},children:e.title}),u.jsx(ge,{variant:"body1",sx:{color:"white",maxWidth:{xs:"100%",md:"50%"},mb:3,textShadow:"1px 1px 3px rgba(0,0,0,0.9)",fontSize:"1.1rem"},children:k}),u.jsxs(ee,{sx:{display:"flex",gap:2},children:[u.jsx(He,{component:Ls,to:`/video/${e.$id}`,variant:"contained",size:"large",startIcon:u.jsx(oh,{}),sx:{bgcolor:"#FF0F50",color:"white",fontWeight:"bold","&:hover":{bgcolor:"#D10D42",transform:"scale(1.03)"},px:4,py:1.2,borderRadius:"8px"},children:"Watch Now"}),u.jsx(He,{component:Ls,to:`/video/${e.$id}`,variant:"contained",size:"large",startIcon:u.jsx(s1,{}),sx:{bgcolor:"rgba(25, 25, 25, 0.8)",color:"white",fontWeight:"bold","&:hover":{bgcolor:"rgba(25, 25, 25, 0.95)",transform:"scale(1.03)"},px:4,py:1.2,borderRadius:"8px"},children:"More Info"})]}),u.jsxs(ee,{sx:{mt:3,display:"flex",alignItems:"center",gap:2,flexWrap:"wrap"},children:[u.jsx(ge,{variant:"body2",sx:{color:"white",fontWeight:"bold",display:"inline-block",border:"1px solid #FF0F50",bgcolor:"rgba(255, 15, 80, 0.2)",px:1.5,py:.5,borderRadius:"4px"},children:"18+ ADULTS ONLY"}),u.jsxs(ee,{sx:{display:"flex",alignItems:"center",gap:1,backgroundColor:"rgba(255, 15, 80, 0.9)",px:2,py:1,borderRadius:"8px",border:"2px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)"},children:[u.jsxs(ge,{variant:"h6",sx:{color:"white",fontWeight:"bold",fontSize:"1.2rem",textShadow:"1px 1px 2px rgba(0,0,0,0.5)"},children:["$",e.price.toFixed(2)]}),u.jsx(ge,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.8)",fontWeight:"bold",fontSize:"0.8rem"},children:"ONE-TIME"})]}),u.jsx(ge,{variant:"body2",sx:{color:"white",bgcolor:"rgba(25, 25, 25, 0.7)",px:1,py:.5,borderRadius:"4px"},children:e.duration})]})]})]})},Ey=({open:n,onClose:e})=>{const[t,r]=R.useState(""),[i,s]=R.useState(""),[a,c]=R.useState(!1),[l,f]=R.useState(!1),[g,m]=R.useState(null),[y,v]=R.useState(null),[k,S]=R.useState(null),[j,w]=R.useState(!1),[C,F]=R.useState(0),Z=["Configuração","Validação","Setup","Finalizado"];R.useEffect(()=>{},[n]);const ae=()=>{!l&&!a&&(r(""),s(""),m(null),v(null),S(null),F(0),e())},te=async()=>{if(!t.trim()||!i.trim()){m({success:!1,message:"Por favor, preencha tanto o Project ID quanto a API Key"});return}c(!0),m(null);try{await new Promise(W=>setTimeout(W,1e3)),m({success:!0,message:"Conexão com Wasabi validada com sucesso!"}),F(1)}catch(W){m({success:!1,message:`Erro na validação: ${W instanceof Error?W.message:"Erro desconhecido"}`})}finally{c(!1)}},G=async()=>{if(!(!(g!=null&&g.success)&&(await te(),!(g!=null&&g.success)))){f(!0),S(null),F(2);try{v({step:1,message:"Criando bucket...",percentage:25}),await new Promise(W=>setTimeout(W,1e3)),v({step:2,message:"Configurando permissões...",percentage:50}),await new Promise(W=>setTimeout(W,1e3)),v({step:3,message:"Finalizando configuração...",percentage:75}),await new Promise(W=>setTimeout(W,1e3)),v({step:4,message:"Configuração concluída!",percentage:100}),S({success:!0,message:"Wasabi configurado com sucesso!",details:["Bucket criado","Permissões configuradas","Sistema pronto para uso"],errors:[]}),F(3)}catch(W){S({success:!1,message:`Erro durante o setup: ${W instanceof Error?W.message:"Erro desconhecido"}`,details:[],errors:[W instanceof Error?W.message:"Erro desconhecido"]}),F(3)}finally{f(!1)}}},M=()=>{switch(C){case 0:return u.jsxs(ee,{children:[u.jsx(ge,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Insira as credenciais do seu bucket Wasabi para configurar automaticamente o armazenamento."}),u.jsx(Lt,{fullWidth:!0,label:"Project ID",value:t,onChange:W=>r(W.target.value),placeholder:"68xxxxxxxxxxxxxxxxxx",sx:{mb:2},disabled:a||l,helperText:"O Access Key do seu bucket Wasabi (encontrado no dashboard)"}),u.jsx(Lt,{fullWidth:!0,label:"API Key",type:"password",value:i,onChange:W=>s(W.target.value),placeholder:"Sua Secret Key do Wasabi",sx:{mb:3},disabled:a||l,helperText:"Chave API com permissões de administrador"}),g&&u.jsx(Yt,{severity:g.success?"success":"error",sx:{mb:2},children:g.message})]});case 1:return u.jsxs(ee,{children:[u.jsx(Yt,{severity:"success",sx:{mb:3},children:u.jsx(ge,{variant:"body2",children:"✅ Credenciais validadas com sucesso! Agora você pode configurar automaticamente a base de dados."})}),u.jsx(ge,{variant:"body2",color:"text.secondary",children:"O sistema irá criar automaticamente:"}),u.jsxs(Ec,{dense:!0,children:[u.jsxs(Jn,{children:[u.jsx(Yn,{children:u.jsx(co,{color:"primary"})}),u.jsx(Zn,{primary:"Database principal"})]}),u.jsxs(Jn,{children:[u.jsx(Yn,{children:u.jsx(co,{color:"primary"})}),u.jsx(Zn,{primary:"Collection de Videos"})]}),u.jsxs(Jn,{children:[u.jsx(Yn,{children:u.jsx(co,{color:"primary"})}),u.jsx(Zn,{primary:"Collection de Users"})]}),u.jsxs(Jn,{children:[u.jsx(Yn,{children:u.jsx(co,{color:"primary"})}),u.jsx(Zn,{primary:"Collection de Configurações"})]}),u.jsxs(Jn,{children:[u.jsx(Yn,{children:u.jsx(co,{color:"primary"})}),u.jsx(Zn,{primary:"Collection de Sessions"})]}),u.jsxs(Jn,{children:[u.jsx(Yn,{children:u.jsx(ud,{color:"primary"})}),u.jsx(Zn,{primary:"Bucket de Videos"})]}),u.jsxs(Jn,{children:[u.jsx(Yn,{children:u.jsx(ud,{color:"primary"})}),u.jsx(Zn,{primary:"Bucket de Thumbnails"})]}),u.jsxs(Jn,{children:[u.jsx(Yn,{children:u.jsx(Qc,{color:"primary"})}),u.jsx(Zn,{primary:"Dados iniciais"})]})]})]});case 2:return u.jsxs(ee,{children:[u.jsx(ge,{variant:"h6",sx:{mb:2},children:"Configurando base de dados..."}),y&&u.jsxs(ee,{sx:{mb:3},children:[u.jsxs(ee,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[u.jsx(ge,{variant:"body2",color:"text.secondary",children:y.stage}),u.jsxs(ge,{variant:"body2",color:"text.secondary",children:[y.progress,"%"]})]}),u.jsx(Pu,{variant:"determinate",value:y.progress,sx:{mb:1},color:y.isError?"error":"primary"}),u.jsx(ge,{variant:"body2",color:y.isError?"error.main":"text.secondary",children:y.message})]}),u.jsx(ee,{sx:{display:"flex",justifyContent:"center",mt:2},children:u.jsx(Gr,{})})]});case 3:return u.jsx(ee,{children:k&&u.jsxs(u.Fragment,{children:[u.jsxs(Yt,{severity:k.success?"success":"error",sx:{mb:2},action:u.jsx(hn,{color:"inherit",size:"small",onClick:()=>w(!j),children:j?u.jsx(h0,{}):u.jsx(d0,{})}),children:[u.jsx(ge,{variant:"body1",sx:{fontWeight:"bold"},children:k.message}),u.jsx(ge,{variant:"body2",sx:{mt:1},children:'Clique em "Ver Detalhes" para ver o resumo das operações realizadas.'})]}),u.jsx(Sf,{in:j,children:u.jsxs(ee,{sx:{mt:2},children:[k.details.length>0&&u.jsxs(ee,{sx:{mb:2},children:[u.jsx(ge,{variant:"subtitle2",color:"success.main",sx:{mb:1},children:"✅ Operações Realizadas:"}),u.jsx(Ec,{dense:!0,children:k.details.map((W,N)=>u.jsxs(Jn,{children:[u.jsx(Yn,{children:u.jsx(kf,{color:"success",fontSize:"small"})}),u.jsx(Zn,{primary:W,primaryTypographyProps:{variant:"body2"}})]},N))})]}),k.errors.length>0&&u.jsxs(ee,{children:[u.jsx(ge,{variant:"subtitle2",color:"error.main",sx:{mb:1},children:"❌ Erros encontrados:"}),u.jsx(Ec,{dense:!0,children:k.errors.map((W,N)=>u.jsxs(Jn,{children:[u.jsx(Yn,{children:u.jsx(f0,{color:"error",fontSize:"small"})}),u.jsx(Zn,{primary:W,primaryTypographyProps:{variant:"body2"}})]},N))})]})]})})]})});default:return null}},z=()=>{switch(C){case 0:return u.jsxs(u.Fragment,{children:[u.jsx(He,{onClick:ae,disabled:a||l,children:"Cancelar"}),u.jsx(He,{onClick:te,variant:"contained",disabled:a||l||!t.trim()||!i.trim(),startIcon:a?u.jsx(Gr,{size:16}):null,children:a?"Validando...":"Validar Conexão"})]});case 1:return u.jsxs(u.Fragment,{children:[u.jsx(He,{onClick:()=>F(0),disabled:l,children:"Voltar"}),u.jsx(He,{onClick:G,variant:"contained",color:"primary",disabled:l,children:"Iniciar Setup Automático"})]});case 2:return u.jsx(He,{onClick:ae,disabled:l,children:"Cancelar"});case 3:return u.jsx(He,{onClick:ae,variant:"contained",color:k!=null&&k.success?"primary":"error",children:"Fechar"});default:return null}};return u.jsxs(Iu,{open:n,onClose:ae,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{minHeight:"500px"}},children:[u.jsx(Nu,{children:u.jsxs(ee,{sx:{display:"flex",alignItems:"center",gap:1},children:[u.jsx(Qc,{color:"primary"}),u.jsx(ge,{variant:"h6",children:"Configurar Armazenamento Wasabi"})]})}),u.jsxs(Eu,{children:[u.jsx(l0,{activeStep:C,sx:{mb:4},children:Z.map(W=>u.jsx(c0,{children:u.jsx(u0,{children:W})},W))}),M()]}),u.jsx(jf,{sx:{px:3,pb:2},children:z()})]})},Ty=()=>{const[n,e]=R.useState({projectId:"",apiKey:""}),[t,r]=R.useState(!1),[i,s]=R.useState(!1);R.useEffect(()=>{e({projectId:"wasabi",apiKey:"configured"}),r(!0)},[]),R.useEffect(()=>{const c=l=>{l.ctrlKey&&l.altKey&&(l.key==="c"||l.key==="C")&&(s(!0),window.setTimeout(()=>s(!1),1e4))};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[]);const a=()=>{confirm("Tem certeza que deseja limpar as credenciais?")&&(localStorage.removeItem("wasabi-config"),e({projectId:"",apiKey:""}),r(!1))};return i?t?u.jsxs(ee,{sx:{position:"relative",mb:3,p:2,bgcolor:"rgba(76, 175, 80, 0.1)",borderRadius:1,border:"1px solid rgba(76, 175, 80, 0.3)"},children:[u.jsx(hn,{"aria-label":"fechar",size:"small",onClick:()=>s(!1),sx:{position:"absolute",top:8,right:8},children:u.jsx(hd,{fontSize:"small"})}),u.jsxs(ee,{sx:{display:"flex",alignItems:"center",mb:2},children:[u.jsx(kf,{sx:{color:"#4CAF50",mr:1}}),u.jsx(ge,{variant:"h6",sx:{color:"#4CAF50",fontWeight:"bold"},children:"Credenciais Configuradas"})]}),u.jsxs(ee,{sx:{display:"flex",flexDirection:"column",gap:1,mb:2},children:[u.jsxs(ee,{sx:{display:"flex",alignItems:"center",gap:1},children:[u.jsx(ge,{variant:"body2",sx:{fontWeight:"bold",minWidth:100},children:"Project ID:"}),u.jsx(or,{label:n.projectId,size:"small",sx:{bgcolor:"rgba(76, 175, 80, 0.2)",color:"#4CAF50"}})]}),u.jsxs(ee,{sx:{display:"flex",alignItems:"center",gap:1},children:[u.jsx(ge,{variant:"body2",sx:{fontWeight:"bold",minWidth:100},children:"API Key:"}),u.jsx(or,{label:`${n.apiKey.substring(0,8)}...`,size:"small",sx:{bgcolor:"rgba(76, 175, 80, 0.2)",color:"#4CAF50"}})]})]}),u.jsxs(ee,{sx:{display:"flex",gap:1},children:[u.jsx(He,{size:"small",variant:"outlined",startIcon:u.jsx(Qc,{}),onClick:a,sx:{borderColor:"#FF9800",color:"#FF9800","&:hover":{borderColor:"#F57C00",color:"#F57C00"}},children:"Limpar Credenciais"}),u.jsx(ge,{variant:"caption",sx:{color:"rgba(0,0,0,0.6)",alignSelf:"center"},children:"💡 Dica: Use Ctrl + Alt + S no footer para configuração secreta"})]})]}):u.jsx(Yt,{severity:"warning",sx:{mb:2},action:u.jsx(hn,{size:"small",onClick:()=>s(!1),children:u.jsx(hd,{fontSize:"small"})}),children:u.jsxs(ge,{variant:"body2",children:[u.jsx("strong",{children:"Credenciais não configuradas:"})," Use o botão de configuração para definir o Access Key e Secret Key do Wasabi."]})}):null},Ry=()=>u.jsxs(To,{sx:{height:"100%",display:"flex",flexDirection:"column",borderRadius:"8px",overflow:"hidden",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",bgcolor:"background.paper"},children:[u.jsx(Vr,{variant:"rectangular",sx:{width:"100%",paddingTop:"56.25%"},animation:"wave"}),u.jsxs(Wl,{children:[u.jsx(Vr,{variant:"text",sx:{fontSize:"1.5rem",mb:1}}),u.jsx(Vr,{variant:"text",sx:{fontSize:"1rem",width:"60%"}}),u.jsxs(ee,{sx:{mt:2,display:"flex",justifyContent:"space-between"},children:[u.jsx(Vr,{variant:"text",sx:{width:"30%"}}),u.jsx(Vr,{variant:"text",sx:{width:"20%"}})]})]})]}),Oy=({index:n})=>u.jsxs(To,{sx:{height:"100%",display:"flex",flexDirection:"column",borderRadius:"8px",overflow:"hidden",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",bgcolor:"background.paper",position:"relative"},children:[u.jsx(ee,{sx:{width:"100%",paddingTop:"56.25%",position:"relative",bgcolor:"rgba(0,0,0,0.05)",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsxs(ee,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[u.jsx(Gr,{size:40,thickness:4,sx:{color:"primary.main",animation:"pulse 1.5s ease-in-out infinite"}}),u.jsxs(ge,{variant:"caption",sx:{color:"text.secondary",fontWeight:"bold",textAlign:"center"},children:["Loading video ",n+1,"..."]})]})}),u.jsxs(Wl,{children:[u.jsx(Vr,{variant:"text",sx:{fontSize:"1.5rem",mb:1}}),u.jsx(Vr,{variant:"text",sx:{fontSize:"1rem",width:"60%"}}),u.jsxs(ee,{sx:{mt:2,display:"flex",justifyContent:"space-between"},children:[u.jsx(Vr,{variant:"text",sx:{width:"30%"}}),u.jsx(Vr,{variant:"text",sx:{width:"20%"}})]})]})]}),Fy=()=>{const[n,e]=R.useState([]),[t,r]=R.useState(!0),[i,s]=R.useState(null),[a,c]=R.useState(1),[l,f]=R.useState(1),[g,m]=R.useState(!1),[y,v]=R.useState(!1),[k,S]=R.useState(""),[j,w]=R.useState([]),[C,F]=R.useState(!1),{user:Z}=es(),{videoListTitle:ae}=ni(),te=En(),G=24;R.useEffect(()=>{(async()=>{try{r(!0),s(null),w([]),e([]);const se=await Jt.getVideoIds(yi.NEWEST),de=Math.ceil(se.length/G);f(de);const ie=(a-1)*G,fe=ie+G,ve=se.slice(ie,fe);r(!1),M(ve)}catch(se){console.error("Error fetching videos:",se),s("Failed to load videos. Please try again later."),r(!1)}})(),v(!1)},[Z,a]);const M=async ne=>{F(!0);for(let se=0;se<ne.length;se++){const de=ne[se];try{const ie=await Jt.getVideo(de);ie&&(w(fe=>[...fe,ie]),e(fe=>[...fe,ie])),se>0&&await new Promise(fe=>setTimeout(fe,150))}catch(ie){console.error(`Error loading video ${de}:`,ie)}}F(!1)},z=(ne,se)=>{c(se),window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{const de=document.querySelector("header");de&&de.scrollIntoView({behavior:"smooth",block:"start"})},100)},W=()=>{const ne=G,se=j.length,de=Math.max(0,ne-se);return Array(de).fill(0).map((ie,fe)=>u.jsx(Ze,{item:!0,xs:12,sm:6,md:4,lg:3,children:u.jsx(Ry,{})},`skeleton-${fe}`))},N=()=>{const ne=G,se=j.length,de=Math.max(0,ne-se);return Array(de).fill(0).map((ie,fe)=>u.jsx(Ze,{item:!0,xs:12,sm:6,md:4,lg:3,children:u.jsx(Oy,{index:se+fe})},`loading-${fe}`))},T=ne=>{s(ne)},V=ne=>{ne.preventDefault(),k.trim()&&te(`/videos?search=${encodeURIComponent(k.trim())}`)},U=ne=>{S(ne.target.value)};return u.jsxs(ee,{sx:{width:"100%"},children:[u.jsx("style",{children:`
          @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
          }
        `}),u.jsx(Ny,{onError:T}),u.jsxs(wi,{maxWidth:"lg",sx:{py:4},children:[u.jsx(Ty,{}),u.jsxs(Wr,{elevation:2,sx:{p:2,mb:3,background:"linear-gradient(135deg, rgba(255, 15, 80, 0.08) 0%, rgba(209, 13, 66, 0.08) 100%)",borderRadius:1.5,border:"1px solid rgba(255, 15, 80, 0.1)"},children:[u.jsx(ge,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:600,mb:1.5,fontSize:"1rem"},children:"🔍 Find Your Perfect Video"}),u.jsxs(ee,{component:"form",onSubmit:V,sx:{display:"flex",gap:1.5,alignItems:"center",flexDirection:{xs:"column",sm:"row"}},children:[u.jsx(Lt,{placeholder:"Search by title, category, or description...",size:"small",value:k,onChange:U,sx:{flexGrow:1,minWidth:{xs:"100%",sm:"280px"},"& .MuiOutlinedInput-root":{backgroundColor:"background.paper",height:"40px","&:hover fieldset":{borderColor:"primary.main"}},"& .MuiInputBase-input":{fontSize:"0.9rem"}},InputProps:{startAdornment:u.jsx(Cu,{position:"start",children:u.jsx(Pa,{color:"primary",sx:{fontSize:"20px"}})})}}),u.jsx(He,{type:"submit",variant:"contained",color:"primary",size:"small",sx:{minWidth:{xs:"100%",sm:"100px"},py:1,px:2,fontWeight:600,height:"40px"},disabled:!k.trim(),children:"Search"})]})]}),u.jsxs(ee,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},justifyContent:"space-between",alignItems:{xs:"stretch",md:"center"},mb:3},children:[u.jsxs(ee,{children:[u.jsx(ge,{variant:"h4",component:"h2",gutterBottom:!0,children:ae||"Featured Videos"}),!t&&n.length>0&&u.jsxs(ee,{sx:{display:"flex",gap:2,flexWrap:"wrap",mt:1,alignItems:"center"},children:[u.jsx(or,{label:`From $${Math.min(...n.map(ne=>ne.price)).toFixed(2)}`,size:"small",sx:{backgroundColor:"rgba(255, 15, 80, 0.1)",color:"#FF0F50",fontWeight:"bold",border:"1px solid rgba(255, 15, 80, 0.3)"}}),u.jsx(or,{label:`Up to $${Math.max(...n.map(ne=>ne.price)).toFixed(2)}`,size:"small",sx:{backgroundColor:"rgba(255, 15, 80, 0.1)",color:"#FF0F50",fontWeight:"bold",border:"1px solid rgba(255, 15, 80, 0.3)"}}),u.jsx(or,{label:`Avg: $${(n.reduce((ne,se)=>ne+se.price,0)/n.length).toFixed(2)}`,size:"small",sx:{backgroundColor:"rgba(255, 15, 80, 0.1)",color:"#FF0F50",fontWeight:"bold",border:"1px solid rgba(255, 15, 80, 0.3)"}}),C&&j.length<n.length&&u.jsx(or,{label:`Loading ${j.length}/${n.length} videos...`,size:"small",sx:{backgroundColor:"rgba(33, 150, 243, 0.1)",color:"#2196F3",fontWeight:"bold",border:"1px solid rgba(33, 150, 243, 0.3)",animation:"pulse 1.5s ease-in-out infinite"}})]})]}),u.jsxs(ee,{sx:{display:"flex",gap:1,alignItems:"center",alignSelf:{xs:"flex-start",md:"center"}},children:[y&&u.jsx(p0,{title:"Configurar Armazenamento Wasabi",children:u.jsx(He,{onClick:()=>m(!0),variant:"outlined",color:"secondary",size:"small",sx:{minWidth:"auto",px:1.5,opacity:.7,"&:hover":{opacity:1}},children:u.jsx(Po,{fontSize:"small"})})}),u.jsx(He,{component:Ls,to:"/videos",variant:"outlined",color:"primary",endIcon:u.jsx(i1,{}),children:"View All Videos"})]})]}),i&&u.jsx(Yt,{severity:"error",sx:{mb:3},action:u.jsx(He,{color:"inherit",size:"small",onClick:()=>m(!0),startIcon:u.jsx(Po,{}),children:"Configurar Base de Dados"}),children:i}),u.jsx(Gi,{in:!0,timeout:500,children:u.jsx(ee,{children:t?u.jsx(Ze,{container:!0,spacing:3,children:W()}):n.length===0&&!C?u.jsx(Ml,{in:!0,timeout:1e3,children:u.jsx(Yt,{severity:"info",sx:{mb:3,borderRadius:2,"& .MuiAlert-icon":{fontSize:"1.5rem"}},children:"No videos available at the moment. Please check back later."})}):u.jsxs(u.Fragment,{children:[u.jsxs(Ze,{container:!0,spacing:3,children:[j.map((ne,se)=>u.jsx(Ml,{in:!0,timeout:200,children:u.jsx(Ze,{item:!0,xs:12,sm:6,md:4,lg:3,children:u.jsx(lh,{video:ne})})},ne.$id)),C&&N()]}),l>1&&u.jsx(Gi,{in:!0,timeout:800,children:u.jsx(ee,{sx:{display:"flex",justifyContent:"center",mt:5,pt:3,borderTop:"1px solid",borderColor:"divider"},children:u.jsx(g0,{count:l,page:a,onChange:z,color:"primary",size:"large",showFirstButton:!0,showLastButton:!0,sx:{"& .MuiPaginationItem-root":{transition:"all 0.3s ease","&:hover":{transform:"scale(1.1)",bgcolor:"primary.main",color:"white"}}}})})})]})})})]}),u.jsx(jp,{}),u.jsx(Ey,{open:g,onClose:()=>m(!1)})]})};Tu`
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
`;Tu`
  0% {
    transform: scale(1);
  }
  100% {
    transform: scale(1.1);
  }
`;Tu`
  0% {
    opacity: 1;
  }
  100% {
    opacity: 0;
  }
`;var Ih={},Dy=Ct;Object.defineProperty(Ih,"__esModule",{value:!0});var a1=Ih.default=void 0,My=Dy(Pt()),By=u;a1=Ih.default=(0,My.default)((0,By.jsx)("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2m0 14H4v-6h16zm0-10H4V6h16z"}),"Payment");const Uy=[{cc:"GB",name:"UK"},{cc:"CA",name:"Canada"},{cc:"AU",name:"Australia"},{cc:"DE",name:"Germany"},{cc:"FR",name:"France"}];function o1(n){return n[Math.floor(Math.random()*n.length)]}function $y(){if(Math.random()<.8)return{countryLabel:"USA",countryEmoji:"🇺🇸"};const e=o1(Uy),t={GB:"🇬🇧",CA:"🇨🇦",AU:"🇦🇺",DE:"🇩🇪",FR:"🇫🇷"};return{countryLabel:e.name,countryEmoji:t[e.cc]}}function qy(n){try{return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(n)}catch{return`$${n.toFixed(2)}`}}const zy=n=>n==="Stripe"?u.jsx(nh,{fontSize:"small"}):u.jsx(a1,{fontSize:"small"}),Wy=({visible:n,country:e,countryEmoji:t,provider:r,product:i,price:s})=>u.jsx(Gi,{in:n,timeout:{enter:400,exit:400},children:u.jsx(Wr,{elevation:6,sx:{p:1.5,borderRadius:2,minWidth:280,maxWidth:360},children:u.jsxs(m0,{direction:"row",spacing:1.25,alignItems:"center",children:[u.jsx(v0,{sx:{width:32,height:32},children:t}),u.jsxs(ee,{sx:{flexGrow:1,minWidth:0},children:[u.jsxs(ge,{variant:"body2",noWrap:!0,children:["Someone purchased • ",e]}),u.jsxs(ge,{variant:"caption",color:"text.secondary",noWrap:!0,children:[zy(r),u.jsxs(ee,{component:"span",sx:{ml:.5},children:["completed via ",r]})]}),u.jsxs(ge,{variant:"body2",noWrap:!0,children:[i," • ",qy(s)]})]})]})})}),Vy=()=>{const[n,e]=R.useState([]),[t,r]=R.useState(!1),[i,s]=R.useState(null),a=R.useRef(null);R.useEffect(()=>{let l=!1;return(async()=>{try{const f=await Jt.getAllVideos(yi.NEWEST);l||e(f)}catch{}})(),()=>{l=!0}},[]);const c=()=>4e4;return R.useEffect(()=>{function l(f=!1){const g=f?5e3:c(),m=window.setTimeout(()=>{if(n.length===0){l(!1);return}const y=o1(n),v=$y(),k=Math.random()<.6?"Stripe":"PayPal";s({country:v.countryLabel,countryEmoji:v.countryEmoji,provider:k,product:y.title,price:Number(y.price)||0}),r(!0),window.setTimeout(()=>r(!1),4200),l(!1)},g);a.current=m}return l(!0),()=>{a.current&&window.clearTimeout(a.current)}},[n]),i?u.jsx(ee,{sx:{position:"fixed",left:16,top:16,zIndex:l=>l.zIndex.snackbar},children:u.jsx(Wy,{visible:t,country:i.country,countryEmoji:i.countryEmoji,provider:i.provider,product:i.product,price:i.price})}):null},vf="privacy_notice_ack",Hy=()=>{const[n,e]=R.useState(!1);R.useEffect(()=>{localStorage.getItem(vf)||e(!0)},[]);const t=()=>{e(!1),localStorage.setItem(vf,"1")};return u.jsx(Af,{open:n,onClose:t,autoHideDuration:8e3,anchorOrigin:{vertical:"top",horizontal:"center"},children:u.jsx(Yt,{onClose:t,severity:"info",variant:"filled",sx:{width:"100%"},children:"We do not share or store your data. It is 100% secure."})})},Gy=()=>{const{pathname:n}=ri();return R.useEffect(()=>{try{window.scrollTo({top:0,left:0,behavior:"instant"})}catch{window.scrollTo(0,0)}},[n]),null};var bf={},Ky="@vercel/analytics",Jy="1.5.0",Yy=()=>{window.va||(window.va=function(...e){(window.vaq=window.vaq||[]).push(e)})};function l1(){return typeof window<"u"}function c1(){try{const n="production"}catch{}return"production"}function Zy(n="auto"){if(n==="auto"){window.vam=c1();return}window.vam=n}function Xy(){return(l1()?window.vam:c1())||"production"}function Lu(){return Xy()==="development"}function Qy(n){return n.scriptSrc?n.scriptSrc:Lu()?"https://va.vercel-scripts.com/v1/script.debug.js":n.basePath?`${n.basePath}/insights/script.js`:"/_vercel/insights/script.js"}function ew(n={debug:!0}){var e;if(!l1())return;Zy(n.mode),Yy(),n.beforeSend&&((e=window.va)==null||e.call(window,"beforeSend",n.beforeSend));const t=Qy(n);if(document.head.querySelector(`script[src*="${t}"]`))return;const r=document.createElement("script");r.src=t,r.defer=!0,r.dataset.sdkn=Ky+(n.framework?`/${n.framework}`:""),r.dataset.sdkv=Jy,n.disableAutoTrack&&(r.dataset.disableAutoTrack="1"),n.endpoint?r.dataset.endpoint=n.endpoint:n.basePath&&(r.dataset.endpoint=`${n.basePath}/insights`),n.dsn&&(r.dataset.dsn=n.dsn),r.onerror=()=>{const i=Lu()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log(`[Vercel Web Analytics] Failed to load script from ${t}. ${i}`)},Lu()&&n.debug===!1&&(r.dataset.debug="false"),document.head.appendChild(r)}function tw({route:n,path:e}){var t;(t=window.va)==null||t.call(window,"pageview",{route:n,path:e})}function rw(){if(!(typeof process>"u"||typeof bf>"u"))return bf.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function nw(n){return R.useEffect(()=>{var e;n.beforeSend&&((e=window.va)==null||e.call(window,"beforeSend",n.beforeSend))},[n.beforeSend]),R.useEffect(()=>{ew({framework:n.framework||"react",basePath:n.basePath??rw(),...n.route!==void 0&&{disableAutoTrack:!0},...n})},[]),R.useEffect(()=>{n.route&&n.path&&tw({route:n.route,path:n.path})},[n.route,n.path]),null}const u1=()=>u.jsx(nw,{}),iw=({open:n,onClose:e})=>{const t=Eo(),r=yf(t.breakpoints.down("sm")),[i,s]=R.useState(12);return R.useEffect(()=>{if(!n)return;const a=setInterval(()=>{s(c=>c<=1?(e(),0):c-1)},1e3);return()=>clearInterval(a)},[n,e]),R.useEffect(()=>{n&&s(4)},[n]),u.jsx(Iu,{open:n,onClose:()=>{},maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:3,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",position:"relative",overflow:"hidden"}},children:u.jsxs(Eu,{sx:{p:4,textAlign:"center",position:"relative"},children:[u.jsx(ee,{sx:{position:"absolute",top:-50,right:-50,width:100,height:100,borderRadius:"50%",background:"rgba(255, 255, 255, 0.1)",zIndex:0}}),u.jsx(ee,{sx:{position:"absolute",bottom:-30,left:-30,width:80,height:80,borderRadius:"50%",background:"rgba(255, 255, 255, 0.1)",zIndex:0}}),u.jsxs(ee,{sx:{position:"relative",zIndex:1},children:[u.jsx(ee,{sx:{mb:3},children:u.jsx(Gr,{size:r?40:50,thickness:4,sx:{color:"white"}})}),u.jsx(Nu,{sx:{p:0,mb:2},children:u.jsx(ge,{variant:r?"h5":"h4",component:"h1",sx:{fontWeight:"bold",background:"linear-gradient(45deg, #fff 30%, #f0f0f0 90%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:"Loading Site..."})}),u.jsxs(ge,{variant:"h6",sx:{mb:3,fontWeight:"bold",color:"#ffeb3b",textShadow:"0 1px 2px rgba(0,0,0,0.5)"},children:["Please wait ",i," seconds"]}),u.jsx(jo,{sx:{mb:3,borderColor:"rgba(255,255,255,0.3)"}}),u.jsxs(ee,{sx:{mb:3},children:[u.jsx(ge,{variant:r?"h6":"h5",sx:{mb:2,fontWeight:"bold",color:"#ffeb3b",textShadow:"0 1px 2px rgba(0,0,0,0.5)"},children:"🎉 Special Offers Available! 🎉"}),u.jsxs(ee,{sx:{mb:2,p:2,borderRadius:2,background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",backdropFilter:"blur(10px)"},children:[u.jsxs(ee,{sx:{display:"flex",alignItems:"center",mb:1},children:[u.jsx(b0,{sx:{mr:1,color:"#4caf50"}}),u.jsx(ge,{variant:"h6",sx:{fontWeight:"bold"},children:"Crypto Payment Special"})]}),u.jsx(ge,{variant:"body1",sx:{mb:1},children:"Pay with cryptocurrency above $40 and get"}),u.jsx(or,{label:"2 FREE Contents",sx:{background:"linear-gradient(45deg, #4caf50 30%, #8bc34a 90%)",color:"white",fontWeight:"bold",fontSize:"0.9rem"}})]}),u.jsxs(ee,{sx:{p:2,borderRadius:2,background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",backdropFilter:"blur(10px)"},children:[u.jsxs(ee,{sx:{display:"flex",alignItems:"center",mb:1},children:[u.jsx(y0,{sx:{mr:1,color:"#fff"}}),u.jsx(ge,{variant:"h6",sx:{fontWeight:"bold"},children:"Apple Pay & Other Methods"})]}),u.jsx(ge,{variant:"body1",sx:{mb:1},children:"Pay with Apple Pay, PayPal, or other methods and get"}),u.jsx(or,{label:"1 FREE Content",sx:{background:"linear-gradient(45deg, #2196f3 30%, #21cbf3 90%)",color:"white",fontWeight:"bold",fontSize:"0.9rem"}})]})]}),u.jsx(ge,{variant:"body2",sx:{color:"rgba(255, 255, 255, 0.8)",fontStyle:"italic"},children:"Site is loading all metadata for the best experience..."})]})]})})},sw=()=>{const{siteName:n,loading:e}=ni(),[t,r]=R.useState(!1),[i,s]=R.useState(!0),a=ri(),c=!1;R.useEffect(()=>{n&&(document.title=`${n} - Adult Content`)},[n,a]),R.useEffect(()=>{},[a.pathname,c]);const l=()=>{s(!1)};return R.useEffect(()=>{s(!0)},[]),u.jsxs(ee,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[u.jsx(iw,{open:i,onClose:l}),c,u.jsx(Hy,{}),u.jsx(Vy,{}),u.jsx(u1,{}),u.jsx(hm,{}),u.jsxs(ee,{component:"main",sx:{flexGrow:1},children:[u.jsx(Gy,{}),u.jsxs(f2,{children:[u.jsx(xs,{path:"/",element:u.jsx(Fy,{})}),u.jsx(xs,{path:"/videos",element:u.jsx(hv,{})}),u.jsx(xs,{path:"/video/:id",element:u.jsx(Xb,{})}),u.jsx(xs,{path:"/video/legacy/:id",element:u.jsx(bv,{})}),u.jsx(xs,{path:"/login",element:u.jsx(_m,{})}),u.jsx(xs,{path:"/admin",element:u.jsx(Sm,{children:u.jsx(jy,{})})})]})]}),u.jsx(xm,{})]})},aw=()=>u.jsx(k2,{children:u.jsx(x2,{children:u.jsx(L2,{children:u.jsx(K5,{children:u.jsx(sw,{})})})})});Cf(document.getElementById("root")).render(u.jsxs(R.StrictMode,{children:[u.jsx(aw,{}),u.jsx(u1,{})]}));
